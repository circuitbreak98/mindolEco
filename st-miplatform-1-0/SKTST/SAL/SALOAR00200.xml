<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="600" Id="form" Left="8" OnLoadCompleted="form_OnLoadCompleted" PidAttrib="7" Title="SKT수납대행_온라인도매" Top="8" Ver="1.0" Width="1024" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_payCl">
				<Contents>
					<colinfo id="comm_cd_val" size="256" summ="default" type="STRING"/>
					<colinfo id="comm_cd_val_nm" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_condition"></Dataset>
			<Dataset DataSetType="Dataset" Id="ds_payPlc">
				<Contents>
					<colinfo id="DEAL_CO_CD" size="255" type="STRING"/>
					<colinfo id="DEAL_CO_NM" size="255" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_stlPlc">
				<Contents>
					<colinfo id="STL_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="deal_end_yn" size="256" summ="default" type="STRING"/>
					<colinfo id="pay_stop_yn" size="256" summ="default" type="STRING"/>
					<colinfo id="sale_stop_yn" size="256" summ="default" type="STRING"/>
					<colinfo id="out_stop_yn" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_payChgrgId">
				<Contents>
					<colinfo id="user_id" size="256" summ="default" type="STRING"/>
					<colinfo id="user_nm" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_sktChargeIf">
				<Contents>
					<colinfo id="OP_DT" size="255" summ="default" type="STRING"/>
					<colinfo id="OP_TM" size="255" summ="default" type="STRING"/>
					<colinfo id="SEQ" size="255" summ="default" type="STRING"/>
					<colinfo id="IF_REC_TYP" size="255" summ="default" type="STRING"/>
					<colinfo id="POS_AGENCY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="POS_AGENCY_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="CHANNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="CHANNEL_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="SVC_MGMT_NUM" size="255" summ="default" type="STRING"/>
					<colinfo id="PROC_DT" size="255" summ="default" type="STRING"/>
					<colinfo id="PROC_TM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_CL" size="255" summ="default" type="STRING"/>
					<colinfo id="SETTL_WAY" size="255" summ="default" type="STRING"/>
					<colinfo id="WCKT_DEAL_TYP" size="255" summ="default" type="STRING"/>
					<colinfo id="CUST_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="SVC_NUM" size="255" summ="default" type="STRING"/>
					<colinfo id="PROC_ID" size="255" summ="default" type="STRING"/>
					<colinfo id="PROC_CHGRG_ID" size="255" summ="default" type="STRING"/>
					<colinfo id="SVC_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_OBJ_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="PS_APND_YN" size="255" summ="default" type="STRING"/>
					<colinfo id="ERROR_CL" size="255" summ="default" type="STRING"/>
					<colinfo id="RMKS" size="255" summ="default" type="STRING"/>
					<colinfo id="USER_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="AGENCY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="AGENCY_CD_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_CHANNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC" size="256" summ="default" type="STRING"/>
					<colinfo id="UPD_CNT" size="255" summ="default" type="STRING"/>
					<colinfo id="SETTL_WAY" size="255" summ="default" type="STRING"/>
					<colinfo id="SETTL_WAY_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="SL_CL" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_CHANNEL_CD" size="255" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_input">
				<Contents>
					<colinfo id="PAY_DTM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="SVC_MGMT_NUM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_SEQ" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_CHGRG_ID" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_CHNNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_CHNNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="DEAL_CO_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="CUST_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="SVC_NUM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_CL" size="255" summ="default" type="STRING"/>
					<colinfo id="SL_CL" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_OBJ_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="CASH_PAY_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="PRXPAY_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="MER_BOND_PAY_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="DT_CLS_YN" size="255" summ="default" type="STRING"/>
					<colinfo id="RMKS" size="255" summ="default" type="STRING"/>
					<colinfo id="UPD_CNT" size="255" summ="default" type="STRING"/>
					<colinfo id="FLAG" size="255" summ="default" type="STRING"/>
					<colinfo id="IF_UPD_CNT" size="255" summ="default" type="STRING"/>
					<colinfo id="SETTL_WAY" size="255" summ="default" type="STRING"/>
					<colinfo id="SETTL_WAY_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_CHANNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="CASH_DPST_FIX_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="MER_BOND_DPST_FIX_YN" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_list">
				<Contents>
					<colinfo id="PAY_DTM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="SVC_MGMT_NUM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_SEQ" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_CHGRG_ID" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_PLC_CHNNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="STL_PLC_CHNNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="DEAL_CO_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="CUST_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="SVC_NUM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_CL" size="255" summ="default" type="STRING"/>
					<colinfo id="SL_CL" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_OBJ_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="CASH_PAY_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="PRXPAY_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="MER_BOND_PAY_AMT" size="255" summ="default" type="STRING"/>
					<colinfo id="DT_CLS_YN" size="255" summ="default" type="STRING"/>
					<colinfo id="RMKS" size="255" summ="default" type="STRING"/>
					<colinfo id="UPD_CNT" size="255" summ="default" type="STRING"/>
					<colinfo id="FLAG" size="255" summ="default" type="STRING"/>
					<colinfo id="SETTL_WAY" size="255" summ="default" type="STRING"/>
					<colinfo id="SETTL_WAY_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="REV_ITM_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_NM" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_UKEY_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_SUB_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="PAY_REQ_PLC_CHANNEL_CD" size="255" summ="default" type="STRING"/>
					<colinfo id="CASH_DPST_FIX_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="MER_BOND_DPST_FIX_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="ACC_MTH" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
		</Datasets>
		<Grid AutoFit="TRUE" BindDataset="ds_list" BkColor2="user32" BoldHead="true" Border="Flat" Bottom="367" ColSizing="TRUE" Enable="true" EndLineColor="default" FillArea="TRUE" FillAreaType="Control" HeadBorder="Flat" HeadHeight="22" Height="279" Id="grd_list" InputPanel="FALSE" Left="7" LineColor="user33" MinWidth="100" OnCellClick="grd_list_OnCellClick" Right="1011" RowHeight="21" Style="sty_Grid" TabOrder="2" TabStop="true" Top="88" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="user33" WheelScrollRow="1" Width="1004">
			<contents>
				<format id="Default">
					<columns>
						<col width="47"/>
						<col width="84"/>
						<col width="111"/>
						<col width="108"/>
						<col width="107"/>
						<col width="67"/>
						<col width="76"/>
						<col width="67"/>
						<col width="74"/>
						<col width="74"/>
					</columns>
					<head>
						<cell bkcolor="user34" col="0" color="user35" display="text" rowspan="2" text="번호"/>
						<cell bkcolor="user34" col="1" color="user35" display="text" rowspan="2" text="수납일자"/>
						<cell bkcolor="user34" col="2" color="user35" display="text" rowspan="2" text="수납처"/>
						<cell bkcolor="user34" col="3" color="user35" display="text" rowspan="2" text="정산처"/>
						<cell bkcolor="user34" col="4" color="user35" display="text" rowspan="2" text="서비스관리번호"/>
						<cell bkcolor="user34" col="5" color="user35" display="text" rowspan="2" text="수납구분"/>
						<cell bkcolor="user34" col="6" color="user35" colspan="4" display="text" text="수납정보"/>
						<cell bkcolor="user34" col="6" color="user35" display="text" row="1" text="현금"/>
						<cell bkcolor="user34" col="7" color="user35" display="text" row="1" text="대납"/>
						<cell bkcolor="user34" col="8" color="user35" display="text" row="1" text="상품권"/>
						<cell bkcolor="user34" col="9" color="user35" display="text" row="1" text="수납금액"/>
					</head>
					<body>
						<cell align="center" col="0" display="text" expr="row+1"/>
						<cell align="center" col="1" colid="PAY_DTM" display="date"/>
						<cell col="2" colid="PAY_PLC_NM" display="text"/>
						<cell col="3" colid="STL_PLC_NM" display="text"/>
						<cell align="center" col="4" colid="SVC_MGMT_NUM" display="text"/>
						<cell align="center" col="5" colid="PAY_CL" combocol="comm_cd_val" combodataset="ds_payCl" combotext="comm_cd_val_nm" display="combo"/>
						<cell col="6" colid="CASH_PAY_AMT" display="number"/>
						<cell align="right" col="7" colid="PRXPAY_AMT" display="number"/>
						<cell align="right" col="8" colid="MER_BOND_PAY_AMT" display="number"/>
						<cell align="right" col="9" display="number" expr="CASH_PAY_AMT+PRXPAY_AMT+MER_BOND_PAY_AMT"/>
					</body>
					<summary>
						<cell bkcolor="user37" col="0" color="user38" display="text"/>
						<cell bkcolor="user37" col="1" color="user38" display="text"/>
						<cell bkcolor="user37" col="2" color="user38" display="text"/>
						<cell bkcolor="user37" col="3" color="user38" display="text"/>
						<cell bkcolor="user37" col="4" color="user38" display="text"/>
						<cell align="right" bkcolor="user37" col="5" color="user38" display="text" font="돋움,9,Bold" text="합계"/>
						<cell bkcolor="user37" col="6" color="user38" display="number" expr='sum(&quot;CASH_PAY_AMT&quot;)'/>
						<cell bkcolor="user37" col="7" color="user38" display="number" expr='sum(&quot;PRXPAY_AMT&quot;)'/>
						<cell bkcolor="user37" col="8" color="user38" display="number" expr='sum(&quot;MER_BOND_PAY_AMT&quot;)'/>
						<cell bkcolor="user37" col="9" color="user38" display="number" expr='sum(&quot;CASH_PAY_AMT+PRXPAY_AMT+MER_BOND_PAY_AMT&quot;)'/>
					</summary>
				</format>
			</contents>
		</Grid>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_new" ImageID="btn_e_4" Left="-192" LeftMargin="17" OnClick="btn_new_OnClick" Style="sty_btn_e" TabOrder="4" Text="신규등록" Top="565" Visible="FALSE" Width="85"></Button>
		<Image Align="Left" Height="25" Id="Image1" ImageID="bul_tit" Left="8" LeftMargin="15" Style="sty_img_tit" TabOrder="6" TabStop="FALSE" Text="요금수납&#32;내역" Top="60" Width="192"></Image>
		<Div Border="Raised" Height="40" Id="div_search" Left="8" Style="sty_div_search" TabOrder="1" Text="Div0" Top="10" Width="1004">
			<Contents>
				<Static Align="Right" Height="21" Id="Static1" Left="28" Style="sty_lb_Basic" TabOrder="0" Text="서비스관리번호" Top="7" VAlign="Middle" Width="94"></Static>
				<Edit Border="Flat" Height="20" Id="edt_svcMgmtNum" Left="125" LeftMargin="2" MaxLength="10" Number="TRUE" RightMargin="2" Style="sty_ipt_form" TabOrder="1" Top="7" Width="105"></Edit>
				<Button Align="Left" ButtonStyle="TRUE" Height="21" Id="btn_search" ImageID="btn_a_2" Left="612" LeftMargin="5" OnClick="btn_search_OnClick" Style="sty_btn_a" TabOrder="2" Text="조회" Top="7" Visible="FALSE" Width="60"></Button>
				<Static Align="Right" Height="20" Id="Static0" Left="220" Style="sty_lb_Basic" TabOrder="4" Text="개통번호" Top="7" VAlign="Middle" Width="92"></Static>
				<Edit Border="Flat" Height="20" Id="edt_svcNum" Left="315" LeftMargin="2" MaxLength="12" RightMargin="2" Style="sty_ipt_form" TabOrder="5" Top="7" Width="105"></Edit>
				<Static Align="Right" Height="20" Id="Static2" Left="388" Style="sty_lb_Basic" TabOrder="7" Text="고객명" Top="7" VAlign="Middle" Width="92"></Static>
				<Edit Border="Flat" Enable="FALSE" Height="20" Id="edt_custNm" Left="491" LeftMargin="2" MaxLength="10" OnKeyDown="div_search_edt_svcMgmtNum_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="6" Top="7" Width="105"></Edit>
			</Contents>
		</Div>
		<Image Align="Left" Height="25" Id="Image0" ImageID="bul_tit" Left="8" LeftMargin="15" Style="sty_img_tit" TabOrder="5" TabStop="FALSE" Text="판매정보" Top="372" Width="192"></Image>
		<Div Border="Raised" Height="155" Id="div_input" Left="6" Style="sty_div_input" TabOrder="3" Text="Div0" Top="400" Width="1004">
			<Contents>
				<Calendar Border="Flat" ButtonImageID="btn_i_calendar" DayFont="Default,-1" HeaderBorder="NONE" HeaderFont="Default,-1" HeadStyle="sty_calendar_head" Height="20" Id="cal_payDtm" Left="69" LeftMargin="2" MonthPopupBorder="RAISED" NullValue="&#32;" OnChanged="div_input_cal_payDtm_OnChanged" RightMargin="2" SaturdayTextColor="user28" Style="sty_calendar" SundayTextColor="user27" TabOrder="1" TodayColor="user26" Top="7" WeeksFont="Default,-1" WeekStyle="sty_calendar_week" Width="104"></Calendar>
				<Static Align="Right" Height="20" Id="Static2" Left="470" Style="sty_lb_Basic" TabOrder="0" Text="수납처" Top="6" VAlign="Middle" Width="60"></Static>
				<Static Align="Right" Height="20" Id="Static3" Left="5" Style="sty_lb_Basic" TabOrder="1" Text="수납일자" Top="7" VAlign="Middle" Width="60"></Static>
				<Static Align="Right" Height="20" Id="Static10" Left="301" Style="sty_lb_Basic" TabOrder="9" Text="현금&#32;수납금액" Top="61" VAlign="Middle" Width="84"></Static>
				<Static Align="Right" Height="20" Id="Static11" Left="29" Style="sty_lb_Basic" TabOrder="9" Text="수납&#32;대상&#32;금액" Top="61" VAlign="Middle" Width="92"></Static>
				<MaskEdit BindDataset="ds_input" Border="Flat" Column="PRXPAY_AMT" DisableColor="#373c4a" Height="20" Id="msk_prxpayAmt" Left="636" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="9" Top="61" Value="0" Width="104"></MaskEdit>
				<MaskEdit BindDataset="ds_input" Border="Flat" Column="CASH_PAY_AMT" DisableColor="#373c4a" Height="20" Id="msk_cashPayAmt" Left="388" LeftMargin="2" Mask="0" RightMargin="2" Style="sty_ipt_form" TabOrder="8" Top="61" Value="0" Width="104"></MaskEdit>
				<Static Align="Right" Height="20" Id="Static12" Left="572" Style="sty_lb_Basic" TabOrder="11" Text="대납금액" Top="61" VAlign="Middle" Width="60"></Static>
				<Shape Bottom="87" Height="1" Id="Shape0" Left="-15" LineColor="user9" Right="1009" TabOrder="11" Top="86" Width="1024"></Shape>
				<Static Align="Right" Height="20" Id="Static13" Left="61" Style="sty_lb_Basic" TabOrder="11" Text="비고" Top="91" VAlign="Middle" Width="60"></Static>
				<TextArea BindDataset="ds_input" Border="Flat" Column="RMKS" Height="50" Id="txt_rmks" Left="124" Style="sty_ipt_form" TabOrder="11" Top="92" VScroll="TRUE" Width="866"></TextArea>
				<Static Height="20" Id="Static14" Left="230" TabOrder="12" Text="원" Top="61" VAlign="Middle" Width="16"></Static>
				<Static Height="20" Id="Static15" Left="494" TabOrder="14" Text="원" Top="61" VAlign="Middle" Width="16"></Static>
				<Static Height="20" Id="Static16" Left="742" TabOrder="14" Text="원" Top="61" VAlign="Middle" Width="16"></Static>
				<MaskEdit BindDataset="ds_input" Border="Flat" Column="PAY_OBJ_AMT" DisableColor="#373c4a" Height="20" Id="msk_payObjAmt" Left="124" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="7" Top="61" Value="0" Width="104"></MaskEdit>
				<Image Height="20" Id="Image2" ImageID="bul_mand" Left="21" TabOrder="20" TabStop="FALSE" Top="61" Transparent="TRUE" Width="20"></Image>
				<Static Align="Right" Height="20" Id="Static4" Left="6" Style="sty_lb_Basic" TabOrder="15" Text="수납구분" Top="30" VAlign="Middle" Width="60"></Static>
				<Edit BindDataset="ds_input" Border="Flat" Column="SVC_MGMT_NUM" Height="20" Id="edt_svcMgmtNum" Left="230" LeftMargin="2" MaxLength="10" Number="TRUE" RightMargin="2" Style="sty_ipt_form" TabOrder="2" Top="7" Visible="FALSE" Width="17"></Edit>
				<Radio BindDataset="ds_input" Border="None" CodeColumn="comm_cd_val" Column="PAY_CL" ColumnCount="3" DataColumn="comm_cd_val_nm" Height="20" Id="rdo_payCl" INDEX="-1" InnerDataset="ds_payCl" Left="70" LeftMargin="5" OnChanged="div_input_rdo_payCl_OnChanged" RightMargin="25" Style="sty_opt_input" TabOrder="5" Top="30" Width="155"></Radio>
				<Static Align="Right" Height="20" Id="Static21" Left="780" Style="sty_lb_Basic" TabOrder="16" Text="상품권" Top="61" VAlign="Middle" Width="84"></Static>
				<MaskEdit BindDataset="ds_input" Border="Flat" Column="MER_BOND_PAY_AMT" DisableColor="#373c4a" Height="20" Id="msk_merBondPayAmt" Left="868" LeftMargin="2" Mask="0" RightMargin="2" Style="sty_ipt_form" TabOrder="10" Top="61" Value="0" Width="104"></MaskEdit>
				<Static Height="20" Id="Static22" Left="974" TabOrder="18" Text="원" Top="61" VAlign="Middle" Width="16"></Static>
				<Shape Bottom="56" Height="1" Id="Shape1" Left="-7" LineColor="user9" Right="1017" TabOrder="20" Top="55" Width="1024"></Shape>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_PLC_SUB_CD" Enable="FALSE" Height="20" Id="edt_payPlcSubCd" Left="693" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="15" TabStop="FALSE" Top="7" Width="50"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_PLC_CHNNEL_CD" Enable="FALSE" Height="20" Id="edt_payPlcChannelCd" Left="742" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="15" TabStop="FALSE" Top="7" Width="50"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_PLC" Height="20" Id="edt_payPlc" Left="791" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="12" TabStop="FALSE" Top="7" Visible="FALSE" Width="11"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_PLC_UKEY_CD" Enable="FALSE" Height="20" Id="edt_payPlcUkeyCd" Left="644" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="16" TabStop="FALSE" Top="7" Width="50"></Edit>
				<Button Height="21" Id="btn_payPlc" ImageID="btn_i_detail" Left="625" OnClick="div_input_btn_payPlc_OnClick" TabOrder="4" Text="Button0" Top="7" Width="19"></Button>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_PLC_NM" Height="20" Id="edt_payPlcNm" Left="532" LeftMargin="2" OnKeyDown="div_input_edt_payPlcNm_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="3" Top="7" Width="94"></Edit>
				<Combo BindDataset="ds_input" Border="Flat" CodeColumn="user_id" Column="PAY_CHGRG_ID" DataColumn="user_nm" Editable="TRUE" Height="20" Id="cmb_payChgrgId" InnerDataset="ds_payChgrgId" Left="876" Search="FILTERED" Style="sty_ipt_form" TabOrder="6" Top="6" Width="112"></Combo>
				<Static Align="Right" Height="20" Id="Static0" Left="800" Style="sty_lb_Basic" TabOrder="29" Text="&#32;담당자" Top="7" VAlign="Middle" Width="76"></Static>
				<Edit BindDataset="ds_input" Border="Flat" Column="STL_PLC_NM" Enable="FALSE" Height="20" Id="edt_stlPlcNm" Left="876" LeftMargin="2" OnKeyDown="div_search_edt_payPlcNm_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="13" TabStop="FALSE" Top="30" Width="112"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="STL_PLC_UKEY_CD" Enable="FALSE" Height="20" Id="edt_stlPlcUkeyCd" Left="952" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="17" TabStop="FALSE" Top="30" Visible="FALSE" Width="11"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="STL_PLC_SUB_CD" Enable="FALSE" Height="20" Id="edt_stlPlcSubCd" Left="961" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="18" TabStop="FALSE" Top="30" Visible="FALSE" Width="11"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="STL_PLC_CHNNEL_CD" Enable="FALSE" Height="20" Id="edt_stlPlcChannelCd" Left="970" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="19" TabStop="FALSE" Top="30" Visible="FALSE" Width="11"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="STL_PLC" Height="20" Id="edt_stlPlc" Left="979" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="14" TabStop="FALSE" Top="30" Visible="FALSE" Width="11"></Edit>
				<Static Align="Right" Height="20" Id="Static1" Left="798" Style="sty_lb_Basic" TabOrder="36" Text="정산처" Top="30" VAlign="Middle" Width="76"></Static>
				<MaskEdit Border="Flat" DisableColor="#373c4a" DisplayComma="FALSE" Height="20" Id="msk_payDtmHHMMSS" Left="175" LeftMargin="2" Mask="##:##.##" RightMargin="2" Style="sty_ipt_form" TabOrder="38" Top="7" Type="STRING" Width="55"></MaskEdit>
				<Static Align="Right" Height="20" Id="Static5" Left="256" Style="sty_lb_Basic" TabOrder="39" Text="결재조건" Top="7" VAlign="Middle" Width="60"></Static>
				<Edit BindDataset="ds_input" Border="Flat" Column="SETTL_WAY_NM" Height="20" Id="edt_settlWwayNm" Left="320" LeftMargin="2" MaxLength="10" OnKeyDown="div_search_edt_svcMgmtNum_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="41" Top="7" Width="146"></Edit>
				<Static Align="Right" Height="20" Id="Static6" Left="240" Style="sty_lb_Basic" TabOrder="40" Text="매출" Top="30" VAlign="Middle" Width="76"></Static>
				<Edit BindDataset="ds_input" Border="Flat" Column="REV_ITM_NM" Height="20" Id="edt_revItmNm" Left="386" LeftMargin="2" MaxLength="10" OnKeyDown="div_search_edt_svcMgmtNum_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="43" Top="30" Width="80"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="REV_ITM_CD" Height="20" Id="edt_revItmCd" Left="321" LeftMargin="2" MaxLength="10" OnKeyDown="div_search_edt_svcMgmtNum_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="42" Top="30" Width="64"></Edit>
				<Static Align="Right" Height="20" Id="Static7" Left="470" Style="sty_lb_Basic" TabOrder="44" Text="의뢰처" Top="30" VAlign="Middle" Width="60"></Static>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_REQ_PLC_NM" Height="20" Id="edt_payReqPlcNm" Left="532" LeftMargin="2" OnCharChanged="div_input_edt_payReqPlcNm_OnCharChanged" RightMargin="2" Style="sty_ipt_form" TabOrder="45" Top="31" Width="94"></Edit>
				<Button Height="21" Id="btn_payReqPlc" ImageID="btn_i_detail" Left="624" OnClick="div_input_btn_payReqPlc_OnClick" TabOrder="46" Text="Button0" Top="31" Width="19"></Button>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_REQ_PLC_UKEY_CD" Enable="FALSE" Height="20" Id="edt_payReqPlcUkeyCd" Left="644" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="49" TabStop="FALSE" Top="31" Width="50"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_REQ_PLC_SUB_CD" Enable="FALSE" Height="20" Id="edt_payReqPlcSubCd" Left="693" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="48" TabStop="FALSE" Top="31" Width="50"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_REQ_PLC_CHANNEL_CD" Enable="FALSE" Height="20" Id="edt_payReqPlcChannelCd" Left="742" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="48" TabStop="FALSE" Top="31" Width="50"></Edit>
				<Edit BindDataset="ds_input" Border="Flat" Column="PAY_REQ_PLC" Height="20" Id="edt_payReqPlc" Left="791" LeftMargin="2" OnKeyDown="div_input_common_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="47" TabStop="FALSE" Top="31" Visible="FALSE" Width="11"></Edit>
			</Contents>
		</Div>
		<Button Cursor="HAND" Height="20" Id="Button5" ImageID="btn_i_exceldown_w" Left="992" OnClick="btn_excel_OnClick" TabOrder="7" Text="Button1" ToolTipText="Excel&#32;Download" Top="64" Width="19"></Button>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_save" ImageID="btn_c_2" Left="824" LeftMargin="5" OnClick="btn_save_OnClick" Style="sty_btn_c" TabOrder="8" Text="저장" Top="560" Visible="FALSE" Width="60"></Button>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_cancel" ImageID="btn_d_2" Left="950" LeftMargin="5" OnClick="btn_close_OnClick" Style="sty_btn_d" TabOrder="9" Text="닫기" Top="560" Width="60"></Button>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_delete" ImageID="btn_d_2" Left="888" LeftMargin="5" OnClick="btn_del_OnClick" Style="sty_btn_d" TabOrder="10" Text="삭제" Top="560" Visible="FALSE" Width="60"></Button>
	</Form>
	<Script><![CDATA[/*******************************************************************************
* 프로그램ID : SALARA00100
* 업무명      :  소매 - 수납대항관리
* 프로그램명  : SKT수납대행
--------------------------------------------------------------------------------
* 작성자      : 정재열
* 작성일      : 2009.02.02
--------------------------------------------------------------------------------
* 1. 변경이력
수정자    :
수정일    :
수정 내역 :
*******************************************************************************/


//==============================================================================
// 공통 스크립트 로딩
//==============================================================================
#include "lib::lib_commF.js"
#include "lib::lib_commMsg.js"
#include "lib::lib_commPopup.js"
#include "lib::lib_SAL.js"
#include "lib::lib_util.js"
//==============================================================================
// 폼 변수 정의
//==============================================================================
var FV_STR_NAME; // 사용자 이름

// UKEY-INTERFACE
var FV_INTERFACE_ADD_ROW;
var FV_INTERFACE;	
var FV_IF_OP_DT;
var FV_IF_OP_TM;
var FV_IF_SEQ;
var FV_IF_UPD_CNT;
var FV_JOB;
var FV_SVC_MGMT_NUM;  // 서비스관리번호


// 글로벌 세션정보
var FV_USER_ID;	// 사용자ID
var FV_USER_NM;		// 사용자명

var	FV_ORG_ID;				// 소속 
var	FV_ORG_NM;				// 소속명
var	FV_ORG_CL;				// 소속구분
var	FV_AGENCY_ID;           // 소속 대리점ID
var	FV_AGENCY_NM;           // 소속 대리점명
var	FV_AGENCY_UKEY_ID;      // 소속 대리점UKEY ID	
	
var	FV_ORG_AREA_ID;				// 근무지 ID
var	FV_ORG_AREA_NM;				// 근무지명
var	FV_ORG_AREA_POS_AGENCY_CD;	// 근무지 
var	FV_ORG_AREA_UKEY_ID;     // 근무지ukeyid
var	FV_ORG_AREA_SUB_CD;      // 근무지subcd
var	FV_ORG_AREA_CHANNEL_CD;  // 근무지 channelcd	
var	FV_USER_GRP;			 // 유저그룹
var	FV_DUTY;					// 사용자 직책
var	FV_ORG_AREA_CL1;			// 근무지 구분

var FV_PAY_COMPLEX = false;
var FV_SL_CL;
/*******************************************************************************
 * @description    : 최초 폼 로드시 발생 - 이벤트
*******************************************************************************/
function form_OnLoadCompleted(obj)
{	
	//var interface = "1";
	if( IsExistVar("interface",true) == true)
	{
		FV_INTERFACE = true;
		FV_IF_OP_DT = ifOpDt;
		FV_IF_OP_TM = ifOpTm;
		FV_IF_SEQ   = ifSeq;
	}
	else
	{
		FV_INTERFACE = false;
	}
	
	if(IsExistVar("svcMgmtNum", true) == true)
	{
		FV_SVC_MGMT_NUM = svcMgmtNum;
	}
	
	cf_setAuth(pFrmNum);	// 권한 공통
	cf_setGrdChecknSortEvent(grd_list);	// 그리드 정렬

	f_init();
}


/*******************************************************************************
 * @description    : 콜백
 * @param sSvcID   : 서비스 아이디
*******************************************************************************/
function f_callBack(sSvcID)
{	
//trace("### f_callBack : " +  sSvcID);
	switch(sSvcID)
	{
	case "svcList":
//trace(ds_list.SaveXML());
		var nRows = ds_list.GetRowCount();
		if(nRows > 0)
		{					
			if(FV_INTERFACE == true)
			{
				
			}
			else
			{
				FV_JOB = "MOD";
				grd_list_OnCellClick(grd_list, 0);
			}
		}
		else
		{
			FV_JOB = "NEW";
			if(FV_INTERFACE == true)
			{
			}
			else
			{
				uf_ObjComponentClear(div_input);
				div_search.edt_custNm.Text = "";			
			}
		}
		break;
		
		
	case "svcSave":
		div_search.edt_svcMgmtNum.Text = ds_input.GetColumn(0,"SVC_MGMT_NUM");
		//btn_search_OnClick();
		
//		ds_input.DeleteAll();
//		ds_input.AddRow();

		
		if(FV_INTERFACE == true)
		{
			parent.div_search_btn_search_OnClick();
		}
		else
		{
			parent.btn_searchList_OnClick();
		}
		ds_input.ApplyChange();
		Close();
		
		break;
	
	case "svcDel":
	/*
		div_search.edt_svcMgmtNum.Text = ds_input.GetColumn(0,"SVC_MGMT_NUM");
		btn_search_OnClick();
		
		ds_input.DeleteAll();
		ds_input.AddRow();
	*/	
		if(FV_INTERFACE == true)
		{
			parent.div_search_btn_search_OnClick();
		}
		else
		{
			parent.btn_searchList_OnClick();
		}		

		ds_input.ApplyChange();
		Close();
		break;	
		
	case "svcStlPlc":
		var sStlPlc     = ds_stlPlc.GetColumn(0,"STL_PLC");
		var sStlPlcNm   = ds_stlPlc.GetColumn(0,"STL_PLC_NM");	
		var sUkeyCd     = ds_stlPlc.GetColumn(0,"ukey_agency_cd");
		var sSubCd      = ds_stlPlc.GetColumn(0,"ukey_sub_cd");	
		var sChannelCd  = ds_stlPlc.GetColumn(0,"ukey_channel_cd");	
		var sDealEndYn  = ds_stlPlc.GetColumn(0,"deal_end_yn");		// 거래종료여부
		var sSaleStopYn = ds_stlPlc.GetColumn(0,"sale_stop_yn");	// 판매정지여부    
		var sPayStopYn  = ds_stlPlc.GetColumn(0,"pay_stop_yn");

		div_input.edt_stlPlc.Text          = sStlPlc;  
		div_input.edt_stlPlcNm.Text        = sStlPlcNm;
		div_input.edt_stlPlcUkeyCd.Text    = sUkeyCd;
		div_input.edt_stlPlcSubCd.Text     = sSubCd;
		div_input.edt_stlPlcChannelCd.Text = sChannelCd;
		                                 
		if ( sPayStopYn == 'N')
		{	//  수납가능한 상태
			FV_STL_YN = true;
			btn_save.Enable = true;
		}
		else
		{
			alert("정산처 상태가 수납정지로 수납처리 할 수 없습니다.");
			FV_STL_YN = false;
			btn_save.Enable = false;
		}

		div_input.edt_stlPlc.Text   = sStlPlc;
		div_input.edt_stlPlcNm.Text = sStlPlcNm;
		break;
		
	case "svcChrgrIdList":	
//trace(ds_payChgrgId.SaveXML());		
		cf_setInitDataForCmb(div_input.cmb_payChgrgId, "선택");
		break;
		
	case "svcInterface":
//trace(ds_sktChargeIf.SaveXML());
//trace(ds_list.SaveXML());
		var nRows = ds_sktChargeIf.GetRowCount();

		if(nRows > 0)
		{
			var sSvcMgmtNum      = ds_sktChargeIf.GetColumn(0, "SVC_MGMT_NUM");
			var sAgencyCd        = ds_sktChargeIf.GetColumn(0, "AGENCY_CD");
			var sAgencyCdNm      = ds_sktChargeIf.GetColumn(0, "AGENCY_CD_NM");
			var sPayPlcNm        = ds_sktChargeIf.GetColumn(0, "PAY_PLC_NM");
			var sPayplcUkeyCd    = ds_sktChargeIf.GetColumn(0, "PAY_PLC_UKEY_CD");
			var sPayPlcSubCd     = ds_sktChargeIf.GetColumn(0, "PAY_PLC_SUB_CD");
			var sPayPlcChannelCd = ds_sktChargeIf.GetColumn(0, "PAY_PLC_CHANNEL_CD");
			var sPayPlc          = ds_sktChargeIf.GetColumn(0, "PAY_PLC");
			var sProcDt          = ds_sktChargeIf.GetColumn(0, "PROC_DT");
			var sProcTm          = ds_sktChargeIf.GetColumn(0, "PROC_TM");
			var sPayCl           = ds_sktChargeIf.GetColumn(0, "PAY_CL");
			var sCustNm          = ds_sktChargeIf.GetColumn(0, "CUST_NM");
			var sSvcNum          = ds_sktChargeIf.GetColumn(0, "SVC_NUM");
			var sProcChgrgId     = ds_sktChargeIf.GetColumn(0, "PROC_CHGRG_ID");
			var sSvcCd           = ds_sktChargeIf.GetColumn(0, "SVC_CD");
			var sPayObjAmt       = ds_sktChargeIf.GetColumn(0, "PAY_OBJ_AMT");
			var sUPD_CNT         = ds_sktChargeIf.GetColumn(0, "UPD_CNT");
			
			var sSettlWay        = ds_sktChargeIf.GetColumn(0, "SETTL_WAY");
			var sSettlWayNm      = ds_sktChargeIf.GetColumn(0, "SETTL_WAY_NM");
			var sRevItmCd        = ds_sktChargeIf.GetColumn(0, "REV_ITM_CD");
			var sRevItmNm        = ds_sktChargeIf.GetColumn(0, "REV_ITM_NM");
			var sSlCl		     = ds_sktChargeIf.GetColumn(0, "SL_CL");

			var sPayReqPlcNm        = ds_sktChargeIf.GetColumn(0, "PAY_REQ_PLC_NM");
			var sPayReqplcUkeyCd    = ds_sktChargeIf.GetColumn(0, "PAY_REQ_PLC_UKEY_CD");
			var sPayReqPlcSubCd     = ds_sktChargeIf.GetColumn(0, "PAY_REQ_PLC_SUB_CD");
			var sPayReqPlcChannelCd = ds_sktChargeIf.GetColumn(0, "PAY_REQ_PLC_CHANNEL_CD");
			var sPayReqPlc          = ds_sktChargeIf.GetColumn(0, "PAY_REQ_PLC");
			var sifRecType          = ds_sktChargeIf.GetColumn(0, "IF_REC_TYP");
			
			FV_AGENCY_ID    = sAgencyCd;
			FV_SVC_MGMT_NUM = sSvcMgmtNum;
			FV_IF_UPD_CNT   = sUPD_CNT;
			FV_SL_CL        = sSlCl;

			var nRow = ds_input.AddRow();
			ds_input.SetColumn(nRow, "PAY_DTM" ,sProcDt + sProcTm );
			ds_input.SetColumn(nRow,"SVC_MGMT_NUM",sSvcMgmtNum);
			ds_input.SetColumn(nRow,"PAY_PLC_NM",sPayPlcNm);
			ds_input.SetColumn(nRow,"PAY_PLC_UKEY_CD",sPayplcUkeyCd);
			ds_input.SetColumn(nRow,"PAY_PLC_SUB_CD",sPayPlcSubCd);
			ds_input.SetColumn(nRow,"PAY_PLC_CHNNEL_CD",sPayPlcChannelCd);
			ds_input.SetColumn(nRow,"PAY_PLC",sPayPlc);
			ds_input.SetColumn(nRow,"PAY_CL",sPayCl);
			
			ds_input.SetColumn(nRow,"PAY_CHGRG_ID",sProcChgrgId);
			ds_input.SetColumn(nRow,"CUST_NM"     ,sCustNm);
			ds_input.SetColumn(nRow,"SVC_NUM"     ,sSvcNum);
			ds_input.SetColumn(nRow,"PAY_OBJ_AMT" ,sPayObjAmt);
			
			ds_input.SetColumn(nRow,"PAY_REQ_PLC_NM"        ,sPayReqPlcNm);
			ds_input.SetColumn(nRow,"PAY_REQ_PLC_UKEY_CD"   ,sPayReqplcUkeyCd);
			ds_input.SetColumn(nRow,"PAY_REQ_PLC_SUB_CD"    ,sPayReqPlcSubCd);
			ds_input.SetColumn(nRow,"PAY_REQ_PLC_CHANNEL_CD" ,sPayReqPlcChannelCd);			                         
			ds_input.SetColumn(nRow,"PAY_REQ_PLC",sPayReqPlc);			
			
			div_search.edt_custNm.Text = sf_getMasking(sCustNm, "CustNm");
			div_search.edt_svcNum.Text = sf_getMasking(sSvcNum, "SvcNum");

			ds_input.SetColumn(nRow,"SETTL_WAY"   ,sSettlWay  );
/*			
			ds_input.SetColumn(nRow,"SETTL_WAY_NM",sSettlWayNm);
			ds_input.SetColumn(nRow,"REV_ITM_CD"  ,sRevItmCd  );
			ds_input.SetColumn(nRow,"REV_ITM_NM"  ,sRevItmNm  );
*/
			div_input.edt_settlWwayNm.Text = sSettlWayNm;
			div_input.edt_revItmCd.Text    = sRevItmCd;
			div_input.edt_revItmNm.Text    = sRevItmNm;
			
                                   
			// 수납일자 설정
			div_input.cal_payDtm.Value = sProcDt;
			div_input.msk_payDtmHHMMSS.Value = sProcTm;

			// 수납정보 
			div_input.msk_cashPayAmt.Value = 0;
			div_input.msk_merBondPayAmt.Value = 0;
			div_input.msk_prxpayAmt.Value = 0;
			
			if(sSettlWay == "01")
			{	// 현금이면
				div_input.msk_cashPayAmt.Value = sPayObjAmt;
			}
			else if(sSettlWay == "07")
			{	// 상품권이면
				div_input.msk_merBondPayAmt.Value = sPayObjAmt;
			}
			
			f_setPayComplex(sSettlWay);

			http.Sync = true;
			if(sifRecType == "63")
			{
				div_search.edt_svcNum.Text = sSvcNum;
			}
			else
			{
				div_search.edt_svcMgmtNum.Text = sSvcMgmtNum;
			}	
			f_search();
			
			//정산처 구하기
			f_getStl_Plc();
			f_getPayChgrgId();
			div_input.cmb_payChgrgId.Value = sProcChgrgId;
//trace("sProcChgrgId:" + sProcChgrgId);			
			// 수납담당자
			http.Sync = false;
			
			FV_INTERFACE_ADD_ROW = ds_list.AddRow();
//trace("=>  리스트에 로우 추가 : " + FV_INTERFACE_ADD_ROW);			
			//ds_input.ApplyChange();
		}                                   
		break;     

	default:                 
		break;
	}
}


/*******************************************************************************
 공통 스크립트 영역 끝
*******************************************************************************/

//==============================================================================
// 기타 업무 메소드들
//==============================================================================

//#############################################################################
// 서비스
//#############################################################################

/*******************************************************************************
 * @description    : 검색
*******************************************************************************/
function f_search()
{
	ds_condition.Clear();

	// 넘길 파라메터 설정
//	if(uf_isNull(FV_INTERFACE) == true ||  FV_INTERFACE == false)
//	{
		if(div_search.edt_svcMgmtNum.Text != "") {
			cf_setParam(ds_condition, "svc_mgmt_num", div_search.edt_svcMgmtNum.Text); 
		} else {
			cf_setParam(ds_condition, "svc_mgmt_num", div_search.edt_svcMgmtNum.Text); 
			cf_setParam(ds_condition, "svc_num", div_search.edt_svcNum.Text); 		
		}
//	}
//	else
//	{
//		cf_setParam(ds_condition, "svc_mgmt_num", div_search.edt_svcMgmtNum.Text); 

//	}	
	
	// 트랜잭션 설정
	var sSvcID = "svcList";
	var sInDs  = "nc_input_fieldDs=ds_condition";
	var sOutDs = "ds_list=List";
	var sArg   = "sktst.sal.oas.OAR#getPayList";
	            
	
	// 공통 트랜잭션 호출
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);	
}

/*******************************************************************************
 * @description    :  정산처 취득
*******************************************************************************/
function f_getStl_Plc()
{
	var sPlc = div_input.edt_payReqPlc.Text;	
	var sSaleDtm = div_input.cal_payDtm.Value + div_input.msk_payDtmHHMMSS.Value;

		
	if( uf_isNull(sPlc) == true) return;

	sf_getStlPlc( "ds_condition", "ds_stlPlc", sPlc, sSaleDtm );
}


/*******************************************************************************
 * @description    : 인터페이스 데이터 취득
*******************************************************************************/
function f_setInterfaceTrans()
{
	ds_condition.Clear();

	// 넘길 파라메터 설정
	cf_setParam(ds_condition, "op_dt", FV_IF_OP_DT); 
	cf_setParam(ds_condition, "op_tm", FV_IF_OP_TM); 
	cf_setParam(ds_condition, "seq"  , FV_IF_SEQ); 
	
	
	// 트랜잭션 설정
	var sSvcID = "svcInterface";
	var sInDs  = "nc_input_fieldDs=ds_condition";
	var sOutDs = "ds_sktChargeIf=List";
	var sArg   = "sktst.sal.oas.OAR#getPayByIfList";
	            
	
	// 공통 트랜잭션 호출
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);	
}




/*******************************************************************************
 * @description    : 화면 로딩시
*******************************************************************************/
function f_init()
{
	http.Sync = true;
	cf_setCommonCodeDsEnv();
	cf_setCommonCode("ds_payCl", "ZSAL_C_00080");
	cf_checkCommonCode(); 		
	http.Sync = false;
	
	if( uf_IsNull(FV_INTERFACE) == true || FV_INTERFACE == false) 
	{	// UKEY INTERFACE 가 아닐 경우
		if(FV_SVC_MGMT_NUM != null && FV_SVC_MGMT_NUM != "" )
		{
			div_search.edt_svcMgmtNum.Text = FV_SVC_MGMT_NUM;
			f_search();
		}
		else
		{
			FV_JOB = "NEW";
			f_displayControl(FV_JOB);
			
			f_setAuth();
			f_getStl_Plc();
			cf_setOrgDs(ds_input);	// 창 닫기 이벤트시 변경여부 채크	
		}
	}
	else
	{	// UKEY INTERFACE 일 경우
//trace("INTERFACE MODE");
		FV_JOB = "NEW";
		f_displayControl("MOD");
		
		f_setInterfaceTrans();
	}
	
}


/*******************************************************************************
 * @description    : 글로벌 섹션 정보
*******************************************************************************/
function f_getSession()
{
	FV_USER_ID        = gds_session.GetColumn(0, "loginid");	// 사용자ID
	FV_USER_NM        = gds_session.GetColumn(0, "usernm");		// 사용자명

	FV_ORG_ID         = gds_session.GetColumn(0, "orgid");				// 소속 
	FV_ORG_NM         = gds_session.GetColumn(0, "orgnm");				// 소속명
	FV_ORG_CL         = gds_session.GetColumn(0, "orgcl");				// 소속구분
	FV_AGENCY_ID      = gds_session.GetColumn(0, "posAgencyId");        // 소속 대리점ID
	FV_AGENCY_NM      = gds_session.GetColumn(0, "posAgencyNm");        // 소속 대리점명
	FV_AGENCY_UKEY_ID = gds_session.GetColumn(0, "posAgencyUkeyId");    // 소속 대리점UKEY ID	
	
	FV_ORG_AREA_ID            = gds_session.GetColumn(0, "orgareaid");			// 근무지 ID
	FV_ORG_AREA_NM            = gds_session.GetColumn(0, "orgareanm");			// 근무지명
	FV_ORG_AREA_POS_AGENCY_CD = gds_session.GetColumn(0, "orgareaposagencycd");	// 근무지 
	FV_ORG_AREA_UKEY_ID       = gds_session.GetColumn(0, "orgareaukeyid");      // 근무지ukeyid
	FV_ORG_AREA_SUB_CD        = gds_session.GetColumn(0, "orgareaukeysubcd");   // 근무지subcd
	FV_ORG_AREA_CHANNEL_CD    = gds_session.GetColumn(0, "orgareaukeychannelcd");  // 근무지 channelcd	
	FV_USER_GRP               = gds_session.GetColumn(0, "usergrp");			// 유저그룹
	FV_ORG_AREA_CL1           = gds_session.GetColumn(0, "orgareacl1");			// 근무지 구분
	FV_DUTY                   = gds_session.GetColumn(0, "duty");	   		    // 직책				
	
}


/*******************************************************************************
 * @description    : 권한 설정
*******************************************************************************/
function f_setAuth()
{
	f_getSession();

}

/*******************************************************************************
 * @description    :  수납처 찾기 - 이벤트
*******************************************************************************/
function btn_searchPay_OnClick(obj)
{
	cf_commPopDealCo("div_input.edt_payPlc", "div_input.edt_payPlcNm", "7;", 13);
	f_getStl_Plc();	// 정산처
}



/*******************************************************************************
 * @description    : 검색
*******************************************************************************/
function btn_search_OnClick(obj)
{
	FV_INTERFACE = false;
	if(f_validSearch() == false) return;
	f_search();
}


/*******************************************************************************
 * @description    : 검색 유효성 검사
*******************************************************************************/
function f_validSearch()
{
	var FV_SVC_MGMT_NUM = div_search.edt_svcMgmtNum.Text;
	var sSvcNum         = div_search.edt_svcNum.Text;
	
	if(uf_IsNull(FV_SVC_MGMT_NUM) == true && uf_IsNull(sSvcNum) == true)
	{
		alert("서비스번호 또는 개통번호를 입력하세요.");
		return false;
	}
	
	if(FV_SVC_MGMT_NUM == "")
	{/*
		alert(cf_getMessage(MSG_00083, "서비스번호"));
		div_search.edt_svcMgmtNum.SetFocus();
		return false;
	 */	
	}
	else
	{	// 서비스번호를 입력했을 경우
		if(Length(FV_SVC_MGMT_NUM) != 10)
		{
			alert("서비스번호 10자리를 입력하세요.");
			div_search.edt_svcMgmtNum.SetFocus();
			return false;
		}
	}
	
	if(uf_IsNull(sSvcNum) == false)
	{
		if(Length(sSvcNum) < 10)
		{	// MSG_00030 : 입력 정보를 확인하십시오.
			alert(cf_getMessage(MSG_00030, "개통번호"));
			div_search.edt_svcNum.SetFocus();
			return false;
		}	
	}
	return true;
}



/*******************************************************************************
 * @description    :  판매 추가시 유효성 검사
*******************************************************************************/
function f_valid()
{	
	// 마감월 체크
	cf_CheckCloseDay('02',div_input.cal_payDtm.Value, "수납일자"); // 03 정산
	if(FV_BOOLEAN_CLOSE) return false; // 입력한 일자가 마감 되었을 경우 '1'(true) 리턴.

	if(uf_isNull(div_input.edt_payPlc.Text) == true)
	{
		alert(cf_getMessage(MSG_00083, "수납처"));
		//div_.SetFocus();	
		return false;
	}
	/*
	if(Length(div_input.edt_svcMgmtNum.Text) != 10)
	{
		alert("서비스번호 10자리를 입력하세요.");
		div_input.edt_svcMgmtNum.SetFocus();
		return false;
	}*/
	var sPayDtm = div_input.cal_payDtm.Value + div_input.msk_payDtmHHMMSS.Value;

	if(uf_CheckDate(substr(sPayDtm, 0,12), "YYYYMMDDHH24MI") == false)
	{
		alert("수납일자를 잘못 입력하였습니다.");
		div_input.cal_payDtm.SetFocus();
		return false;		
	}			
	
	var sControls  = "div_input.cal_payDtm,div_input.edt_svcMgmtNum,div_input.rdo_payCl,div_input.cmb_payChgrgId"
	               + ",div_input.msk_payObjAmt,div_input.msk_cashPayAmt,div_input.msk_prxpayAmt";
	var sControlNm = "수납일자,서비스관리번호,수납구분,수납담당자"
	               + ",수납대상금액,현금수납금액,대납금액";

	var arrControl   = Split(sControls , ",");
	var arrControlNm = Split(sControlNm, ",");
	var nCntCntrl = arrControl.length();
	
	for(var i=0; i<nCntCntrl; i++)
	{
		var oCntrl = eval(arrControl[i]);
		var sType = oCntrl.getType().ToLower();
		if( sType == "edit")
		{
			if(uf_isNull(oCntrl.Text) == true)
			{	// MSG_00083 : (을)를 입력 하여 주시기 바랍니다.
				alert(cf_getMessage(MSG_00083, arrControlNm[i]));
				oCntrl.SetFocus();
				return false;
			}
		}
		else
		{
			if(uf_isNull(oCntrl.Value) == true)
			{	// MSG_00083 : (을)를 입력 하여 주시기 바랍니다.
				alert(cf_getMessage(MSG_00083, arrControlNm[i]));
				oCntrl.SetFocus();
				return false;
			}			
		}
	}
	
	if(uf_isNull(div_input.edt_payReqPlc.Text) == true)
	{	// MSG_00083 : (을)를 입력 하여 주시기 바랍니다.
		alert(cf_getMessage(MSG_00083, "의뢰처"));
		ds_input.edt_payReqPlc.SetFocus();
		return false;
	}
		
	if(ds_input.GetColumn(0, "PAY_REQ_PLC_SUB_CD") == "0000" && uf_isNull(ds_input.GetColumn(0, "PAY_REQ_PLC_CHANNEL_CD")) == true)
	{	
		alert("개통처는 수납의뢰처가 될 수 없습니다.");
		return false;
	}
	
	if(f_validCalculate() == false) return false;
	
	return true;
}



/*******************************************************************************
 * @description    :  수납대상금액 유효성
*******************************************************************************/
function f_validCalculate()
{
	var sPayObjAmt        = div_input.msk_payObjAmt.value;
	var sCashPayAmt       = div_input.msk_cashPayAmt.Value;
	var sPrxPayAmt        = div_input.msk_prxpayAmt.Value;
	var sMerBondPayAmt    = div_input.msk_merBondPayAmt.Value;
	
	var sPayCl = ds_input.GetColumn(0, "pay_cl");	
	
	var nPayObjAmt        = Iif(sPayObjAmt == "", 0, ParseInt(sPayObjAmt));
	var nCashPayAmt       = Iif(sCashPayAmt == "", 0, ParseInt(sCashPayAmt));
	var nPrxPayAmt        = Iif(sPrxPayAmt == "", 0, ParseInt(sPrxPayAmt));
	var nMerBondPayAmt    = Iif(sMerBondPayAmt == "", 0, ParseInt(sMerBondPayAmt));
	
	if( nPayObjAmt == 0)
	{
		alert("수납대상금액을 입력하세요.");
		return false;
	}
	
	var nInPayAmt = nCashPayAmt + nPrxPayAmt + nMerBondPayAmt;
	if(FV_PAY_COMPLEX  == false)
	{
		// 수납구분 : 수납 
		if(nPayObjAmt != nInPayAmt)
		{
			alert("수납대상금액과 수납금액이 일치하지 않습니다.");
			return false;
		}	
	}
	else
	{
		if(nPayObjAmt < nInPayAmt)
		{
			alert("수납대상금액을 초과한 금액을 입력하실수 없습니다.");
			return false;		
		}
		if(nPayObjAmt != nInPayAmt)
		{
			return Confirm( "수납대상금액과 상이한 금액을 입력하였습니다. \n 정확히 금액을 입력하였습니까?");
		}	

	}
	return true;
}



/*******************************************************************************
 * @description    :  수납구분에 의한 활성화 / 비활성화
*******************************************************************************/
function f_displayByPayCl()
{
	var sPayCl = div_input.rdo_payCl.Value;

	if( uf_isNull(sPayCl) == true) return;

	sf_enable("div_input.msk_payObjAmt,div_input.msk_cashPayAmt,div_input.msk_prxpayAmt"
	         +",div_input.msk_merBondPayAmt", true);

}

/*******************************************************************************
 * @description    :  신규입력 상태
*******************************************************************************/
function f_displayControl(sGubun)
{

	if(sGubun == "NEW")
	{
		ds_input.DeleteAll();
		
		var nRow = ds_input.AddRow();
		div_input.rdo_payCl.Value = "1";
		
		sf_enable( "div_input.cal_payDtm,div_input.msk_payDtmHHMMSS"
		         + ",div_input.btn_payPlc,div_input.edt_payPlcNm"
		         + ",div_input.edt_svcMgmtNum,div_input.rdo_payCl,div_input.txt_rmks"
		         + ",div_input.msk_payObjAmt,div_input.msk_cashPayAmt,div_input.msk_prxpayAmt"
				 + ",div_input.msk_merBondPayAmt"
				 + ",div_input.edt_settlWwayNm,div_input.edt_revItmNm,div_input.edt_revItmCd" , true);
		sf_setDate("div_input.cal_payDtm","div_input.msk_payDtmHHMMSS");
		
		f_setDataSetSaleDtm();
		f_clearPay();
		
		btn_save.Enable = true;
	}
	else if(sGubun == "MOD")
	{
		sf_enable( "div_input.cal_payDtm,div_input.msk_payDtmHHMMSS"
				 + ",div_input.btn_payPlc,div_input.edt_payPlcNm,div_input.cmb_payChgrgId"
				 + ",div_input.edt_svcMgmtNum,div_input.rdo_payCl,div_input.msk_payObjAmt"
				 + ",div_input.edt_settlWwayNm,div_input.edt_revItmNm,div_input.edt_revItmCd" , false);
				 
		sf_enable( "div_input.txt_rmks", true);		
	}
}


/*******************************************************************************
 * @description    :  수납대행금액 초기화
*******************************************************************************/
function f_clearPay()
{
	div_input.msk_payObjAmt.Value  = 0;
	div_input.msk_cashPayAmt.Value = 0;
	div_input.msk_prxpayAmt.Value  = 0;
	div_input.msk_merBondPayAmt.Value   = 0;
}


/*******************************************************************************
 * @description    :  수납담당자 초기화
*******************************************************************************/
function f_initPayChgrgId()
{
	ds_payChgrgId.DeleteAll();
	cf_setInitDataForCmb(div_input.cmb_payChgrgId, "선택");
}


/*******************************************************************************
 * @description    :  판매일자 데이터셋 셋팅
*******************************************************************************/
function f_setDataSetSaleDtm()
{
	var sSaleDtm       = div_input.cal_payDtm.Value;
	var sSaleDtmHHMMSS = div_input.msk_payDtmHHMMSS.Value;
	
	var sDate    = sSaleDtm + sSaleDtmHHMMSS;
		
	ds_input.SetColumn(0, "pay_dtm", sDate);
}

/*******************************************************************************
 * @description    : 수납담당자
*******************************************************************************/
function f_getPayChgrgId()
{
	//var sSalePlc = div_input.edt_payPlc.Text;
	//var sSaleDtm = div_input.cal_payDtm.Value;
	var sSalePlc = ds_input.GetColumn(0, "PAY_PLC");
	var sSaleDtm = ds_input.GetColumn(0, "PAY_DTM");

//trace("f_getPayChgrgId():" + sSalePlc + "/" + sSaleDtm);	
	if(uf_isNull(sSalePlc) == true) return;

	//sf_getChgrgIdList("ds_condition", "ds_payChgrgId", "", sSalePlc, sSaleDtm);
	sf_getChgrgIdList("ds_condition", "ds_payChgrgId");
}


/*******************************************************************************
 * @description    : 정산처 초기화
*******************************************************************************/
function f_initStlPlc()
{
	div_input.edt_stlPlc.Text="";
	div_input.edt_stlPlcNm.Text="";
	div_input.edt_stlPlcUkeyCd.Text="";
	div_input.edt_stlPlcSubCd.Text="";
	div_input.edt_stlPlcChannelCd.Text="";
}


//#############################################################################
// 이벤트
//#############################################################################

/*******************************************************************************
 * @description    :  저장 버튼 이벤트
*******************************************************************************/
function btn_save_OnClick(obj)
{
//trace("btn_save_OnClick");
	//선택된 '정산월' 데이터가 있으면 정산된 데이터로 수정이 불가능합니다.
	//정산 여부 체크 시작
	var nRow = ds_list.currow;
	var sAccMth = ds_list.GetColumn(nRow, "ACC_MTH");
	
	if(length(sAccMth) == 6) {
		alert(SubStr(sAccMth,0,4)+"년"+SubStr(sAccMth,4,2)+"월에"+" 입금 정산 완료된 후 ERP 전송된 자료입니다.\n\n 처리 할 수 없습니다!!");
		return;
	}
	//정산 여부 체크 완료
	
	if(FV_INTERFACE == false)
	{
		if(ds_input.GetUpdate() == false)
		{
			alert(cf_getMessage(MSG_00071,""));
			return;
		}
	}
	if(f_valid() == false) return;
	
	if(Confirm( "저장 하시겠습니까?" ) == false) return;
	
	ds_input.SetColumn(0, "SL_CL", FV_SL_CL);
	
	ds_input.SetColumn(0, "FLAG", FV_JOB);
	
	if(FV_INTERFACE == true)
	{
//trace("INTERFACE MODE");
		cf_setParam(ds_input, "IF_OP_DT"   , FV_IF_OP_DT); 
		cf_setParam(ds_input, "IF_OP_TM"   , FV_IF_OP_TM); 
		cf_setParam(ds_input, "IF_SEQ"     , FV_IF_SEQ); 
		cf_setParam(ds_input, "IF_UPD_CNT" , FV_IF_UPD_CNT); 
	}
	
	var sPayCl = ds_input.GetColumn(0, "PAY_CL");

	if(sPayCl == "5")
	{	// 수납환불일 경우 마이너스 처리
		var sPayObjAmt     = ds_input.GetColumn(0, "PAY_OBJ_AMT");
		var sCashPayAmt    = ds_input.GetColumn(0, "CASH_PAY_AMT");
		var sPrxPayAmt     = ds_input.GetColumn(0, "PRXPAY_AMT");
		var smerBondPayAmt = ds_input.GetColumn(0, "MER_BOND_PAY_AMT");
		
		var nPayObjAmt     = toNumber(sPayObjAmt) * (-1);
		var nCashPayAmt    = toNumber(sCashPayAmt) * (-1);
		var nPrxPayAmt     = toNumber(sPrxPayAmt) * (-1);
		var nmerBondPayAmt = toNumber(smerBondPayAmt) * (-1);
                                   
		ds_input.SetColumn(0, "PAY_OBJ_AMT"     ,nPayObjAmt);
		ds_input.SetColumn(0, "CASH_PAY_AMT"    ,nCashPayAmt);
		ds_input.SetColumn(0, "PRXPAY_AMT"      ,nPrxPayAmt);
		ds_input.SetColumn(0, "MER_BOND_PAY_AMT",nmerBondPayAmt);
	}
	
	f_setDataSetSaleDtm();

	// 트랜잭션 설정
	var sSvcID = "svcSave";
	var sInDs  = "nc_input_fieldDs=ds_input";
	var sOutDs = "";
	var sArg   = "sktst.sal.oas.OAR#savePay";	


//alert(ds_input.SaveXML()); 
//if(Confirm( "저장 하시겠습니까?" ) == false) return;
	// 공통 트랜잭션 호출
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);
}

/*******************************************************************************
 * @description    :  삭제 유효성 검사
*******************************************************************************/
function f_validDelete()
{	
	//선택된 '정산월' 데이터가 있으면 정산된 데이터로 삭제가 불가능합니다.
	//정산 여부 체크 시작
	var nRow = ds_list.currow;
	var sAccMth = ds_list.GetColumn(nRow, "ACC_MTH");
	
	if(length(sAccMth) == 6) {
		alert(SubStr(sAccMth,0,4)+"년"+SubStr(sAccMth,4,2)+"월에"+" 입금 정산 완료된 후 ERP 전송된 자료입니다.\n\n 처리 할 수 없습니다!!");
		return false;
	}
	//정산 여부 체크 완료
	
	cf_CheckCloseDay('02',div_input.cal_payDtm.Value, "수납일자"); // 03 정산
	if(FV_BOOLEAN_CLOSE) return false; // 입력한 일자가 마감 되었을 경우 '1'(true) 리턴.
	
	//var nRow = ds_list.currow;
	
	var sCashDpspFixYn    = ds_list.GetColumn(nRow, "CASH_DPST_FIX_YN");
	var sMerBondDpstFixYn = ds_list.GetColumn(nRow, "MER_BOND_DPST_FIX_YN");
	
	if(sCashDpspFixYn == "Y" || sMerBondDpstFixYn == "Y")
	{
		alert('입금/상품권 정산이 완료된 항목입니다.\r\n입금정산 취소후 다시 처리하세요.');
		return false;
	}	
/*	// 2009.09.07 : 백승현 메니저 요청으로 몽땅 삭제 가능.. 
	var sPayCl    = ds_list.GetColumn(nRow, "PAY_CL");
	var sRevItmCd = ds_list.GetColumn(nRow, "REV_ITM_CD");
	
	if(!(sPayCl == "5" && ( sRevItmCd == "CRG3P00" || sRevItmCd == "CRGAP00")))
	{
		alert("삭제 가능한 항목이 아닙니다.");
		return false;
	}
*/
	return true;
}

/*******************************************************************************
 * @description    :  삭제 버튼 이벤트 
*******************************************************************************/
function btn_del_OnClick(obj)
{
	if(ds_list.GetRowCount() == 0) 
	{	// 단건 IUD이므로 항상 normal상태
		alert(cf_getMessage(MSG_00071,""));
		return;
	}

	if(f_validDelete() == false) return;	
	
	if(Confirm( "삭제 하시겠습니까?" ) == false) return;
	
	ds_input.SetColumn(0, "FLAG", "DEL");
	f_setDataSetSaleDtm();
	
	// 트랜잭션 설정
	var sSvcID = "svcDel";
	var sInDs  = "nc_input_fieldDs=ds_input";
	var sOutDs = "";
	var sArg   = "sktst.sal.oas.OAR#savePay";

	// 공통 트랜잭션 호출
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);
}



/*******************************************************************************
 * @description    :  그리드 선택 이벤트 
*******************************************************************************/
function grd_list_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
{
	FV_JOB = "MOD";
	if( uf_isNull(FV_INTERFACE_ADD_ROW) == false)
	{
		if(ds_input.GetUpdate() == true)
		{
			if(Confirm("변경된 내용이 존재합니다.\r\n계속 진행하시겠습니까?") == false) return;
		}		
		FV_INTERFACE = false;
		FV_IF_OP_DT  = "";
		FV_IF_OP_TM  = "";
		FV_IF_SEQ    = "";		
		ds_list.DeleteRow(FV_INTERFACE_ADD_ROW);
	}
	
	FV_SL_CL         = ds_list.GetColumn(nRow, "SL_CL");	

	var sPayDate     = ds_list.GetColumn(nRow, "PAY_DTM");	
	var sDtClsYn     = ds_list.GetColumn(nRow, "DT_CLS_YN");	// 일마감여부
	var sPayCl       = ds_list.GetColumn(nRow, "PAY_CL");
	var sPayChgrgid  = ds_list.GetColumn(nRow, "PAY_CHGRG_ID");
	var sSettlWay    = ds_list.GetColumn(nRow, "SETTL_WAY");

	var sCashDpspFixYn    = ds_list.GetColumn(nRow, "CASH_DPST_FIX_YN");
	var sMerBondDpstFixYn = ds_list.GetColumn(nRow, "MER_BOND_DPST_FIX_YN");
	
	if(sCashDpspFixYn == "Y")
	{
		div_input.msk_cashPayAmt.Enable = false;
	}
	else
	{
		div_input.msk_cashPayAmt.Enable = true;
	}
	if(sMerBondDpstFixYn == "Y")
	{
		div_input.msk_merBondPayAmt.Enable = false;
	}
	else
	{
		div_input.msk_merBondPayAmt.Enable = true;	
	}	
	
	if(sMerBondDpstFixYn == "Y" || sCashDpspFixYn == "Y")
	{
		div_input.edt_payReqPlcNm.Enable = false;
		div_input.btn_payReqPlc.Enable = false;
	
	}
	else
	{
		div_input.edt_payReqPlcNm.Enable = true;
		div_input.btn_payReqPlc.Enable = true;	
	}
	
	f_setPayComplex(sSettlWay);

	var sCustNm  = ds_list.GetColumn(nRow, "CUST_NM");
	var sSvcNum  = ds_list.GetColumn(nRow, "SVC_NUM");
	
	div_search.edt_custNm.Text = sf_getMasking(sCustNm, "CustNm");
	div_search.edt_svcNum.Text = sf_getMasking(sSvcNum, "SvcNum");
	
	ds_input.DeleteAll();
	var nIdxAddRow = ds_input.AddRow();
	ds_input.CopyRow(nIdxAddRow, "ds_list", nRow);

	http.Sync = true;
	f_getPayChgrgId();	
	div_input.cmb_payChgrgId.Value = sPayChgrgid;
	http.Sync = false;
	
	div_input.cal_payDtm.Value = substr(sPayDate, 0, 8);
	div_input.msk_payDtmHHMMSS.Value = substr(sPayDate, 8);
	//sf_setDateByDataSet("div_input.cal_payDtm" ,"div_input.msk_payDtmHHMMSS","div_input.edt_payDtmMM" ,sPayDate);
	
	if(sPayCl == "5")
	{	// 수납환불일 경우 마이너스 처리
		var sPayObjAmt     = ds_list.GetColumn(nRow, "PAY_OBJ_AMT");
		var sCashPayAmt    = ds_list.GetColumn(nRow, "CASH_PAY_AMT");
		var sPrxPayAmt     = ds_list.GetColumn(nRow, "PRXPAY_AMT");
		var smerBondPayAmt = ds_list.GetColumn(nRow, "MER_BOND_PAY_AMT");
		
		var nPayObjAmt     = toNumber(sPayObjAmt) * (-1);
		var nCashPayAmt    = toNumber(sCashPayAmt) * (-1);
		var nPrxPayAmt     = toNumber(sPrxPayAmt) * (-1);
		var nmerBondPayAmt = toNumber(smerBondPayAmt) * (-1);
		
		div_input.msk_payObjAmt.Value     = nPayObjAmt;
		div_input.msk_cashPayAmt.Value    = nCashPayAmt;
		div_input.msk_prxpayAmt.Value     = nPrxPayAmt;
		div_input.msk_merBondPayAmt.Value = nmerBondPayAmt;
	}	
		
	
	ds_input.ApplyChange();	// AddRow로 인해 insert 상태를 normal 상태로	
	cf_setOrgDs(ds_input);	// 창 닫기 이벤트시 변경여부 채크	
	
	
	if(sDtClsYn == "Y")
	{
		uf_ObjComponentEnable(div_input,false);		
		btn_save.Enable = false;
		alert("일 마감 처리된 건입니다.");
		//btn_del.Enable = false;
	}
	else
	{
		cf_setOrgDs(ds_input);	// 데이터 변경여부 설정
		
		f_displayControl("MOD");
		btn_save.Enable = true;
		//btn_del.Enable = true;
	}
	
}


/*******************************************************************************
 * @description    :  신규등록 버튼 이벤트
*******************************************************************************/
function btn_new_OnClick(obj)
{
	f_displayControl("NEW");
}


/*******************************************************************************
 * @description    : 엑셀 출력 - 이벤트
*******************************************************************************/
function btn_excel_OnClick(obj)
{
	// cf_excel(oGrd, nMode)
	// oGrd - 엑셀화할 그리드 객체 , nMode - 엑셀 저장 모드 1 or null : 엑셀로드 , 2 : 파일 저장
	cf_exportExcel(grd_list);
}

/*******************************************************************************
 * @description    :  상품구분 변경 이벤트
*******************************************************************************/
function div_input_rdo_payCl_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
{
	f_clearPay();
	f_displayByPayCl();
}

/*******************************************************************************
 * @description    :  그리드 로우 변경 이벤트 
*******************************************************************************/
function grd_list_OnCellPosChanged(obj,nRow,nCell,nOldRow,nOldCell,nPivotIndex,nOldPivotIndex)
{
	grd_list_OnCellClick(grd_list,nRow);
}


/*******************************************************************************
 * @description    :  수납일자 변경 이벤트
*******************************************************************************/
function div_input_cal_payDtm_OnChanged(obj,strOldText,strNewText)
{
	f_setDataSetSaleDtm();
}

/*******************************************************************************
 * @description    :  수납일자 변경 이벤트
*******************************************************************************/
function div_input_edt_payDtmHH_OnChanged(obj,strText)
{
	f_setDataSetSaleDtm();
}


/*******************************************************************************
 * @description    :  수납일자 변경 이벤트
*******************************************************************************/
function div_input_edt_payDtmMM_OnChanged(obj,strText)
{
	f_setDataSetSaleDtm();
}

/*******************************************************************************
 * @description    :  수납처 찾기 - 이벤트
*******************************************************************************/
function div_input_btn_payPlc_OnClick(obj)
{
	sf_clearControls("div_input.edt_payPlc,div_input.edt_payPlcUkeyCd,div_input.edt_payPlcSubCd,div_input.edt_payPlcChannelCd");

	f_initPayChgrgId();	// 수납담당자 초기화
	
	var sArg  = "deal_co_cl1="+quote(sf_getDealCoCl1());
	    sArg += " pos_agency="+quote(FV_AGENCY_ID); // 옵션
		sArg += " deal_status="+quote("1"); 	//옵션 (거래처 상태) - 1: 수납정지 N  , 2: 출고정지 N , 3: 판매정지 N 	    
		sArg += " eff_dtm="+quote(div_input.cal_payDtm.Value); // 필수		
	cf_callDealPop(sArg, div_input, "edt_payPlcNm,edt_payPlc,edt_payPlcUkeyCd,edt_payPlcSubCd,edt_payPlcChannelCd");	
	if(uf_isNull(FV_STR_POP_RESULT) == true) return;
	
	f_getPayChgrgId();	
	f_getStl_Plc();	// 정산처
}

/*******************************************************************************
 * @description    :  수납처 찾기 - 이벤트
*******************************************************************************/
function div_input_edt_payPlcNm_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
{

	if(nChar == 13)
	{
		var sArg  = "deal_co_cl1="+quote(sf_getDealCoCl1());
		    sArg += " pos_agency="+quote(FV_AGENCY_ID); // 옵션
		    sArg += " eff_dtm="+quote(div_input.cal_payDtm.Value); // 옵션
		cf_callDealPop(sArg, div_input, "edt_payPlcNm,edt_payPlc,edt_payPlcUkeyCd,edt_payPlcSubCd,edt_payPlcChannelCd");			
		if(uf_isNull(FV_STR_POP_RESULT) == true) return;
		
		f_getPayChgrgId();	
		f_getStl_Plc();	// 정산처	
	}

}



/*******************************************************************************
 * @description    :  닫기- 이벤트
*******************************************************************************/
function btn_close_OnClick(obj)
{
	Close();
}


/*******************************************************************************
 * @description    :  의뢰처 찾기 - 이벤트
*******************************************************************************/
function div_input_edt_payReqPlcNm_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
{
	sf_clearControls("div_input.edt_payReqPlc,div_input.edt_payReqPlcUkeyCd,div_input.edt_payReqPlcSubCd,div_input.edt_payReqPlcChannelCd");
	
	if(nChar == 13)
	{
		var sArg  = "deal_co_cl1="+quote(sf_getDealCoCl1());
		    sArg += " pos_agency="+quote(FV_AGENCY_ID); // 옵션
		    sArg += " eff_dtm="+quote(div_input.cal_payDtm.Value); // 옵션
		    sArg += " deal_status="+quote("1"); // 옵션 판매정지
		cf_callDealPop(sArg, div_input, "edt_payReqPlcNm,edt_payReqPlc,edt_payReqPlcUkeyCd,edt_payReqPlcSubCd,edt_payReqPlcChannelCd");			

		if(uf_isNull(FV_STR_POP_RESULT) == true) return;	
		
		FV_SL_CL = sf_convertDealCoClToSlCl(sf_getDealCoClByDealPop(FV_STR_POP_RESULT));
		
		f_getStl_Plc();
	}
}

/*******************************************************************************
 * @description    :  의뢰처 찾기 - 이벤트
*******************************************************************************/
function div_input_edt_payReqPlcNm_OnCharChanged(obj,strPreText,strPostText)
{
	sf_clearControls("div_input.edt_payReqPlc,div_input.edt_payReqPlcUkeyCd,div_input.edt_payReqPlcSubCd,div_input.edt_payReqPlcChannelCd");
}

/*******************************************************************************
 * @description    :  의뢰처 찾기 - 이벤트
*******************************************************************************/
function div_input_btn_payReqPlc_OnClick(obj)
{
	var sArg  = "deal_co_cl1="+quote(sf_getDealCoCl1(true));
		sArg += " pos_agency="+quote(FV_AGENCY_ID); // 옵션
		sArg += " eff_dtm="+quote(div_input.cal_payDtm.Value); // 옵션
		sArg += " deal_status="+quote("1"); // 옵션 판매정지
		
	cf_callDealPop(sArg, div_input, "edt_payReqPlcNm,edt_payReqPlc,edt_payReqPlcUkeyCd,edt_payReqPlcSubCd,edt_payReqPlcChannelCd");			

	if(uf_isNull(FV_STR_POP_RESULT) == true) return;	
	
	FV_SL_CL = sf_convertDealCoClToSlCl(sf_getDealCoClByDealPop(FV_STR_POP_RESULT));
	
	f_getStl_Plc();
}


function f_setPayComplex(sSettlWay)
{
	if(sSettlWay == "01" || sSettlWay == "07")
	{
		FV_PAY_COMPLEX   = false;
	}
	else
	{
		FV_PAY_COMPLEX   = true;
	}
}

]]></Script>
</Window>