<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="600" Id="SALSCO00200" Left="8" OnLoadCompleted="SALSCO00200_OnLoadCompleted" PidAttrib="7" Title="판매변경&#32;이력조회" Top="8" Ver="1.0" Width="1024" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_condition">
				<Contents>
					<colinfo id="svc_mgmt_num" size="256" summ="default" type="STRING"/>
					<colinfo id="svc_num" size="256" summ="default" type="STRING"/>
					<colinfo id="mdl_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="ser_num" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_SaleChgHst">
				<Contents>
					<colinfo id="CHK" size="256" summ="default" type="STRING"/>
					<colinfo id="GNRL_SALE_NO" size="256" summ="default" type="STRING"/>
					<colinfo id="GNRL_SALE_CHG_SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_CHG_HST_CL" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_TYP" size="256" summ="default" type="STRING"/>
					<colinfo id="SL_NET_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="SL_NET_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_DTM" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_PLC_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_CHGRG_ID" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_USER_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="CUST_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="SVC_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="SVC_DTM" size="256" summ="default" type="STRING"/>
					<colinfo id="SVC_PLC_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="SVC_CHGRG_ID" size="256" summ="default" type="STRING"/>
					<colinfo id="SVC_USER_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_DTL_TYP" size="256" summ="default" type="STRING"/>
					<colinfo id="DS_NET_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="EQP_MDL_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="EQP_SER_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="USIM_MDL_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="USIM_SER_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="SETTL_COND" size="256" summ="default" type="STRING"/>
					<colinfo id="ALLOT_PRD_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="AGRMT_PRD_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="AGRMT_ASTAMT" size="256" summ="default" type="STRING"/>
					<colinfo id="RETENTION_AGRMT_ASTAMT" size="256" summ="default" type="STRING"/>
					<colinfo id="OCB_MCARD_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="OCB_MCARD_PRC" size="256" summ="default" type="STRING"/>
					<colinfo id="EQP_ALLOT_SALE_PRC" size="256" summ="default" type="STRING"/>
					<colinfo id="EQP_CASH_SALE_PRC" size="256" summ="default" type="STRING"/>
					<colinfo id="CASH_PAY_AMT" size="256" summ="default" type="STRING"/>
					<colinfo id="PHONE_SAFE_AMT" size="256" summ="default" type="STRING"/>
					<colinfo id="CRDTCRD_AMT" size="256" summ="default" type="STRING"/>
					<colinfo id="SKT_CASH_AMT" size="256" summ="default" type="STRING"/>
					<colinfo id="SKT_PRXPAY_AMT" size="256" summ="default" type="STRING"/>
					<colinfo id="SVC_MGMT_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="ASMPT_CLOSE_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="ASMPT_CLOSE_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="ins_dtm" size="256" summ="default" type="STRING"/>
					<colinfo id="ins_user" size="256" summ="default" type="STRING"/>
					<colinfo id="mod_dtm" size="256" summ="default" type="STRING"/>
					<colinfo id="mod_user" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_SaleHstInfo">
				<Contents>
					<colinfo id="DEL_SALE_NO" size="256" summ="default" type="STRING"/>
					<colinfo id="DEL_SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_SALE_NO" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="MAX_SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_MDL_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_SER_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_OLD_SALE_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_MDL_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_SER_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_OLD_SALE_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_MDL_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_SER_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_OLD_SALE_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_MDL_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_SER_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_OLD_SALE_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_HST" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_HST_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_HST_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_HST" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_HST_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_HST_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_HST" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_HST_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_HST_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_HST" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_HST_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_HST_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="EXCHG_DTM" size="256" summ="default" type="STRING"/>
					<colinfo id="EXCHG_CHGRG_ID" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_CNCL_CL" size="256" summ="default" type="STRING"/>
					<colinfo id="OLD_RTN_MDL" size="256" summ="default" type="STRING"/>
					<colinfo id="OLD_RTN_SER_NUM" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_GetSaleInfo">
				<Contents>
					<colinfo id="GBN" size="256" summ="default" type="STRING"/>
					<colinfo id="GNRL_SALE_NO" size="256" summ="default" type="STRING"/>
					<colinfo id="GNRL_SALE_CHG_SEQ" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_DeleteHst">
				<Contents>
					<colinfo id="DEL_TYP" size="256" summ="default" type="STRING"/>
					<colinfo id="GNRL_SALE_NO" size="256" summ="default" type="STRING"/>
					<colinfo id="GNRL_SALE_CHG_SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_SALE_NO" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_SALE_CHG_SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="SUPL_DELETE_YN" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_DIS_PROCDURE_CL" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_EQP_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="AF_USIM_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_DIS_PROCDURE_CL" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_EQP_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="BF_USIM_MDL_CD" size="256" summ="default" type="STRING"/>
					<colinfo id="OLD_RTN_MDL" size="256" summ="default" type="STRING"/>
					<colinfo id="OLD_RTN_SER_NUM" size="256" summ="default" type="STRING"/>
					<colinfo id="EXCHG_DTM" size="256" summ="default" type="STRING"/>
					<colinfo id="EXCHG_CHGRG_ID" size="256" summ="default" type="STRING"/>
					<colinfo id="DELETE_RSN" size="256" summ="default" type="STRING"/>
					<colinfo id="OP_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="OP_TM" size="256" summ="default" type="STRING"/>
					<colinfo id="SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="USER_ID" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_Interface">
				<Contents>
					<colinfo id="OP_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="OP_TM" size="256" summ="default" type="STRING"/>
					<colinfo id="SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="SALE_CHG_DT" size="256" summ="default" type="STRING"/>
					<colinfo id="GBN" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_input">
				<Contents></Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_DisInfo">
				<Contents>
					<colinfo id="MFACT_ID_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="PROD_CL" size="256" summ="default" type="STRING"/>
					<colinfo id="PROD_NM" size="256" summ="default" type="STRING"/>
					<colinfo id="PROD_CD" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_result"></Dataset>
		</Datasets>
		<Grid AutoEnter="TRUE" BindDataset="ds_SaleChgHst" BkColor2="user32" BoldHead="true" Border="Flat" Bottom="564" ColSizing="TRUE" Editable="TRUE" Enable="true" EndLineColor="default" FillArea="TRUE" HeadBorder="Flat" HeadHeight="21" Height="479" Id="grd_generalsalelist" InputPanel="FALSE" Left="10" LineColor="user33" OnCellClick="grd_generalsalelist_OnCellClick" OnCellDBLClick="grd_GeneralSaleList_OnCellDblClick" OnHeadClick="cf_markGridSort" Right="1014" RowHeight="21" Style="sty_Grid" TabOrder="1" TabStop="true" Top="85" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="user33" WheelScrollRow="1" Width="1004">
			<contents>
				<format id="Default">
					<columns>
						<col fix="left" width="50"/>
						<col fix="left" width="75"/>
						<col fix="left" width="51"/>
						<col fix="left" width="104"/>
						<col fix="left" width="89"/>
						<col width="82"/>
						<col width="100"/>
						<col width="89"/>
						<col width="89"/>
						<col width="114"/>
						<col width="89"/>
						<col width="100"/>
						<col width="100"/>
						<col width="100"/>
						<col width="100"/>
						<col width="99"/>
						<col width="94"/>
						<col width="87"/>
						<col width="59"/>
						<col width="60"/>
						<col width="73"/>
						<col width="84"/>
						<col width="85"/>
						<col width="117"/>
						<col width="84"/>
						<col width="85"/>
						<col width="85"/>
						<col width="85"/>
						<col width="85"/>
						<col width="85"/>
						<col width="85"/>
						<col width="85"/>
						<col width="114"/>
						<col width="85"/>
						<col width="114"/>
						<col width="85"/>
					</columns>
					<head>
						<cell bkcolor="user34" col="0" color="user35" display="text" rowspan="2" text="선택"/>
						<cell bkcolor="user34" col="1" color="user35" display="text" rowspan="2" text="판매구분"/>
						<cell bkcolor="user34" col="2" color="user35" display="text" rowspan="2" text="영업망"/>
						<cell bkcolor="user34" col="3" color="user35" display="text" rowspan="2" text="처리일시"/>
						<cell bkcolor="user34" col="4" color="user35" display="text" rowspan="2" text="판매처"/>
						<cell bkcolor="user34" col="5" color="user35" display="text" rowspan="2" text="판매담당자"/>
						<cell bkcolor="user34" col="6" color="user35" display="text" rowspan="2" text="서비스관리번호"/>
						<cell bkcolor="user34" col="7" color="user35" display="text" rowspan="2" text="고객명"/>
						<cell bkcolor="user34" col="8" color="user35" display="text" rowspan="2" text="개통번호"/>
						<cell bkcolor="user34" col="9" color="user35" display="text" rowspan="2" text="개통일시"/>
						<cell bkcolor="user34" col="10" color="user35" display="text" rowspan="2" text="개통처"/>
						<cell bkcolor="user34" col="11" color="user35" display="text" rowspan="2" text="개통담당자"/>
						<cell bkcolor="user34" col="12" color="user35" display="text" rowspan="2" text="세부판매유형"/>
						<cell bkcolor="user34" col="13" color="user35" display="text" rowspan="2" text="유통망"/>
						<cell bkcolor="user34" col="14" display="text" rowspan="2">
							<cell col="0" color="user35" display="text" text="단말기"/>
							<cell col="0" color="user35" display="text" row="1" text="모델"/>
						</cell>
						<cell bkcolor="user34" col="15" display="text" rowspan="2">
							<cell col="0" color="user35" display="text" text="단말기" wordwrap="word"/>
							<cell col="0" color="user35" display="text" row="1" text="일련번호" wordwrap="word"/>
						</cell>
						<cell bkcolor="user34" col="16" display="text" rowspan="2">
							<cell col="0" color="user35" display="text" text="USIM"/>
							<cell col="0" color="user35" display="text" row="1" text="모델"/>
						</cell>
						<cell bkcolor="user34" col="17" display="text" rowspan="2">
							<cell col="0" color="user35" display="text" text="USIM" wordwrap="word"/>
							<cell col="0" color="user35" display="text" row="1" text="일련번호" wordwrap="word"/>
						</cell>
						<cell bkcolor="user34" col="18" color="user35" display="text" rowspan="2" text="결제조건"/>
						<cell bkcolor="user34" col="19" color="user35" display="text" rowspan="2" text="할부기간"/>
						<cell bkcolor="user34" col="20" color="user35" display="text" rowspan="2" text="T-약정기간"/>
						<cell bkcolor="user34" col="21" color="user35" display="text" rowspan="2" text="T-약정보조금"/>
						<cell bkcolor="user34" col="22" color="user35" display="text" rowspan="2" text="OCB/MCard"/>
						<cell bkcolor="user34" col="23" color="user35" display="text" rowspan="2" text="OCB/MCard&#32;금액"/>
						<cell bkcolor="user34" col="24" color="user35" display="text" rowspan="2" text="대리점밴드2"/>
						<cell bkcolor="user34" col="25" color="user35" display="text" rowspan="2" text="할부판매가"/>
						<cell bkcolor="user34" col="26" color="user35" display="text" rowspan="2" text="현금판매가"/>
						<cell bkcolor="user34" col="27" color="user35" colspan="3" display="text" text="판매수납정보"/>
						<cell bkcolor="user34" col="30" color="user35" colspan="2" display="text" text="SKT예수금수납정보"/>
						<cell bkcolor="user34" col="32" color="user35" colspan="4" display="text" text="처리자&#32;정보"/>
						<cell bkcolor="user34" col="27" color="user35" display="text" row="1" text="현금수납"/>
						<cell bkcolor="user34" col="28" color="user35" display="text" row="1" text="폰&#32;세이프"/>
						<cell bkcolor="user34" col="29" color="user35" display="text" row="1" text="신용카드수납"/>
						<cell bkcolor="user34" col="30" color="user35" display="text" row="1" text="현금수납"/>
						<cell bkcolor="user34" col="31" color="user35" display="text" row="1" text="대납"/>
						<cell bkcolor="user34" col="32" color="user35" display="text" row="1" text="최초처리일시"/>
						<cell bkcolor="user34" col="33" color="user35" display="text" row="1" text="최초처리자"/>
						<cell bkcolor="user34" col="34" color="user35" display="text" row="1" text="변경처리일시"/>
						<cell bkcolor="user34" col="35" color="user35" display="text" row="1" text="변경처리자"/>
					</head>
					<body>
						<cell align="center" col="0" colid="CHK" display="checkbox" edit="checkbox"/>
						<cell align="center" col="1" colid="SALE_TYP" display="text"/>
						<cell align="center" col="2" colid="SL_NET_NM" display="text"/>
						<cell align="center" col="3" colid="SALE_DTM" display="text" Mask="####-##-##&#32;##:##"/>
						<cell col="4" colid="SALE_PLC_NM" display="text"/>
						<cell align="left" col="5" display="text" expr='SALE_CHGRG_ID&#32;+&#32;&quot;&#32;&quot;&#32;+&#32;SALE_USER_NM'/>
						<cell align="center" col="6" colid="SVC_MGMT_NUM" display="text"/>
						<cell col="7" colid="CUST_NM" display="text" expr='sf_formatString(Cust_Nm,&#32;&quot;#*##########&quot;)'/>
						<cell col="8" colid="SVC_NUM" display="text" expr='sf_formatString(SVC_NUM,&#32;&quot;###-#***-****&quot;)'/>
						<cell align="center" col="9" colid="SVC_DTM" display="text" Mask="####-##-##&#32;##:##"/>
						<cell col="10" colid="SVC_PLC_NM" display="text"/>
						<cell col="11" display="text" expr='SVC_CHGRG_ID&#32;+&#32;&quot;&#32;&quot;&#32;+&#32;SVC_USER_NM'/>
						<cell align="center" col="12" colid="SALE_DTL_TYP" display="text"/>
						<cell align="center" col="13" colid="DS_NET_NM" display="text"/>
						<cell align="center" col="14" colid="EQP_MDL_NM" display="text"/>
						<cell align="center" col="15" colid="EQP_SER_NUM" display="text" expr='sf_formatString(EQP_SER_NUM,&#32;&quot;##*****&quot;)'/>
						<cell align="center" col="16" colid="USIM_MDL_NM" display="text"/>
						<cell align="center" col="17" colid="USIM_SER_NUM" display="text" expr='sf_formatString(USIM_SER_NUM,&#32;&quot;##******&quot;)'/>
						<cell align="center" col="18" colid="SETTL_COND" display="text"/>
						<cell align="center" col="19" colid="ALLOT_PRD_NM" display="text"/>
						<cell align="right" col="20" colid="AGRMT_PRD_NM" display="text"/>
						<cell align="right" col="21" colid="AGRMT_ASTAMT" display="number"/>
						<cell align="center" col="22" colid="OCB_MCARD_NM" display="text"/>
						<cell align="right" col="23" colid="OCB_MCARD_PRC" display="number"/>
						<cell align="right" col="24" colid="RETENTION_AGRMT_ASTAMT" display="number"/>
						<cell align="right" col="25" colid="EQP_ALLOT_SALE_PRC" display="number"/>
						<cell align="right" col="26" colid="EQP_CASH_SALE_PRC" display="number"/>
						<cell align="right" col="27" colid="CASH_PAY_AMT" display="number"/>
						<cell align="right" col="28" colid="PHONE_SAFE_AMT" display="number"/>
						<cell align="right" col="29" colid="CRDTCRD_AMT" display="number"/>
						<cell align="right" col="30" colid="SKT_CASH_AMT" display="number"/>
						<cell align="right" col="31" colid="SKT_PRXPAY_AMT" display="number"/>
						<cell align="center" col="32" colid="ins_dtm" display="text" Mask="####-##-##&#32;##:##"/>
						<cell align="center" col="33" colid="ins_user" display="text"/>
						<cell align="center" col="34" colid="mod_dtm" display="text" Mask="####-##-##&#32;##:##"/>
						<cell align="center" col="35" colid="mod_user" display="text"/>
					</body>
					<summary>
						<cell bkcolor="user37" col="0" color="user35" colspan="5" display="text"/>
						<cell align="right" bkcolor="user37" col="5" color="user35" colspan="22" display="text" text="수납합계"/>
						<cell align="right" bkcolor="user37" col="27" color="user35" display="number" expr='SUM(&quot;CASH_PAY_AMT&quot;)'/>
						<cell align="right" bkcolor="user37" col="28" color="user35" display="number" expr='SUM(&quot;CRDTCRD_AMT&quot;)'/>
						<cell align="right" bkcolor="user37" col="29" color="user35" display="number" expr='SUM(&quot;CRDTCRD_AMT&quot;)'/>
						<cell align="right" bkcolor="user37" col="30" color="user35" display="number" expr='SUM(&quot;SKT_CASH_AMT&quot;)'/>
						<cell align="right" bkcolor="user37" col="31" color="user35" display="number" expr='SUM(&quot;SKT_PRXPAY_AMT&quot;)'/>
						<cell align="right" bkcolor="user37" col="32" color="user35" colspan="4" display="number"/>
					</summary>
				</format>
			</contents>
		</Grid>
		<Div Height="21" Id="Div0" Left="814" TabOrder="2" TabStop="FALSE" Text="Div2" Top="60" Width="208">
			<Contents>
				<Button Cursor="HAND" Height="21" Id="btn_ExcelExport" ImageID="btn_i_exceldown_w" Left="181" OnClick="Div0_btn_ExcelExport_OnClick" TabOrder="1" TabStop="FALSE" Text="Button1" ToolTipText="Excel&#32;Download" Width="19"></Button>
			</Contents>
		</Div>
		<Div Border="Raised" Height="40" Id="Div_Condition" Left="10" Style="sty_div_search" TabOrder="3" TabStop="FALSE" Text="Div0" Top="10" Width="1004">
			<Contents>
				<Edit Border="Flat" Height="20" Id="edt_SvcMgmtNum" Left="118" LeftMargin="2" MaxLength="10" Number="TRUE" OnChar="Div_Condition_edt_SvcMgmtNum_OnChar" RightMargin="2" Style="sty_ipt_form" TabOrder="0" Top="7" Width="121"></Edit>
				<Static Align="Right" Height="20" Id="Static2" Left="22" Style="sty_lb_dataview" TabOrder="2" Text="서비스관리번호" Top="7" VAlign="Middle" Width="92"></Static>
				<Edit Border="Flat" Enable="FALSE" Height="20" Id="edt_CustNM" Left="809" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="3" Top="7" Width="92"></Edit>
				<Edit Border="Flat" Height="20" Id="edt_SvcNum" Left="334" LeftMargin="2" MaxLength="12" Number="TRUE" OnChar="Div_Condition_edt_SvcNum_OnChar" RightMargin="2" Style="sty_ipt_form" TabOrder="4" Top="7" Width="92"></Edit>
				<Static Align="Right" Height="20" Id="Static0" Left="236" Style="sty_lb_dataview" TabOrder="5" Text="개통번호" Top="7" VAlign="Middle" Width="92"></Static>
				<Static Align="Right" Height="20" Id="Static1" Left="710" Style="sty_lb_dataview" TabOrder="6" Text="고객명" Top="7" VAlign="Middle" Width="92"></Static>
				<Static Align="Right" Height="20" Id="Static3" Left="470" Style="sty_lb_Search" TabOrder="7" Text="단말기일련번호" Top="7" VAlign="Middle" Width="92"></Static>
				<Edit Border="Flat" Enable="FALSE" Height="20" Id="edt_MdlNm" Left="638" LeftMargin="2" OnCharChanged="div_search_edt_SerNum_OnCharChanged" OnKeyDown="div_search_edt_SerNum_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="8" Top="7" Width="71"></Edit>
				<Edit Border="Flat" Height="20" Id="edt_SerNum" Left="566" LeftMargin="2" MaxLength="30" OnCharChanged="Div_Condition_edt_SerNum_OnCharChanged" OnKeyDown="Div_Condition_edt_SerNum_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="9" Top="7" Width="71"></Edit>
				<Button Align="Left" ButtonStyle="TRUE" Height="21" Id="btn_Search" ImageID="btn_a_2" Left="923" LeftMargin="5" OnClick="Div_Condition_btn_Search_OnClick" Style="sty_btn_a" TabOrder="10" TabStop="FALSE" Text="조회" Top="7" Width="60"></Button>
				<Edit Border="Flat" Enable="FALSE" Height="20" Id="edt_MdlCd" Left="710" LeftMargin="2" OnCharChanged="div_search_edt_SerNum_OnCharChanged" OnKeyDown="div_search_edt_SerNum_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="11" Top="7" Visible="FALSE" Width="7"></Edit>
			</Contents>
		</Div>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_delete" ImageID="btn_e_4" Left="866" LeftMargin="15" OnClick="btn_Delete_OnClick" Style="sty_btn_e" TabOrder="4" Text="이력&#32;삭제" Top="569" Visible="FALSE" Width="85"></Button>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_close" ImageID="btn_d_2" Left="952" LeftMargin="5" OnClick="btn_close_OnClick" Style="sty_btn_d" TabOrder="5" Text="닫기" Top="569" Width="60"></Button>
		<Edit Border="Flat" Enable="FALSE" Height="20" Id="edt_DeleteRsn" Left="198" LeftMargin="2" MaxLength="500" OnChar="Div_Condition_edt_SvcMgmtNum_OnChar" RightMargin="2" Style="sty_ipt_form" TabOrder="6" Top="571" Width="665"></Edit>
		<Static Align="Right" Height="20" Id="stc_Label" Left="99" Style="sty_lb_dataview" TabOrder="7" Text="삭제사유" Top="572" VAlign="Middle" Width="92"></Static>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_DisHistory" ImageID="btn_e_4" Left="10" LeftMargin="17" OnClick="btn_DisHistory_OnClick" Style="sty_btn_e" TabOrder="8" Text="재고이력" Top="569" Width="85"></Button>
	</Form>
	<Script><![CDATA[/*******************************************************************************
* 프로그램ID : SALAGS00200
* 업무명      : 영업관리
* 프로그램명  : 판매변경이력조회
--------------------------------------------------------------------------------
* 작성자      : 김연석
* 작성일      : 2009.02.06
--------------------------------------------------------------------------------
* 1. 변경이력
수정자    : 김연석
수정일    : 2009.10.12
수정 내역 : 판매변경이력 삭제기능 추가
*******************************************************************************/

/*******************************************************************************
// 1. 전 처리기
*******************************************************************************/
#include "lib::lib_commF.js"
#include "lib::lib_util.js"
#include "lib::lib_SAL.js"

/*******************************************************************************
// 2. 폼 변수 정의
*******************************************************************************/
var FV_GNRL_SALE_NO;      // 일반판매번호     - 상태조회 화면으로 분기하는 경우 사용
var FV_GNRL_SALE_CHG_SEQ; // 일반판매변경순번 - 상태조회 화면으로 분기하는 경우 사용

var FV_JOB_CL;				// 작업구분(S:조회, D:이력삭제)
var FV_JOB_RESULT;			// 작업결과


// 글로벌 세션정보
var FV_USER_ID;					// 사용자ID
var FV_USER_NM;					// 사용자명

var	FV_ORG_ID;					// 소속 
var	FV_ORG_NM;					// 소속명
var	FV_ORG_CL;					// 소속구분
var	FV_AGENCY_ID;           	// 소속 대리점ID
var	FV_AGENCY_NM;           	// 소속 대리점명
var	FV_AGENCY_UKEY_ID;      	// 소속 대리점UKEY ID	
	
var	FV_ORG_AREA_ID;				// 근무지 ID
var	FV_ORG_AREA_NM;				// 근무지명
var	FV_ORG_AREA_POS_AGENCY_CD;	// 근무지 
var	FV_ORG_AREA_UKEY_ID;     	// 근무지ukeyid
var	FV_ORG_AREA_SUB_CD;      	// 근무지subcd
var	FV_ORG_AREA_CHANNEL_CD;  	// 근무지 channelcd	
var	FV_USER_GRP;			 	// 유저그룹
var	FV_DUTY;					// 사용자 직책
var	FV_ORG_AREA_CL1;			// 근무지 구분

/*******************************************************************************
* 함수명 : df_auth
* 기능명 : 사용자의 권한별 Button 제어
*******************************************************************************/
function df_auth()
{
	f_getSession();
}

/*******************************************************************************
* 함수명 : df_search
* 기능명 : 공통 조회 Button Click
*******************************************************************************/
function df_search(sButton)
{

}

/*******************************************************************************
* 함수명 : SALSCO00200_OnLoadCompleted
* 기능명 : OnLoadCompleted 이벤트 - Form이 Open될 떄 수행되는 이벤트
*******************************************************************************/
function SALSCO00200_OnLoadCompleted(obj)
{
	// pFrmNum : 글로벌 변수로 화면ID를 가지고 있음.
	// cf_setAuth : 화면ID에 할당된 권한에 대한 버튼 상태 변경
	// 화면 디자인시 권한을 가지는 버튼은 Default로 Visable 속성값을 false로 줘야함.
	cf_setAuth(pFrmNum);	// 권한 공통
	stc_Label.Visible     = btn_delete.Visible;
	edt_DeleteRsn.Visible = btn_delete.Visible;

	df_auth();
	f_init();
}

/*******************************************************************************
* 함수명 : f_init
* 기능명 : 화면 초기화 및 조회 Parameter Setting
*******************************************************************************/
function f_init()
{

	http.Sync = true;

	//일반 판매관리 화면에서 넘겨준 서비스관리번호로 조회
	var sCond = param1;

	if (length(sCond) == 10) {
		Div_Condition.edt_SvcMgmtNum.text = sCond;
		Div_Condition.edt_SvcNum.text     = "";
		Div_Condition.edt_MdlCd.text      = "";
		Div_Condition.edt_MdlNm.text      = "";
		Div_Condition.edt_SerNum.text     = "";
	} else if (length(sCond) == 11) {
		Div_Condition.edt_SvcMgmtNum.text = "";
		Div_Condition.edt_SvcNum.text     = sCond;
		Div_Condition.edt_MdlCd.text      = "";
		Div_Condition.edt_MdlNm.text      = "";
		Div_Condition.edt_SerNum.text     = "";
	} else {
		Div_Condition.edt_SvcMgmtNum.text = "";
		Div_Condition.edt_SvcNum.text     = "";
		Div_Condition.edt_MdlCd.text      = "";
		Div_Condition.edt_MdlNm.text      = "";
		Div_Condition.edt_SerNum.text     = sCond;

        Div_Condition_edt_SerNum_OnCharChanged(Div_Condition.edt_SerNum);
	}

	if(IsExistVar("param1",true) == true)
	{
		Div_Condition_btn_Search_OnClick();
	}
	
	http.Sync = false;
}


/*******************************************************************************
 * @description    : 글로벌 섹션 정보
*******************************************************************************/
function f_getSession()
{
	FV_USER_ID        			= gds_session.GetColumn(0, "loginid");				// 사용자ID
	FV_USER_NM        			= gds_session.GetColumn(0, "usernm");				// 사용자명

	FV_ORG_ID         			= gds_session.GetColumn(0, "orgid");				// 소속 
	FV_ORG_NM         			= gds_session.GetColumn(0, "orgnm");				// 소속명
	FV_ORG_CL         			= gds_session.GetColumn(0, "orgcl");				// 소속구분
	FV_AGENCY_ID      			= gds_session.GetColumn(0, "posAgencyId");        	// 소속 대리점ID
	FV_AGENCY_NM      			= gds_session.GetColumn(0, "posAgencyNm");        	// 소속 대리점명
	FV_AGENCY_UKEY_ID 			= gds_session.GetColumn(0, "posAgencyUkeyId");    	// 소속 대리점UKEY ID	

	FV_ORG_AREA_ID            	= gds_session.GetColumn(0, "orgareaid");			// 근무지 ID
	FV_ORG_AREA_NM            	= gds_session.GetColumn(0, "orgareanm");			// 근무지명
	FV_ORG_AREA_POS_AGENCY_CD 	= gds_session.GetColumn(0, "orgareaposagencycd");	// 근무지 
	FV_ORG_AREA_UKEY_ID       	= gds_session.GetColumn(0, "orgareaukeyid");      	// 근무지ukeyid
	FV_ORG_AREA_SUB_CD        	= gds_session.GetColumn(0, "orgareaukeysubcd");   	// 근무지subcd
	FV_ORG_AREA_CHANNEL_CD    	= gds_session.GetColumn(0, "orgareaukeychannelcd"); // 근무지 channelcd	
	FV_USER_GRP               	= gds_session.GetColumn(0, "usergrp");				// 유저그룹
	FV_ORG_AREA_CL1           	= gds_session.GetColumn(0, "orgareacl1");			// 근무지 구분
	FV_DUTY                   	= gds_session.GetColumn(0, "duty");	   		    	// 직책	
}

/*******************************************************************************
* 함수명 : f_callBack 
* 기능명 : 트랜잭션 콜백 
* 파라미터
1. sSvcID  : 서비스 아이디
*******************************************************************************/
function f_callBack(sSvcID)
{

	if (sSvcID == "svcSearch") {

		if (ds_SaleChgHst.Count > 0) {
			lf_CustInfo(0);
			if (FV_JOB_RESULT == "Y") {
				alert("이력이 삭제 되었습니다..");
		
				FV_JOB_RESULT = "";
				Div_Condition.edt_SvcMgmtNum.SetFocus();
				return;
			}
		} else {
			if (FV_JOB_RESULT == "Y") {
				alert("이력이 삭제 되었습니다..");
		
				FV_JOB_RESULT = "";
				Div_Condition.edt_SvcMgmtNum.SetFocus();
				return;
			} else {
				if (FV_JOB_CL == "S") {
					alert("조회된 자료가 없습니다.");
					Div_Condition.edt_SvcMgmtNum.SetFocus();
					return;
				} 
			}
		}
	}

	if (sSvcID == "deleteSaleHst") {
		FV_JOB_RESULT = "";
		FV_JOB_RESULT = ds_result.GetColumn(ds_result.currow, "JOB_CL");

		if (FV_JOB_RESULT == "Y") {
			Div_Condition_btn_Search_OnClick();
		}
	}
	    

	if (sSvcID == "svcDisInfo") {

		if (ds_DisInfo.Count = 0) {
			alert("등록된 단말기 일련번호가 아닙니다.");
			Div_Condition.edt_SerNum.SetFocus();
			return;
		}
		if (ds_DisInfo.Count > 1) {
			//단말기 일련번호에 해당하는 모델이 2개 이상이면 popup창에서 선택할수 있게 한다.
			sf_salDupProdPop(ds_DisInfo.currow, "ds_DisInfo", "ds_DisInfo");

			Div_Condition.edt_MdlCd.Text = ds_DisInfo.GetColumn(0, "PROD_CD");
			Div_Condition.edt_MdlNm.Text = ds_DisInfo.GetColumn(0, "PROD_NM");
		} else {
			Div_Condition.edt_MdlCd.Text = ds_DisInfo.GetColumn(0, "PROD_CD");
			Div_Condition.edt_MdlNm.Text = ds_DisInfo.GetColumn(0, "PROD_NM");
		}

		return;
	}
	
	if (sSvcId == "getSaleHst") {
		// 삭제할 이력을 선택하였는지 Check
		var wDelRow = -1;
		var wRow    =  0;
		while ( wRow < ds_SaleChgHst.count)
		{
			if (ds_SaleChgHst.GetColumn(wRow, "CHK") == "1") {
				wDelRow = wRow;
			}
			wRow++;
		}

		if (ds_SaleHstInfo.count == 0) {
			alert("U.Key I/F 전문찾기 오류 입니다.");
			Div_Condition.edt_SerNum.SetFocus();
			return;
		}

		// 선택된 정보를 삭제를 위한 Dataset에 Setting하기 위해서 변수에 할당
        var sDEL_SALE_NO     = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "DEL_SALE_NO");
        var sDEL_SEQ         = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "DEL_SEQ");
        var sMAX_SEQ         = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "MAX_SEQ");
        var sBF_SALE_NO      = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_SALE_NO");
        var sBF_SEQ          = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_SEQ");
        var sBF_EQP_MDL_CD   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_EQP_MDL_CD");
        var sBF_EQP_MDL_NM   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_EQP_MDL_NM");
        var sBF_EQP_SER_NUM  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_EQP_SER_NUM");
        var sBF_EQP_OLDSALE  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_EQP_OLD_SALE_YN");
        var sBF_EQP_HST      = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_EQP_HST");
        var sBF_EQP_HST_NM   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_EQP_HST_NM");
        var sBF_EQP_HST_DT   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_EQP_HST_DT");
        var sBF_USIM_MDL_CD  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_USIM_MDL_CD");
        var sBF_USIM_MDL_NM  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_USIM_MDL_NM");
        var sBF_USIM_SER_NUM = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_USIM_SER_NUM");
        var sBF_USIM_OLDSALE = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_USIM_OLD_SALE_YN");
        var sBF_USIM_HST     = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_USIM_HST");
        var sBF_USIM_HST_NM  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_USIM_HST_NM");
        var sBF_USIM_HST_DT  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "BF_USIM_HST_DT");
        var sAF_EQP_MDL_CD   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_EQP_MDL_CD");
        var sAF_EQP_MDL_NM   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_EQP_MDL_NM");
        var sAF_EQP_SER_NUM  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_EQP_SER_NUM");
        var sAF_EQP_OLDSALE  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_EQP_OLD_SALE_YN");
        var sAF_EQP_HST      = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_EQP_HST");
        var sAF_EQP_HST_NM   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_EQP_HST_NM");
        var sAF_EQP_HST_DT   = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_EQP_HST_DT");
        var sAF_USIM_MDL_CD  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_USIM_MDL_CD");
        var sAF_USIM_MDL_NM  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_USIM_MDL_NM");
        var sAF_USIM_SER_NUM = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_USIM_SER_NUM");
        var sAF_USIM_OLDSALE = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_USIM_OLD_SALE_YN");
        var sAF_USIM_HST     = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_USIM_HST");
        var sAF_USIM_HST_NM  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_USIM_HST_NM");
        var sAF_USIM_HST_DT  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "AF_USIM_HST_DT");
        var sEXCHG_DTM       = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "EXCHG_DTM");
        var sEXCHG_CHGRG_ID  = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "EXCHG_CHGRG_ID");
        var sSALE_CNCL_CL    = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "SALE_CNCL_CL");
        var sOLD_RTN_MDL     = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "OLD_RTN_MDL");
        var sOLD_RTN_SER_NUM = ds_SaleHstInfo.GetColumn(ds_SaleHstInfo.currow, "OLD_RTN_SER_NUM");

		var sSaleChgHstCl    = ds_SaleChgHst.GetColumn(wDelRow, "SALE_CHG_HST_CL");       // 판매변경이력구분


		var sOP_DT           = ds_Interface.GetColumn(ds_SaleHstInfo.currow, "OP_DT");
		var sOP_TM           = ds_Interface.GetColumn(ds_SaleHstInfo.currow, "OP_TM");
		var sSEQ             = ds_Interface.GetColumn(ds_SaleHstInfo.currow, "SEQ");
		var sSALE_DT         = ds_Interface.GetColumn(ds_SaleHstInfo.currow, "SALE_DT");
		var sSALE_CHG_DT     = ds_Interface.GetColumn(ds_SaleHstInfo.currow, "SALE_CHG_DT");
		var sGBN             = "";

		// 선택한 순번이 마지막 순번이 아니면 처리불가
		if (sDEL_SEQ < sMAX_SEQ) {
			alert("중간 이력을 삭제할 수 없습니다.\n\n선택한 순번 : " + sDEL_SEQ + " / 최종이력순번 : " + sMAX_SEQ);
			Div_Condition.edt_SvcMgmtNum.SetFocus();
			return;
		}

		// 기기변경/약정변경/채널변경에 의한 판매취소건인 경우 처리 불가
		if (sSALE_CNCL_CL == "2") {
			alert("기기변경에 의한 판매취소 자료이므로 이력을 삭제할 수 없습니다.");
			Div_Condition.edt_SvcMgmtNum.SetFocus();
			return;
		}
		if (sSALE_CNCL_CL == "3") {
			alert("채널변경에 의한 판매취소 자료이므로 이력을 삭제할 수 없습니다.");
			Div_Condition.edt_SvcMgmtNum.SetFocus();
			return;
		}
		if (sSALE_CNCL_CL == "5") {
			alert("약정변경에 의한 판매취소 자료이므로 이력을 삭제할 수 없습니다.");
			Div_Condition.edt_SvcMgmtNum.SetFocus();
			return;
		}

        if (ds_Interface.Count < 1 ) {
			if (sSaleChgHstCl != "05" && sSaleChgHstCl != "06") {
				alert("U.Key I/F 전문을 찾지 못하였습니다.\n\n일반판매관리번호 : " + sDEL_SALE_NO + ",  판매변경순번 : " + sDEL_SEQ
					+ " \n\n운영 담당자에게 연락하십시오.");
				Div_Condition.edt_SvcMgmtNum.SetFocus();
				return;
			}
		}


		var sDisStatus      = "";	// 재고 Check 오류코드
		var sSuplDelete     = "N";	// 부가서비스 삭제여부
		var sBfSaleNo       = "";	// 재판매-판매취소 판매번호
		var sBfSaleChgSeq   = "";	// 재판매-판매취소 변경순번
		var sAfDIsProcedure = "N";	// 삭제대상 재고 Procedure 호출여부
		var sBfDIsProcedure = "N";	// 변경 전 재고 Procedure 호출여부
		var sOldRtnMdl      = "";   // 중고반납 단말기 모델
		var sOldRtnSerNum   = "";   // 중고반납 단말기 일련번호

		switch(sSaleChgHstCl)
		{
			case "01" : 
				// 일반판매 - 중고판매가 아닌 경우 재고 상태 Check
				if (sAF_EQP_OLDSALE == "N") {
    				sDisStatus = lf_DelDisCheck(sAF_EQP_MDL_CD, sAF_EQP_HST, sAF_EQP_HST_DT, sSALE_DT);
    				if (sDisStatus == "E1") {
    					alert("단말기 [" + sAF_EQP_MDL_NM + "/" + sAF_EQP_SER_NUM + "]가 판매출고 상태가 아닙니다.");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
    				if (sDisStatus == "E2") {
    					alert("단말기 [" + sAF_EQP_MDL_NM + "/" + sAF_EQP_SER_NUM + "]가 판매일자[" + sSALE_DT + "]와 다른 일자[" + 
    					                   sAF_EQP_HST_DT + "]에 판매 출고 되엇습니다.");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
    			}
				if (sAF_USIM_OLDSALE == "N") {
    				sDisStatus = lf_DelDisCheck(sAF_USIM_MDL_CD, sAF_USIM_HST, sAF_USIM_HST_DT, sSALE_DT);
    				if (sDisStatus == "E1") {
    					alert("USIM [" + sAF_USIM_MDL_NM + "/" + sAF_USIM_SER_NUM + "]가 판매출고 상태가 아닙니다.");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
    				if (sDisStatus == "E2") {
    					alert("USIM [" + sAF_USIM_MDL_NM + "/" + sAF_USIM_SER_NUM + "]가 판매일자[" + sSALE_DT + "]와 다른 일자[" + 
    					                 sAF_USIM_HST_DT + "]에 판매 출고 되엇습니다.");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
				}

				sGBN            = "G";
				sAfDIsProcedure = "1";
				sBfDIsProcedure = "N";
				sSuplDelete     = "Y";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";
				sOldRtnMdl      = sOLD_RTN_MDL;
				sOldRtnSerNum   = sOLD_RTN_SER_NUM;

				break;
			case "02" :
				// 기기변경 
				//          상품 재고 Status Check..- 중고판매가 아닌 경우 재고 상태 Check
				if (sAF_EQP_OLDSALE == "N") {
    				sDisStatus = lf_DelDisCheck(sAF_EQP_MDL_CD, sAF_EQP_HST, sAF_EQP_HST_DT, sSALE_CHG_DT);
    				if (sDisStatus == "E1") {
    					alert("단말기 [" + sAF_EQP_MDL_NM + "/" + sAF_EQP_SER_NUM + "]가 기기교환출고 상태가 아닙니다.[" + 
    					                   sAF_EQP_HST_DT + "/" + sAF_EQP_HST_NM + "]");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
    				if (sDisStatus == "E2") {
    					alert("단말기 [" + sAF_EQP_MDL_NM + "/" + sAF_EQP_SER_NUM + "]가 기기교환일자[" + sSALE_DT + "]와 다른 일자[" + 
    					                   sAF_EQP_HST_DT + "]에 기기교환출고 되엇습니다.");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
    			}
    			if (sAF_USIM_OLDSALE == "N") {
    				sDisStatus = lf_DelDisCheck(sAF_USIM_MDL_CD, sAF_USIM_HST, sAF_USIM_HST_DT, sSALE_CHG_DT);
    				if (sDisStatus == "E1") {
    					alert("USIM [" + sAF_USIM_MDL_NM + "/" + sAF_USIM_SER_NUM + "]가 기기교환출고 상태가 아닙니다.[" + 
    					                 sAF_USIM_HST_DT + "/" + sAF_USIM_HST_NM + "]");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
    				if (sDisStatus == "E2") {
    					alert("USIM [" + sAF_USIM_MDL_NM + "/" + sAF_USIM_SER_NUM + "]가 기기교환일자[" + sSALE_DT + "]와 다른 일자[" + 
    					                 sAF_USIM_HST_DT + "]에 기기교환출고 되엇습니다.");
    					Div_Condition.edt_SvcMgmtNum.SetFocus();
    					return;
    				}
				}


				// 기기변경 전 상품 재고 Status Check..
				// 변경 전 및 변경 후 상품 정보가 같을 경우 변경 상품의 재고상태 Check 하지 않음
				if (sBF_EQP_OLDSALE == "N" && (sBF_EQP_MDL_NM != sAF_EQP_MDL_NM || sBF_EQP_SER_NUM != sAF_EQP_SER_NUM)) {
     				sDisStatus = lf_RefDisCheck(sBF_EQP_MDL_CD, sBF_EQP_HST, sBF_EQP_HST_DT, sSALE_CHG_DT);
     				if (sDisStatus == "E3") {
     					alert("변경 전 단말기 [" + sBF_EQP_MDL_NM + "/" + sBF_EQP_SER_NUM + "]가 기기교환입고 상태가 아닙니다.[" + 
     					                           sBF_EQP_HST_DT + "/" + sBF_EQP_HST_NM + "]");
     					Div_Condition.edt_SvcMgmtNum.SetFocus();
     					return;
     				}
     				if (sDisStatus == "E4") {
     					alert("변경 전 단말기 [" + sBF_EQP_MDL_NM + "/" + sBF_EQP_SER_NUM + "]가 기기교환입고일자[" + sSALE_CHG_DT + "]와 다른 일자[" + 
     					                           sBF_EQP_HST_DT + "]에 기기교환입고 되엇습니다.");
     					Div_Condition.edt_SvcMgmtNum.SetFocus();
     					return;
     				}
    			}
    			if (sBF_USIM_OLDSALE == "N" && (sBF_USIM_MDL_NM != sAF_USIM_MDL_NM || sBF_USIM_SER_NUM != sAF_USIM_SER_NUM)) {
     				sDisStatus = lf_RefDisCheck(sBF_USIM_MDL_CD, sBF_USIM_HST, sBF_USIM_HST_DT, sSALE_CHG_DT);
     				if (sDisStatus == "E3") {
     					alert("변경 전 USIM [" + sBF_USIM_MDL_NM + "/" + sBF_USIM_SER_NUM + "]가 기기교환입고 상태가 아닙니다.[" + 
     					                         sBF_USIM_HST_DT + "/" + sBF_USIM_HST_NM + "]");
     					Div_Condition.edt_SvcMgmtNum.SetFocus();
     					return;
     				}
     				if (sDisStatus == "E4") {
     					alert("변경 전 USIM [" + sBF_USIM_MDL_NM + "/" + sBF_USIM_SER_NUM + "]가 기기교환입고일자[" + sSALE_CHG_DT + "]와 다른 일자[" + 
     					                         sBF_USIM_HST_DT + "]에 기기교환입고 되엇습니다.");
     					Div_Condition.edt_SvcMgmtNum.SetFocus();
     					return;
     				}
				}

				sGBN            = "P";
				sAfDIsProcedure = "1";
				sBfDIsProcedure = "2";
				sSuplDelete     = "Y";
				sBfSaleNo       = sBF_SALE_NO;
				sBfSaleChgSeq   = sBF_SEQ;

				break;
			case "03" :
				// 할부추가
				sGBN            = "G";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "N";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";

				break;
			case "04" :
				// 할부취소
				sGBN            = "G";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "N";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";

				break;
			case "05" :
				// 판매가 변경
				sGBN            = "";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "N";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";

				break;
			case "06" :
				// 부가서비스 변경
				sGBN            = "";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "N";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";

				break;
			case "07" :
				// 판매취소 
				//          상품 재고 Status Check..
				if (sAF_EQP_OLDSALE == "N") {
     				sDisStatus = lf_RefDisCheck(sAF_EQP_MDL_CD, sAF_EQP_HST, sAF_EQP_HST_DT, sSALE_CHG_DT);
     				if (sDisStatus == "E3") {
     					alert("단말기 [" + sAF_EQP_MDL_NM + "/" + sAF_EQP_SER_NUM + "]가 판매취소입고 상태가 아닙니다.[" + 
     					                   sAF_EQP_HST_DT + "/" + sAF_EQP_HST_NM + "]");
     					Div_Condition.edt_SvcMgmtNum.SetFocus();
     					return;
     				}
     				if (sDisStatus == "E4") {
     					alert("단말기 [" + sAF_EQP_MDL_NM + "/" + sAF_EQP_SER_NUM + "]가 판매취소입고일자[" + sSALE_DT + "]와 다른 일자[" + 
     					                   sAF_EQP_HST_DT + "]에 판매취소입고 되엇습니다.");
     					Div_Condition.edt_SvcMgmtNum.SetFocus();
     					return;
     				}
				}
				if (sAF_USIM_OLDSALE == "N") {
	    			sDisStatus = lf_RefDisCheck(sAF_USIM_MDL_CD, sAF_USIM_HST, sAF_USIM_HST_DT, sSALE_CHG_DT);
	    			if (sDisStatus == "E3") {
	    				alert("USIM [" + sAF_USIM_MDL_NM + "/" + sAF_USIM_SER_NUM + "]가 판매취소입고 상태가 아닙니다.[" + 
	    				                 sAF_USIM_HST_DT + "/" + sAF_USIM_HST_NM + "]");
	    				Div_Condition.edt_SvcMgmtNum.SetFocus();
	    				return;
	    			}
	    			if (sDisStatus == "E4") {
	    				alert("USIM [" + sAF_USIM_MDL_NM + "/" + sAF_USIM_SER_NUM + "]가 판매취소입고일자[" + sSALE_DT + "]와 다른 일자[" + 
	    				                 sAF_USIM_HST_DT + "]에 판매취소입고 되엇습니다.");
	    				Div_Condition.edt_SvcMgmtNum.SetFocus();
	    				return;
	    			}
				}

				sGBN            = "G";
				sAfDIsProcedure = "2";
				sBfDIsProcedure = "N";
				sSuplDelete     = "N";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";

				break;
			case "12" :
				// 채널변경
				sGBN            = "C";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "Y";
				sBfSaleNo       = sBF_SALE_NO;
				sBfSaleChgSeq   = sBF_SEQ;

				break;
			case "13" :
				// 약정변경
				sGBN            = "D";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "Y";
				sBfSaleNo       = sBF_SALE_NO;
				sBfSaleChgSeq   = sBF_SEQ;

				break;
			case "14" :
				// 가입비분납전환
				sGBN            = "S";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "N";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";

				break;
			case "15" :
				// 예수금카드완납변경
				sGBN            = "";
				sAfDIsProcedure = "N";
				sBfDIsProcedure = "N";
				sSuplDelete     = "N";
				sBfSaleNo       = "";
				sBfSaleChgSeq   = "";

				break;
			default :
				alert("정의되지 않은 판매변경이력입니다. [" + sSaleChgHstCl + "]");
				Div_Condition.edt_SvcMgmtNum.SetFocus();
				return;
		}


		cf_setParam(ds_DeleteHst,"DEL_TYP",               sGBN);
		cf_setParam(ds_DeleteHst,"GNRL_SALE_NO",          sDEL_SALE_NO);
		cf_setParam(ds_DeleteHst,"GNRL_SALE_CHG_SEQ",     sDEL_SEQ);
		cf_setParam(ds_DeleteHst,"BF_SALE_NO",            sBfSaleNo);
		cf_setParam(ds_DeleteHst,"BF_SALE_CHG_SEQ",       sBfSaleChgSeq);
		cf_setParam(ds_DeleteHst,"SUPL_DELETE_YN",        sSuplDelete);
		cf_setParam(ds_DeleteHst,"AF_DIS_PROCDURE_CL",    sAfDIsProcedure);
		cf_setParam(ds_DeleteHst,"BF_DIS_PROCDURE_CL",    sBfDIsProcedure);
		cf_setParam(ds_DeleteHst,"OLD_RTN_MDL",           sOldRtnMdl);
		cf_setParam(ds_DeleteHst,"OLD_RTN_SER_NUM",       sOldRtnSerNum);
		cf_setParam(ds_DeleteHst,"EXCHG_DTM",             sEXCHG_DTM);
		cf_setParam(ds_DeleteHst,"EXCHG_CHGRG_ID",        sEXCHG_CHGRG_ID);
		cf_setParam(ds_DeleteHst,"DELETE_RSN",            edt_DeleteRsn.Text);
		cf_setParam(ds_DeleteHst,"OP_DT",                 sOP_DT);
		cf_setParam(ds_DeleteHst,"OP_TM",                 sOP_TM);
		cf_setParam(ds_DeleteHst,"SEQ",                   sSEQ);
		cf_setParam(ds_DeleteHst,"USER_ID",               FV_USER_ID);

		if (sAF_EQP_OLDSALE == "N" && sAF_EQP_MDL_CD != "" && sAF_EQP_MDL_CD != null) {
			cf_setParam(ds_DeleteHst,"AF_EQP_MDL_CD",     sAF_EQP_MDL_CD);
		} else {
			cf_setParam(ds_DeleteHst,"AF_EQP_MDL_CD",     "Null");
		}
		if (sAF_USIM_OLDSALE == "N" && sAF_USIM_MDL_CD != "" && sAF_USIM_MDL_CD != null) {
			cf_setParam(ds_DeleteHst,"AF_USIM_MDL_CD",    sAF_USIM_MDL_CD);
		} else {
			cf_setParam(ds_DeleteHst,"AF_USIM_MDL_CD",    "Null");
		}
		if (sBF_EQP_OLDSALE == "N" && sBF_EQP_MDL_CD != "" && sBF_EQP_MDL_CD != null) {
			cf_setParam(ds_DeleteHst,"BF_EQP_MDL_CD",     sBF_EQP_MDL_CD);
		} else {
			cf_setParam(ds_DeleteHst,"BF_EQP_MDL_CD",     "Null");
		}
		if (sBF_USIM_OLDSALE == "N" && sBF_USIM_MDL_CD != "" && sBF_USIM_MDL_CD != null) {
			cf_setParam(ds_DeleteHst,"BF_USIM_MDL_CD",    sBF_USIM_MDL_CD);
		} else {
			cf_setParam(ds_DeleteHst,"BF_USIM_MDL_CD",    "Null");
		}
		var sSvcID = "deleteSaleHst";
		var sInDs  = "nc_input_fieldDs=ds_DeleteHst";  
		var sOutDs = "ds_result=ds_result";
		var sArg   = "sktst.sal.SCO#deleteSaleChgHst";

        http.Sync = true;
	    cf_Transaction(sSvcID, sInDs, sOutDs, sArg);
	    http.sync = false;

		return;
	}
}

/*******************************************************************************
* 함수명 : btnSearch_OnClick
* 기능명 : 조회 Button을 Click 했을 경우
*******************************************************************************/
function Div_Condition_btn_Search_OnClick(obj)         
{

	FV_JOB_CL 				= "S";		// 조회
	edt_DeleteRsn.Enable    = false;
	btn_Delete.Enable 		= false;

	if (Div_Condition.edt_SvcMgmtNum.text =="" && Div_Condition.edt_SvcNum.text == "" && Div_Condition.edt_MdlCd.text == "") {
		alert("서비스관리번호, 개통번호 또는 단말기 일련번호를 입력하십시오.");
		Div_Condition.edt_SvcMgmtNum.SetFocus();
		return;
	}

	cf_setParam(ds_condition,"svc_mgmt_num", Div_Condition.edt_SvcMgmtNum.text);
	cf_setParam(ds_condition,"svc_num",      Div_Condition.edt_SvcNum.text);
	cf_setParam(ds_condition,"mdl_cd",       Div_Condition.edt_MdlCd.text);
	cf_setParam(ds_condition,"ser_num",      Div_Condition.edt_SerNum.text);

	var sSvcID = "svcSearch";
	var sInDs = "nc_input_fieldDs=ds_condition";  
	var sOutDs = "ds_SaleChgHst=ds_SaleChgHst";
	var sArg = "sktst.sal.SCO#getSaleChgHst";

	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);
	
}

/*******************************************************************************
* 함수명 : grd_generalsalelist_OnCellClick
* 기능명 : 조회된 판매 자료를 선택 한 경우 선택된 자료의 고객명 및 개통번호를 조회
*******************************************************************************/
function grd_generalsalelist_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
{
	lf_CustInfo(nRow);

	if (nCell > 0) {
		return;
	}

	var wRow = 0;
	while ( wRow < ds_SaleChgHst.count)
	{
		if (wRow != nRow) {
			ds_SaleChgHst.SetColumn(wRow,"CHK","0");
		}
		wRow++;
	}

	var sChk    = ds_SaleChgHst.GetColumn(ds_SaleChgHst.currow, "CHK");  		// 삭제대상 선택

	if (sChk == "0") {
		edt_DeleteRsn.Enable     = true;
		btn_Delete.Enable = true;
	} else {
		edt_DeleteRsn.Enable     = false;
		btn_Delete.Enable = false;
	}
}

/*******************************************************************************
* 함수명 : grd_GeneralSaleList_OnCellDblClick
* 기능명 : 조회된 판매 자료를 Double Click 했을 때 판매변경 화면으로 분기
*******************************************************************************/
function grd_GeneralSaleList_OnCellDblClick(obj,nRow,nCell,nX,nY,nPivotIndex)
{

	var sSlCl    = ds_SaleChgHst.GetColumn(ds_SaleChgHst.currow, "SL_CL");  				// 영업망 선택
	var sSaleNo  = ds_SaleChgHst.GetColumn(ds_SaleChgHst.currow, "GNRL_SALE_NO");  			// 일반판매번호
	var sSaleSeq = ds_SaleChgHst.GetColumn(ds_SaleChgHst.currow, "GNRL_SALE_CHG_SEQ");  	// 일반판매변경순번
	var sArg     =  "p_gnrl_sale_no="      +quote(sSaleNo);
	    sArg    += " p_gnrl_sale_chg_seq=" +quote(sSaleSeq);
	    sArg    += " p_if_proc_cl="        +quote("2");      								// 전문처리구분  1: UkeyIF ,2:PS 일반판매관리
        sArg    += " excuteMethod="        +quote("lf_dialogClose");
                
    var sMenuNo = "";
    
	switch(sSlCl)
	{
		case "01" : 
			sMenuNo = "100000147";
			break;
		case "02" :
			sMenuNo = "100000155";
			break;
		case "03" :
			sMenuNo = "100000374";
			break;
		case "04" :
			sMenuNo = "100000376";
			break;
		case "05" :
			sMenuNo = "100000645";
			break;
		default :
			alert("정의되지 않은 영업구분입니다.");
			Div_Condition.edt_SvcMgmtNum.SetFocus();
			return;
	}
    cf_openAuthPop(sMenuNo, sArg, 1024,600);  

}

/*******************************************************************************
* 함수명 : btn_ExcelExport_OnClick
* 기능명 : 조회된 판매 자료를 Excel로 Export
*******************************************************************************/
function Div0_btn_ExcelExport_OnClick(obj)
{	
	cf_exportExcel(grd_generalsalelist);
}

/*******************************************************************************
* 함수명 : lf_CustInfo
* 기능명 : 조회된 판매 자료를 선택한 경우 조회조건에 선택된 값 Setting
*******************************************************************************/
function lf_CustInfo(sRow)
{
	Div_Condition.edt_CustNM.text     = sf_formatString(ds_SaleChgHst.getColumn(sRow,"CUST_NM"), "#*##########");
	Div_Condition.edt_SvcMgmtNum.text =                 ds_SaleChgHst.getColumn(sRow,"SVC_MGMT_NUM");
	Div_Condition.edt_SvcNum.text     =                 ds_SaleChgHst.getColumn(sRow,"SVC_NUM");
	Div_Condition.edt_SerNum.text     =                 ds_SaleChgHst.getColumn(sRow,"EQP_SER_NUM");
	Div_Condition.edt_MdlNm.text      =                 ds_SaleChgHst.getColumn(sRow,"EQP_MDL_NM");
	Div_Condition.edt_MdlCd.text      =                 ds_SaleChgHst.getColumn(sRow,"EQP_MDL_CD");
}



/*******************************************************************************
 * @description    : 화면 재설정
*******************************************************************************/
function df_reSet(sArg)
{
	if(uf_isNull(sArg) == true)
	{
		
	}
	else
	{
		cf_setArg("ds_ref", sArg);	
		
		cf_init(Div_Condition);
		ds_condition.DeleteAll();

		param1 = ds_ref.getColumn(0,"param1");
		
		f_init();
	}
}

/*******************************************************************************
 * @description         : 일반판매,일반판매변경 창에서 저장시 화면 재조회.
*******************************************************************************/
function lf_dialogClose()
{
    Div_Condition.btn_Search.Click();
}


function btn_close_OnClick(obj)
{
    
	this.close();
}

/*******************************************************************************
 * @description         : 삭제 Button Click - 삭제 처리
*******************************************************************************/
function btn_Delete_OnClick(obj)
{

	FV_JOB_CL = "D";		// 이력삭제

	// 삭제할 이력을 선택하였는지 Check
	var wDelRow = -1;
	var wRow    = 0;
	while ( wRow < ds_SaleChgHst.count)
	{
		if (ds_SaleChgHst.GetColumn(wRow, "CHK") == "1") {
			wDelRow = wRow;
		}
		wRow++;
	}
	if (wDelRow < 0 ) {
		alert("삭제할 이력을 선택하십시오.");
		Div_Condition.edt_SvcMgmtNum.SetFocus();
        return;
	}


	// 추정일마감 완료된 자료는 삭제할 수 없음
	var sAsmptCloseYn = ds_SaleChgHst.GetColumn(wDelRow, "ASMPT_CLOSE_YN");
	var sAsmptCloseDt = ds_SaleChgHst.GetColumn(wDelRow, "ASMPT_CLOSE_DT");
	if (sAsmptCloseYn == "Y") {
		alert(sAsmptCloseDt + " 일자에 추정일마감 완료된 자료이므로 삭제할 수 없습니다.");
		Div_Condition.edt_SvcMgmtNum.SetFocus();
        return;
	}


	// 일마감여부 Check

	//일마감
	var sSaleDt		= mid(ds_SaleChgHst.GetColumn(wDelRow, "SALE_DTM"), 0, 8);
	cf_CheckCloseDay("02", sSaleDt, "판매변경일자"); 

    if(FV_BOOLEAN_CLOSE) return; // 입력한 일자가 마감 되었을 경우 '1'(true) 리턴.

/*
	// 월마감
	var sSaleDt		= mid(ds_SaleChgHst.GetColumn(wDelRow, "SALE_DTM"), 0, 8);
    cf_CheckCloseMnth("02", sSaleDt, "판매일자"); 
    if(FV_BOOLEAN_CLOSE) return; // 입력한 일자가 마감 되었을 경우 '1'(true) 리턴.
*/

	// 최종 삭제 전 사용자에메 마지막 확인
	var sDelConfirm = "";

    sDelConfirm = Confirm("이력을 삭제한 경우 복구할 수 없습니다.\n\n이력을 삭제하시겠습니까 ?");
    if (sDelConfirm == false)    {
		alert("이력 삭제가 취소되었습니다.");
		Div_Condition.edt_SvcMgmtNum.SetFocus();
        return;
    }

	if (edt_DeleteRsn.text == "") {
		alert("삭제사유를 입력하십시오.");
		edt_DeleteRsn.SetFocus();
		return;
	}

    var sGBN          = "";
	var sSaleChgHstCl = ds_SaleChgHst.GetColumn(wDelRow, "SALE_CHG_HST_CL");       // 판매변경이력구분
	var sSaleNo       = ds_SaleChgHst.GetColumn(wDelRow, "GNRL_SALE_NO");          // 일반판매번호
	var sSaleSeq      = ds_SaleChgHst.GetColumn(wDelRow, "GNRL_SALE_CHG_SEQ");     // 일반판매변경순번

	switch(sSaleChgHstCl)
	{
		case "02" :
			sGBN = "P";
			break;
		case "12" :
			sGBN = "C";
			break;
		case "13" :
			sGBN = "D";
			break;
		case "14" :
			sGBN = "S";
			break;
		default :
			sGBN = "G";
			break;
	}

	cf_setParam(ds_GetSaleInfo,"GBN",               sGBN);
	cf_setParam(ds_GetSaleInfo,"GNRL_SALE_NO",      sSaleNo);
	cf_setParam(ds_GetSaleInfo,"GNRL_SALE_CHG_SEQ", sSaleSeq);

	var sSvcID = "getSaleHst";
	var sInDs  = "nc_input_fieldDs=ds_GetSaleInfo";  
	var sOutDs = "ds_SaleHstInfo=ds_SaleHstInfo ds_Interface=ds_Interface";
	var sArg   = "sktst.sal.SCO#getSaleHstInfo";

	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);

}


/*******************************************************************************
 * @description    : 삭제대상 재고 Chcek
*******************************************************************************/
function lf_DelDisCheck(sProdCd, sHst, sHstDt, sSaleDt)
{        
    var bFlag = "";

	if (!uf_IsNull(sProdCd)) {
		if (sHst != "204" && sHst != "205") {
			bFlag = "E1";		// 판매출고 상태가 아닙니다.
		} 
		else if (sHstDt != sSaleDt) {
			bFlag = "E2";		// 출고일자가 다릅니다.
		}
	}

    return bFlag;
}


/*******************************************************************************
 * @description    : 기기변경 전  재고 Chcek
*******************************************************************************/
function lf_RefDisCheck(sProdCd, sHst, sHstDt, sSaleDt)
{        
    var bFlag = "";

	if (!uf_IsNull(sProdCd)) {
		if (sHst != "104" && sHst != "105") {
			bFlag = "E3";		// 판매취소 입고 상태가 아닙니다.
		} 
		else if (sHstDt != sSaleDt) {
			bFlag = "E4";		// 입고일자가 다릅니다.
		}
	}

    return bFlag;
}

/*******************************************************************************
 * @description    : 서비스관리번호 입력 시 개통번호, 일련번호 Clear
*******************************************************************************/
function Div_Condition_edt_SvcMgmtNum_OnChar(obj,strPreText,nChar,strPostText,LLParam,HLParam)
{
	 Div_Condition.edt_SvcNum.text = "";
	 Div_Condition.edt_SerNum.text = "";
	 Div_Condition.edt_MdlCd.text  = "";
	 Div_Condition.edt_MdlNm.text  = "";
}

/*******************************************************************************
 * @description    : 개통번호 입력 시 서비스관리번호, 일련번호 Clear
*******************************************************************************/
function Div_Condition_edt_SvcNum_OnChar(obj,strPreText,nChar,strPostText,LLParam,HLParam)
{
	 Div_Condition.edt_SvcMgmtNum.text = "";
	 Div_Condition.edt_SerNum.text     = "";
	 Div_Condition.edt_MdlCd.text      = "";
	 Div_Condition.edt_MdlNm.text      = "";
}

/*******************************************************************************
 * @description    : 일련번호 입력 시 상품정보 조회
*******************************************************************************/
function Div_Condition_edt_SerNum_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
{
	Div_Condition.edt_SvcMgmtNum.text = "";
	Div_Condition.edt_SvcNum.text     = "";
	Div_Condition.edt_MdlCd.text      = "";
    Div_Condition.edt_MdlNm.text      = "";

	if (nChar == 13)
	{
		Div_Condition_edt_SerNum_OnCharChanged(obj);
	}
}

function Div_Condition_edt_SerNum_OnCharChanged(obj,strPreText,strPostText)
{
	if (Length(Div_Condition.edt_SerNum.Text) == 7 ) {
		
		ds_Input.Clear();
		cf_setParam(ds_Input,"SER_NUM",  Div_Condition.edt_SerNum.Text);

		var sSvcID = "svcDisInfo";
		var sInDs  = "nc_input_fieldDs=ds_Input";  
		var sOutDs = "ds_DisInfo=ds_DisInfo";
		var sArg   = "sktst.sal.SCO#getDisProdInfo";

		cf_Transaction(sSvcID, sInDs, sOutDs, sArg);
	}
}

/*******************************************************************************
 * @description    : 재고 일련번호별 이력삭제 화면으로 분기
*******************************************************************************/
function btn_DisHistory_OnClick(obj)
{

	// 삭제할 이력을 선택하였는지 Check
	var wDelRow = ds_SaleChgHst.currow;  // 서비스관리번호 취득;
	var wRow    = 0;
	while ( wRow < ds_SaleChgHst.count)
	{
		if (ds_SaleChgHst.GetColumn(wRow, "CHK") == "1") {
			wDelRow = wRow;
		}
		wRow++;
	}

	var sSerNum = ds_SaleChgHst.GetColumn(wDelRow, "EQP_SER_NUM");
	var sArg        = "FV_SER_NUM="+quote(sSerNum);

	gf_OpenWindow( "100000607", sArg);
}
]]></Script>
</Window>