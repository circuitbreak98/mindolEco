<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="600" Id="form" Left="8" OnLoadCompleted="form_OnLoadCompleted" OnUnloadCompleted="form_OnUnloadCompleted" PidAttrib="7" Title="입고예정등록" Top="8" Ver="1.0" Width="830" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_inClList">
				<Contents></Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_inDtlList">
				<Contents>
					<colinfo id="prod_cl" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cl_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="mfact_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="color_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="in_amt" size="256" summ="default" type="STRING"/>
					<colinfo id="ord_qty" size="256" summ="default" type="STRING"/>
					<colinfo id="in_qty" size="256" summ="default" type="STRING"/>
					<colinfo id="in_plc_id" size="256" summ="default" type="STRING"/>
					<colinfo id="in_plc_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="color_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="in_fix_qty" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset CanColumnChange="ds_inMaster_CanColumnChange" DataSetType="Dataset" Id="ds_inMaster">
				<Contents>
					<colinfo id="in_cl" size="256" summ="default" type="STRING"/>
					<colinfo id="ord_mgmt_no" size="256" summ="default" type="STRING"/>
					<colinfo id="in_mgmt_no" size="256" summ="default" type="STRING"/>
					<colinfo id="in_schd_dt" size="256" summ="default" type="STRING"/>
					<colinfo id="prchs_plc_id" size="256" summ="default" type="STRING"/>
					<colinfo id="prchs_plc_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="in_plc_id" size="256" summ="default" type="STRING"/>
					<colinfo id="in_plc_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="rmks" size="256" summ="default" type="STRING"/>
					<colinfo id="in_fix_qty" size="256" summ="default" type="STRING"/>
					<colinfo id="in_fix_qty_org" size="256" summ="default" type="STRING"/>
					<colinfo id="pos_agency_id" size="256" summ="default" type="STRING"/>
					<colinfo id="pos_agency_ukey_id" size="256" summ="default" type="STRING"/>
					<colinfo id="pos_agency_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="prchs_plc_ukey_id" size="256" summ="default" type="STRING"/>
					<colinfo id="in_plc_ukey_id" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_condition"></Dataset>
			<Dataset DataSetType="Dataset" Id="ds_prodSerNumList">
				<Contents>
					<colinfo id="prod_cl" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cl_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="mfact_id" size="256" summ="default" type="STRING"/>
					<colinfo id="mfact_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cd_org" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="color_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="color_cd_org" size="256" summ="default" type="STRING"/>
					<colinfo id="color_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="in_qty" size="256" summ="default" type="STRING"/>
					<colinfo id="ser_num" size="256" summ="default" type="STRING"/>
					<colinfo id="chk" size="256" summ="default" type="STRING"/>
					<colinfo id="fix_yn" size="256" summ="default" type="STRING"/>
					<colinfo id="in_seq" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cd_color_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="mod_dtm" size="256" summ="default" type="STRING"/>
					<colinfo id="in_amt" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_prodGrpList">
				<Contents>
					<colinfo id="prod_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cnt" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cl" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cl_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="color_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="color_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="mfact_nm" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_newRow">
				<Contents>
					<colinfo id="prod_cl" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cl_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="prod_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="color_cd" size="256" summ="default" type="STRING"/>
					<colinfo id="color_nm" size="256" summ="default" type="STRING"/>
					<colinfo id="ord_qty" size="256" summ="default" type="STRING"/>
					<colinfo id="in_qty" size="256" summ="default" type="STRING"/>
					<colinfo id="mfact_nm" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_prodSerNumGrpList"></Dataset>
			<Dataset DataSetType="Dataset" Id="ds_prodInoutIf"></Dataset>
		</Datasets>
		<Div Border="Raised" Height="74" Id="div_bottomEdit" Left="10" Style="sty_div_input" TabOrder="6" Text="Div0" Top="481" Width="810">
			<Contents>
				<TextArea BindDataset="ds_inMaster" Border="Flat" Column="rmks" Height="53" Id="txa_rmks" Left="88" MaxLength="400" Style="sty_ipt_form" TabOrder="8" Top="7" VScroll="TRUE" Width="709"></TextArea>
				<Static Align="Right" Height="20" Id="Static8" Left="24" Style="sty_lb_Basic" TabOrder="1" Text="비고" Top="7" VAlign="Middle" Width="60"></Static>
			</Contents>
		</Div>
		<Grid AutoEnter="TRUE" AutoFit="TRUE" BindDataset="ds_inDtlList" BkColor2="user32" BoldHead="true" Border="Flat" Bottom="473" Editable="TRUE" Enable="true" EndLineColor="default" FillArea="TRUE" FillAreaType="Control" HeadBorder="Flat" HeadHeight="22" Height="340" Id="grd_inDtlList" InputPanel="FALSE" Left="10" LineColor="user33" MinWidth="100" OnCellDBLClick="grd_inDtlList_OnCellDblClick" OnChar="grd_inDtlList_OnChar" OnHeadClick="grd_menu_OnHeadClick" Right="820" RowHeight="21" Style="sty_Grid" TabOrder="1" TabStop="true" Top="133" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="user33" WheelScrollRow="1" Width="810">
			<contents>
				<format id="Default">
					<columns>
						<col width="62"/>
						<col width="113"/>
						<col width="196"/>
						<col width="153"/>
						<col width="101"/>
						<col width="81"/>
						<col width="99"/>
					</columns>
					<head>
						<cell bkcolor="user34" col="0" color="user35" cursor="hand" display="text" text="번호"/>
						<cell bkcolor="user34" col="1" color="user35" cursor="hand" display="text" text="상품구분"/>
						<cell bkcolor="user34" col="2" color="user35" cursor="hand" display="text" text="제조사"/>
						<cell bkcolor="user34" col="3" color="user35" cursor="hand" display="text" text="모델"/>
						<cell bkcolor="user34" col="4" color="user35" cursor="hand" display="text" text="색상"/>
						<cell bkcolor="user34" col="5" color="user35" cursor="hand" display="text" text="발주수량"/>
						<cell bkcolor="user34" col="6" color="user35" cursor="hand" display="text" text="*&#32;입고예정수량"/>
					</head>
					<body>
						<cell align="center" col="0" display="text" expr="currow+1"/>
						<cell align="center" col="1" colid="prod_cl_nm" color="expr:iif(div_search.cmb_inCl.value==&apos;101&apos;&amp;&amp;ord_qty==0,&apos;red&apos;,&apos;default&apos;)" display="text"/>
						<cell align="left" col="2" colid="mfact_nm" color="expr:iif(div_search.cmb_inCl.value==&apos;101&apos;&amp;&amp;ord_qty==0,&apos;red&apos;,&apos;default&apos;)" display="text"/>
						<cell align="left" col="3" colid="prod_nm" color="expr:iif(div_search.cmb_inCl.value==&apos;101&apos;&amp;&amp;ord_qty==0,&apos;red&apos;,&apos;default&apos;)" display="text"/>
						<cell align="left" col="4" colid="color_nm" color="expr:iif(div_search.cmb_inCl.value==&apos;101&apos;&amp;&amp;ord_qty==0,&apos;red&apos;,&apos;default&apos;)" display="text"/>
						<cell align="right" col="5" colid="ord_qty" color="expr:iif(div_search.cmb_inCl.value==&apos;101&apos;&amp;&amp;ord_qty==0,&apos;red&apos;,&apos;default&apos;)" display="number"/>
						<cell align="right" col="6" colid="in_qty" color="expr:iif(div_search.cmb_inCl.value==&apos;101&apos;,iif(in_qty!=ord_qty,iif(in_qty==0,&apos;default&apos;,&apos;red&apos;),&apos;default&apos;),&apos;default&apos;)" cursor="hand" display="number" edit="expr:decode(prod_cl,&apos;9&apos;,iif(btn_save.Enable,&apos;number&apos;,&apos;none&apos;),&apos;none&apos;)" font="expr:iif(&#32;prod_cl==&apos;9&apos;,&apos;default&apos;,&#32;&#32;&#32;iif(in_qty&gt;0,&apos;돋움,9,Underline&apos;,&apos;default&apos;))"/>
					</body>
					<summary>
						<cell align="right" bkcolor="user37" col="0" color="user38" display="text" font="돋움,9,Bold" text="합계"/>
						<cell bkcolor="user37" col="1" color="user38" display="text"/>
						<cell bkcolor="user37" col="2" color="user38" display="text"/>
						<cell bkcolor="user37" col="3" color="user38" display="text"/>
						<cell bkcolor="user37" col="4" color="user38" display="text"/>
						<cell bkcolor="user37" col="5" color="user38" display="number" expr="sum(&apos;ord_qty&apos;)"/>
						<cell bkcolor="user37" col="6" colid="in_qty" color="user38" display="number" expr="sum(&apos;in_qty&apos;)"/>
					</summary>
				</format>
			</contents>
		</Grid>
		<Div Height="21" Id="div_btn" Left="506" TabOrder="2" Text="Div2" Top="108" Width="230">
			<Contents>
				<Button Cursor="HAND" Height="21" Id="btn_excelDown" ImageID="btn_i_exceldown_w" Left="186" OnClick="div_btn_btn_excelDown_OnClick" TabOrder="1" Text="Button1" ToolTipText="Excel&#32;Download" Width="19"></Button>
				<Button Cursor="HAND" Height="21" Id="btn_delRow" ImageID="btn_i_subtract_w" Left="157" OnClick="div_btn_btn_delRow_OnClick" TabOrder="2" Text="Button1" ToolTipText="추가된&#32;행삭제" Width="19"></Button>
				<Button Cursor="HAND" Height="21" Id="btn_excelUp" ImageID="btn_i_excelup_w" Left="208" OnClick="div_btn_btn_excelUp_OnClick" TabOrder="3" Text="Button1" ToolTipText="Excel&#32;Upload" Visible="FALSE" Width="19"></Button>
			</Contents>
		</Div>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="21" Id="btn_prodAdd" ImageID="btn_b_4" Left="744" OnClick="btn_prodAdd_OnClick" Style="sty_btn_b" TabOrder="3" Text="상품입력" Top="108" Width="75"></Button>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_delete" ImageID="btn_d_2" Left="761" LeftMargin="5" OnClick="btn_delete_OnClick" Style="sty_btn_d" TabOrder="5" Text="삭제" Top="565" Width="60"></Button>
		<Button Align="Left" ButtonStyle="TRUE" Cursor="HAND" Height="25" Id="btn_save" ImageID="btn_c_2" Left="696" LeftMargin="5" OnClick="btn_save_OnClick" Style="sty_btn_c" TabOrder="4" Text="저장" Top="565" Width="60"></Button>
		<Div Border="RaisedEdge" Height="40" Id="div_search" Left="10" Style="sty_div_dataview" TabOrder="7" Text="Div0" Top="10" Width="810">
			<Contents>
				<Static Align="Right" Height="20" Id="stl_ordMgmtNo" Left="193" Style="sty_lb_Basic" TabOrder="3" Text="발주번호" Top="7" VAlign="Middle" Visible="FALSE" Width="60"></Static>
				<Button Cursor="HAND" Height="21" Id="btn_ordMgmt" ImageID="btn_i_detail" Left="381" OnClick="div_search_btn_prchs_OnClick" TabOrder="4" Text="Button0" Top="7" Visible="FALSE" Width="19"></Button>
				<Static Align="Right" Height="20" Id="Static6" Left="25" Style="sty_lb_Basic" TabOrder="5" Text="입고구분" Top="7" VAlign="Middle" Width="60"></Static>
				<Combo BindDataset="ds_inMaster" Border="Flat" CodeColumn="COMM_CD_VAL" Column="in_cl" DataColumn="comm_cd_val_nm" Height="20" Id="cmb_inCl" ImeMode="none" InnerDataset="ds_inClList" Left="89" OnChanged="div_search_cmb_inCl_OnChanged" Style="sty_ipt_form" TabOrder="1" Top="7" UserData="입고구분" Width="95"></Combo>
				<MaskEdit BindDataset="ds_inMaster" Border="Flat" Column="ord_mgmt_no" Enable="FALSE" Height="20" Id="msk_ordMgmtNo" Left="257" LeftMargin="2" Mask="@@-########-#######" RightMargin="2" Style="sty_ipt_form" TabOrder="2" Top="7" Type="STRING" Visible="FALSE" Width="125"></MaskEdit>
				<Image Height="21" Id="Image0" ImageID="bul_mand" Left="22" TabOrder="6" Top="6" Transparent="TRUE" Width="20"></Image>
				<Image Height="21" Id="img_ord" ImageID="bul_mand" Left="190" TabOrder="7" Top="6" Transparent="TRUE" Visible="FALSE" Width="20"></Image>
				<Edit Height="22" Id="edt_ordDt" Left="423" TabOrder="8" Top="7" Visible="FALSE" Width="117"></Edit>
			</Contents>
		</Div>
		<Div Border="Raised" Height="40" Id="div_process" Left="10" Style="sty_div_input" TabOrder="8" Text="Div0" Top="60" Width="810">
			<Contents>
				<Static Align="Right" Height="20" Id="Static1" Left="601" Style="sty_lb_Basic" TabOrder="1" Text="입고처" Top="7" VAlign="Middle" Width="60"></Static>
				<Edit BindDataset="ds_inMaster" Border="Flat" Column="in_plc_nm" Height="20" Id="edt_inPlcNm" Left="666" LeftMargin="2" OnCharChanged="div_process_edt_inPlcNm_OnCharChanged" OnKeyDown="div_process_edt_inPlcNm_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="5" Top="7" Width="115"></Edit>
				<Button Cursor="HAND" Height="21" Id="btn_in" ImageID="btn_i_detail" Left="780" OnClick="div_process_btn_in_OnClick" TabOrder="4" Text="Button0" Top="7" Width="19"></Button>
				<Edit BindDataset="ds_inMaster" Border="Flat" Column="prchs_plc_nm" Height="20" Id="edt_prchsPlcNm" Left="256" LeftMargin="2" OnCharChanged="div_process_edt_prchsPlcNm_OnCharChanged" OnKeyDown="div_process_edt_prchsPlcNm_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="3" Top="7" Width="115"></Edit>
				<Button Cursor="HAND" Height="21" Id="btn_prchs" ImageID="btn_i_detail" Left="370" OnClick="div_process_btn_prchs_OnClick" TabOrder="6" Text="Button0" Top="7" Width="19"></Button>
				<Static Align="Right" Height="20" Id="Static3" Left="17" Style="sty_lb_Basic" TabOrder="7" Text="입고예정일" Top="7" VAlign="Middle" Width="68"></Static>
				<Static Align="Right" Height="20" Id="Static2" Left="191" Style="sty_lb_Basic" TabOrder="8" Text="매입처" Top="7" VAlign="Middle" Width="60"></Static>
				<Calendar BindDataset="ds_inMaster" Border="Flat" ButtonImageID="btn_i_calendar" Column="in_schd_dt" DayFont="Default,-1" HeaderBorder="NONE" HeaderFont="Default,-1" HeadStyle="sty_calendar_head" Height="20" Id="cal_inSchdDt" Left="89" LeftMargin="2" MonthPopupBorder="RAISED" NullValue="&#32;" OnChanged="div_process_cal_inSchdDt_OnChanged" RightMargin="2" SaturdayTextColor="user28" Style="sty_calendar" SundayTextColor="user27" TabOrder="2" TodayColor="user26" Top="7" UserData="입고예정일" WeeksFont="Default,-1" WeekStyle="sty_calendar_week" Width="92"></Calendar>
				<Image Height="21" Id="Image2" ImageID="bul_mand" Left="9" TabOrder="9" Top="6" Transparent="TRUE" Width="20"></Image>
				<Image Height="21" Id="Image0" ImageID="bul_mand" Left="201" TabOrder="10" Top="6" Transparent="TRUE" Width="20"></Image>
				<Image Height="21" Id="Image1" ImageID="bul_mand" Left="611" TabOrder="11" Top="6" Transparent="TRUE" Width="20"></Image>
				<Static Align="Right" Height="20" Id="Static0" Left="432" Style="sty_lb_Basic" TabOrder="12" Text="팀" Top="7" VAlign="Middle" Width="21"></Static>
				<Edit BindDataset="ds_inMaster" Border="Flat" Column="pos_agency_nm" Height="20" Id="edt_posAgencyNm" Left="458" LeftMargin="2" OnCharChanged="div_process_edt_posAgencyNm_OnCharChanged" OnKeyDown="div_process_edt_posAgencyNm_OnKeyDown" RightMargin="2" Style="sty_ipt_form" TabOrder="14" Top="7" Width="115"></Edit>
				<Button Cursor="HAND" Height="21" Id="btn_agency" ImageID="btn_i_detail" Left="572" OnClick="div_process_btn_agency_OnClick" TabOrder="13" Text="Button0" Top="7" Width="19"></Button>
				<Image Height="21" Id="Image3" ImageID="bul_mand" Left="426" TabOrder="15" Top="6" Transparent="TRUE" Width="20"></Image>
				<Edit BindDataset="ds_inMaster" Border="Flat" Column="prchs_plc_id" Height="20" Id="edt_prchsPlcId" Left="389" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="16" Top="7" Visible="FALSE" Width="10"></Edit>
				<Edit BindDataset="ds_inMaster" Border="Flat" Column="pos_agency_id" Height="20" Id="edt_posAgencyId" Left="592" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="17" Top="7" Visible="FALSE" Width="10"></Edit>
				<Edit BindDataset="ds_inMaster" Border="Flat" Column="in_plc_id" Height="20" Id="edt_inPlcId" Left="800" LeftMargin="2" RightMargin="2" Style="sty_ipt_form" TabOrder="18" Top="7" Visible="FALSE" Width="10"></Edit>
			</Contents>
		</Div>
		<Grid BindDataset="ds_prodGrpList" BkColor2="default" BoldHead="true" Bottom="388" Enable="true" EndLineColor="default" Height="100" Id="grd_prodGrpList" InputPanel="FALSE" Left="840" LineColor="default" Right="1080" TabOrder="10" TabStop="true" Top="288" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="FALSE" VLineColor="default" WheelScrollRow="1" Width="240">
			<contents>
				<format id="Default">
					<columns>
						<col width="21"/>
						<col width="65"/>
						<col width="33"/>
						<col width="28"/>
						<col width="89"/>
					</columns>
					<head>
						<cell col="0" display="text"/>
						<cell col="1" display="text"/>
						<cell col="2" display="text"/>
						<cell col="3" display="text"/>
						<cell col="4" display="text"/>
					</head>
					<body>
						<cell col="0" colid="prod_cl" display="text"/>
						<cell col="1" colid="prod_cl_nm" display="text"/>
						<cell col="2" colid="color_cd" display="text"/>
						<cell col="3" colid="prod_cnt" display="text"/>
						<cell col="4" colid="mfact_nm" display="text"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Grid BindDataset="ds_newRow" BkColor2="default" BoldHead="true" Bottom="480" Enable="true" EndLineColor="default" Height="88" Id="Grid0" InputPanel="FALSE" Left="840" LineColor="default" Right="944" TabOrder="11" TabStop="true" Top="392" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="FALSE" VLineColor="default" WheelScrollRow="1" Width="104">
			<contents>
				<format id="Default">
					<columns>
						<col width="68"/>
						<col width="60"/>
						<col width="58"/>
						<col width="54"/>
						<col width="26"/>
					</columns>
					<head>
						<cell col="0" display="text"/>
						<cell col="1" display="text"/>
						<cell col="2" display="text"/>
						<cell col="3" display="text"/>
						<cell col="4" display="text"/>
					</head>
					<body>
						<cell col="0" colid="prod_cl_nm" display="text"/>
						<cell col="1" colid="mfact_nm" display="text"/>
						<cell col="2" colid="in_qty" display="text"/>
						<cell col="3" colid="ord_qty" display="text"/>
						<cell col="4" colid="prod_cl" display="text"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Grid BindDataset="ds_prodSerNumList" BkColor2="default" BoldHead="true" Bottom="280" Enable="true" EndLineColor="default" Height="112" Id="grd_prodSerNumList" InputPanel="FALSE" Left="840" LineColor="default" Right="1148" TabOrder="9" TabStop="true" Top="168" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="FALSE" VLineColor="default" WheelScrollRow="1" Width="308">
			<contents>
				<format id="Default">
					<columns>
						<col width="11"/>
						<col width="122"/>
						<col width="107"/>
						<col width="48"/>
						<col width="55"/>
						<col width="30"/>
						<col width="27"/>
					</columns>
					<head>
						<cell col="0" display="text"/>
						<cell col="1" display="text"/>
						<cell col="2" display="text"/>
						<cell col="3" display="text"/>
						<cell col="4" display="text"/>
						<cell col="5" display="text"/>
						<cell col="6" display="text"/>
					</head>
					<body>
						<cell col="0" colid="in_qty" display="text"/>
						<cell col="1" display="text" expr="ds_prodSerNumList.GetRowType(currow)"/>
						<cell col="2" colid="mod_dtm" display="text"/>
						<cell col="3" colid="prod_cd" display="text"/>
						<cell col="4" display="text"/>
						<cell col="5" display="text"/>
						<cell col="6" colid="color_nm" display="text"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Grid BindDataset="ds_prodInoutIf" BkColor2="default" BoldHead="true" Bottom="580" Enable="true" EndLineColor="default" Height="84" Id="Grid1" InputPanel="FALSE" Left="839" LineColor="default" Right="1015" TabOrder="12" TabStop="true" Top="496" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="FALSE" VLineColor="default" WheelScrollRow="1" Width="176">
			<contents>
				<format id="Default">
					<columns>
						<col width="80"/>
						<col width="80"/>
						<col width="80"/>
						<col width="80"/>
						<col width="80"/>
						<col width="80"/>
						<col width="80"/>
					</columns>
					<body>
						<cell col="0" colid="OP_DT" display="text"/>
						<cell col="1" colid="OP_TM" display="text"/>
						<cell col="2" colid="SEQ" display="text"/>
						<cell col="3" colid="rgst_seq" display="text"/>
						<cell col="4" colid="ser_num" display="text"/>
						<cell col="5" colid="prod_cd" display="text"/>
						<cell col="6" colid="color_cd" display="text"/>
					</body>
				</format>
			</contents>
		</Grid>
	</Form>
	<Script><![CDATA[/*******************************************************************************
* 프로그램ID  : DISINN00400
* 업무명      : 재고
* 프로그램명  : 입고예정등록
--------------------------------------------------------------------------------
* 작성자      : 한병곤
* 작성일      : 2009.02.10
--------------------------------------------------------------------------------
* 1. 변경이력
수정자    :
수정일    :
수정 내역 :
*******************************************************************************/
//==============================================================================
// 공통 스크립트 로딩
//==============================================================================
#include "lib::lib_commF.js"
#include "lib::lib_DIS.js"
#include "lib::lib_commPopup.js"
#include "lib::lib_util.js"
#include "lib::lib_commMsg.js"

//==============================================================================
// 폼 변수 정의
//==============================================================================
var FV_IN_MGMT_NO;     // 입고번호.
var FV_ORD_MGMT_NO;    // 발주번호.
var FV_IN_PLC_ID;      // 입고처.
var FV_IN_CL;          // 입고구분.
var FV_PARENT_PAGE_NO; // 메뉴번호 
var FV_ORG_ID;	       // 조직코드
var FV_ORG_CL;         // 조직구분
var FV_POS_AGENCY_ID;
var FV_POS_AGENCY_UKEY_ID;
var FV_POS_AGENCY_NM;
var FV_ORG_AREA_ID;    // 근무지 cd.
var FV_ORG_AREA_NM;    // 근무지 nm.
var FV_MENU_NO       = "100000911"; //메뉴번호 (100000911: 입고예정등록)
var FV_EVENT_YN = "Y"; //Y인 경우 일자 onchagned evnet 체크 함.

/*******************************************************************************
 * @description    : 최초 폼 로드시 발생 - 이벤트
*******************************************************************************/
function form_OnLoadCompleted(obj)
{
	FV_IN_MGMT_NO  = sInMgmtNo;
	FV_ORD_MGMT_NO = sOrdMgmtNo;
	FV_IN_PLC_ID   = sInPlcId;
	FV_IN_CL       = sInCl;
	FV_PARENT_PAGE_NO = sParentPageNo;
	
	// 권한.
	cf_setAuth(FV_MENU_NO);
	
    // 세션정보 취득.
    FV_ORG_ID = gds_session.GetColumn(0,"orgId");
    FV_ORG_CL = gds_session.GetColumn(0,"orgCl");	
    FV_POS_AGENCY_ID      = gds_session.GetColumn(0,"posAgencyId");   
    FV_POS_AGENCY_NM      = gds_session.GetColumn(0,"posAgencyNm");     
    FV_POS_AGENCY_UKEY_ID = gds_session.GetColumn(0,"posAgencyUkeyId");
    FV_ORG_AREA_ID        = gds_session.GetColumn(0,"orgAreaId");     
    FV_ORG_AREA_NM        = gds_session.GetColumn(0,"orgAreaNm");   
	
	// 그리드 체크박스 설정 및 정렬
	cf_setGrdChecknSortEvent(grd_inDtlList, 0);
	
	// 공통 코드를 위한 데이타셋 설정
	cf_setCommonCodeDsEnv();
	
	//  입고구분 : ZDIS_C_00020
	cf_setCommonCode("ds_inClList", "ZDIS_C_00020");
	
	// 입고구분을 필터링하기 위한 sync 처리
	http.Sync = true;	
	
	// 설정된 코드를 기반으로 공통 코드를 추가 및 데이타 바인딩
	cf_checkCommonCode();	

	// 입고구분 필터링 (구매입고/교품반환입고/교품입고/판매취소입고)	
	//ds_inClList.Filter("COMM_CD_VAL == '101' || COMM_CD_VAL == '102' || COMM_CD_VAL == '103' || COMM_CD_VAL == '109'");
	ds_inClList.Filter("COMM_CD_VAL == '101'");
		
	http.Sync = false;
	
	// 조회조건에 기본값 설정
	cf_setInitDataForCmb(div_search.cmb_inCl,"선택");
	
	// 입고 마스터/상세 조회.
	
	if(!uf_IsNull(FV_IN_MGMT_NO)){
		f_getInList();	
	}else{
		f_setInit();
	}
}

/*******************************************************************************
 * @description    : 초기화
*******************************************************************************/
function f_setInit()
{

	// 입고 마스터에 로우 추가.
	ds_inMaster.AddRow();	
					
	// 입고구분 셋팅.
	div_search.cmb_inCl.Index = 0;
	
	FV_EVENT_YN = "N"; //N인 경우 일자 onchagned evnet 체크 안함.
	
	// 입고예정일 셋팅.
	div_process.cal_inSchdDt.Value = Mid(cf_getDate(),0,8);
	
	FV_EVENT_YN = "Y";
	
	div_search.cmb_inCl.Enable = true;
	div_process.cal_inSchdDt.Enable = true;
	
	// 소속대리점이 있으면
	if( !uf_IsNull(FV_POS_AGENCY_ID) ){
	
		div_process.edt_posAgencyId.value = FV_POS_AGENCY_ID;
		div_process.edt_posAgencyNm.value = FV_POS_AGENCY_NM;
		
		div_process.edt_posAgencyNm.Enable = false;
		div_process.btn_agency.Enable = false;	
			
		// 소속대리점이 있으면서 근무지와 다르면 입고처 셋팅.
		if( FV_POS_AGENCY_ID != FV_ORG_AREA_ID ){
								
			div_process.edt_inPlcId.value = FV_ORG_AREA_ID;
			div_process.edt_inPlcNm.value = FV_ORG_AREA_NM;
			
			div_process.edt_inPlcNm.Enable = false;
			div_process.btn_in.Enable = false;						
		}else{
			div_process.edt_inPlcNm.Enable = true;
			div_process.btn_in.Enable = true;				
		}
							
	}else{
	
		div_process.edt_posAgencyNm.Enable = true;
		div_process.btn_agency.Enable = true;							
	}
	
	f_setOrdMgmtNo();	
	
	f_setButton();
	
	// 데이터 변경 여부 확인 셋팅.
	f_setOrgDs();

}

/*******************************************************************************
 * @description    : 콜백
 * @param sSvcID   : 서비스 아이디
*******************************************************************************/
function f_callBack(sSvcID)
{	
	if(sSvcId == "getInList"){
	
		// 1. 신규인지 수정인지
		// 2. 수정일때 권한이 있는지 없는지
		// 3. 권한이 있을때 수정할 수 있는 상태인지.		
		// 조회시 입고구분 disable
		div_search.cmb_inCl.Enable = false;
		div_process.cal_inSchdDt.Enable = false;
		f_setInSchdData();
				
		// 발주번호 검색 창 셋팅.
		f_setOrdMgmtNo();	
		
		// 버튼 셋팅.
		f_setButton();			

		// 데이터 변경 여부 확인 셋팅.
		f_setOrgDs();	
		
	}else if(sSvcId == 'searchOrdData'){
	
		ds_prodSerNumList.ClearData();
		ds_prodGrpList.ClearData();
		ds_newRow.ClearData();	
		var iAddRowIndex = "";
		
		// 기타 상품 셋팅. (구매입고 최초 등록 시 기타상품은 입고예정등록화면에서 입력 가능하게 상품 데이터를 생성한다. )
		for(var i = 0 ; i < ds_inDtlList.rowcount ; i++){

			if(ds_inDtlList.GetColumn(i,"prod_cl") == "9"){
				
				iAddRowIndex = ds_prodSerNumList.AddRow();
				
				ds_prodSerNumList.SetColumn(iAddRowIndex,"prod_cl",ds_inDtlList.GetColumn(i,"prod_cl"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"prod_cl_nm",ds_inDtlList.GetColumn(i,"prod_cl_nm"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"mfact_id",ds_inDtlList.GetColumn(i,"mfact_id"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"mfact_nm",ds_inDtlList.GetColumn(i,"mfact_nm"));
				
				ds_prodSerNumList.SetColumn(iAddRowIndex,"prod_cd",ds_inDtlList.GetColumn(i,"prod_cd"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"prod_nm",ds_inDtlList.GetColumn(i,"prod_nm"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"color_cd",ds_inDtlList.GetColumn(i,"color_cd"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"color_nm",ds_inDtlList.GetColumn(i,"color_nm"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"ser_num",ds_inDtlList.GetColumn(i,"ser_num"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"in_qty",0);
				ds_prodSerNumList.SetColumn(iAddRowIndex,"in_amt",ds_inDtlList.GetColumn(i,"in_amt"));
				ds_prodSerNumList.SetColumn(iAddRowIndex,"chk","");
				ds_prodSerNumList.SetColumn(iAddRowIndex,"in_seq","");
				ds_prodSerNumList.SetColumn(iAddRowIndex,"in_fix_yn","N");
				ds_prodSerNumList.SetColumn(iAddRowIndex,"prod_cd_color_cd",ds_inDtlList.GetColumn(i,"prod_cd")+ds_inDtlList.GetColumn(i,"color_cd"));
      				
			}	
		}
		
	}else if (sSvcId == 'saveInnSchd'){
		
		http.Sync = true;
		
		// 데이터 변경 여부 확인 셋팅.
		f_setOrgDs();
		
		// call parent window method
		f_callParentMethod();
		
		http.Sync = false;
		
		this.Close();	
		
	}else if (sSvcId == 'deleteInSchd'){
	
		http.Sync = true;
		
		// 데이터 변경 여부 확인 셋팅.
		f_setOrgDs();
		
		// call parent window method
		f_callParentMethod();
		
		http.Sync = false;
		
		this.Close();
	}
}
/*******************************************************************************
 공통 스크립트 영역 끝
*******************************************************************************/

/*******************************************************************************
 * @description    : 버튼 셋팅.
*******************************************************************************/
function f_setButton(){

	//저장버튼, 삭제버튼 
	if(btn_save.Visible){
	
		// 입고확정
		if(ds_inMaster.GetColumn(0,"in_fix_qty") == ds_inDtlList.Sum("in_qty") ){
			
			btn_save.Enable = false;
			btn_delete.Enable  = false;
			div_btn.btn_delRow.Enable = false;		
			btn_prodAdd.Enable = false;
			btn_ukeyAdd.Enable = false;
			div_btn.btn_excelUp.Enable = false;	
			div_bottomEdit.txa_rmks.Readonly = true;				
				
		}else{
		
			btn_save.Enable = true;
			btn_delete.Enable  = true;
			div_btn.btn_delRow.Enable = true;		
			btn_prodAdd.Enable = true;
			btn_ukeyAdd.Enable = true;
			div_btn.btn_excelUp.Enable = true;	
			div_bottomEdit.txa_rmks.Readonly = false;					
		}
					
	}else{
		
		// 입고예정일 경우.
		btn_save.Enable = false;
		btn_delete.Enable  = false;
		div_btn.btn_delRow.Enable = false;		
		btn_prodAdd.Enable = false;
		btn_ukeyAdd.Enable = false;
		div_btn.btn_excelUp.Enable = false;	
		div_bottomEdit.txa_rmks.Readonly = true;
	}

}

/*******************************************************************************
 * @description    : 데이터 변경 여부 확인 셋팅.
*******************************************************************************/
function f_setOrgDs(){

	cf_setOrgDs(ds_inDtlList);
	cf_setOrgDs(ds_inMaster);		
	cf_setOrgDs(ds_prodSerNumList);
}

/*******************************************************************************
 * @description    : 입고구분 onChanged- 이벤트
*******************************************************************************/
function div_search_cmb_inCl_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
{
	// 발주번호 검색 창 셋팅.
	f_setOrdMgmtNo();
	// form을 리셋
	f_setFormRest();
	
	div_process.cal_inSchdDt.SetFocus();
}

/*******************************************************************************
 * @description    : 상품입력 버튼 클릭 - 이벤트
*******************************************************************************/
function btn_prodAdd_OnClick(obj)
{
	// div validation 입고구분 필수 체크.
	if(!cf_checkObjValues(div_search)) return;	
		
	if(div_search.cmb_inCl.value == "101" && uf_IsNull(div_search.msk_ordMgmtNo.value)){
		alert(cf_getMessage(MSG_00043, "발주번호는"));
		div_search.msk_ordMgmtNo.SetFocus();
		return;
	}			
	
	if(uf_IsNull(div_process.cal_inSchdDt.value)){
		alert(cf_getMessage(MSG_00043, "입고예정일은"));
		div_process.cal_inSchdDt.SetFocus();
		return;
	}		
	
	if(uf_IsNull(div_process.edt_prchsPlcId.value)){

		alert(cf_getMessage(MSG_00043, "매입처"));
		div_process.edt_prchsPlcNm.SetFocus();
		return;
	}		
	
	if(uf_IsNull(div_process.edt_posAgencyId.value)){

		alert(cf_getMessage(MSG_00043, "대리점"));
		div_process.edt_posAgencyNm.SetFocus();
		return;
	}
		
	if(uf_IsNull(div_process.edt_inPlcId.value)){

		alert(cf_getMessage(MSG_00043, "입고처"));
		div_process.edt_inPlcNm.SetFocus();
		return;
	}		
	
	var sArg = "FV_STR_DSID='ds_prodSerNumList'";
	    sArg += " FV_IN_OUT_CL="+quote(ds_inMaster.GetColumn(0,"in_cl"));
	    sArg += " FV_APPLY_DT="+quote(div_process.cal_inSchdDt.value);
	    sArg += " FV_ORD_QTY="+quote(ds_inDtlList.GetColumn(ds_inDtlList.currow,"ord_qty"));
	    sArg += " FV_CALL_FUNCTION='f_setInSchdData'";
	
	dialog("DIS::DISDCO00100.xml", sArg ,830, 600);	
}

/*******************************************************************************
 * @description    :  Ukey상품입력 버튼 클릭 - 이벤트
*******************************************************************************/
function btn_ukeyAdd_OnClick(obj)
{
	// div validation 체크.
	if(!cf_checkObjValues(div_search)) return;	
	
	if(div_search.cmb_inCl.value == "101" || div_search.cmb_inCl.value == "102"){
		// 추후 .
    }else{
		//Ukey 상품입력은 입고구분이 구매입고 또는 교품입고 인 경우만 가능합니다.
		alert(MSG_00128);
		div_search.cmb_inCl.SetFocus();
		return;
	}
	
	if(div_search.cmb_inCl.value == "101" && uf_IsNull(div_search.msk_ordMgmtNo.value)){
		alert(cf_getMessage(MSG_00043, "발주번호는"));
		div_search.msk_ordMgmtNo.SetFocus();
		return;
	}	
	
	if(uf_IsNull(div_process.cal_inSchdDt.value)){
		alert(cf_getMessage(MSG_00043, "입고예정일은"));
		div_process.cal_inSchdDt.SetFocus();
		return;
	}		
	
	if(uf_IsNull(div_process.edt_prchsPlcId.value)){

		alert(cf_getMessage(MSG_00043, "매입처"));
		div_process.edt_prchsPlcNm.SetFocus();
		return;
	}		
	
	if(uf_IsNull(div_process.edt_posAgencyId.value)){

		alert(cf_getMessage(MSG_00043, "대리점"));
		div_process.edt_posAgencyNm.SetFocus();
		return;
	}
		
	if(uf_IsNull(div_process.edt_inPlcId.value)){

		alert(cf_getMessage(MSG_00043, "입고처"));
		div_process.edt_inPlcNm.SetFocus();
		return;
	}

	var sArg = "sInOutCl="+quote(div_search.cmb_inCl.value);
	    sArg += " sInOutClNm="+quote(div_search.cmb_inCl.text);
	    sArg += " sPosAgencyId="+quote(div_process.edt_posAgencyId.value);	
	    sArg += " sPosAgencyNm="+quote(div_process.edt_posAgencyNm.value);	

	dialog("DIS::DISDCO00120.xml", sArg , 830, 600);	
}

/*******************************************************************************
 * @description    : 로우 삭제 - 이벤트
*******************************************************************************/
function div_btn_btn_delRow_OnClick(obj)
{
	// 발주수량이 0이 아닌것은 삭제불가.
	if( !uf_IsNull(ds_inDtlList.GetColumn(ds_inDtlList.currow,"ord_qty")) 
		&& ds_inDtlList.GetColumn(ds_inDtlList.currow,"ord_qty") != "0"){
		
		//발주수량이 있을 경우 삭제가 불가합니다.
		alert(MSG_00112);
		return;
	}
	
	var oGrdDs = object(grd_inDtlList.BindDataset);
	// 삭제된 라인에 해당하는 상품의 일련번호를 삭제한다.
	var sProdCd  = ds_inDtlList.GetColumn(oGrdDs.row,"prod_cd");
	var sColorCd = ds_inDtlList.GetColumn(oGrdDs.row,"color_cd");
	
	for(var i= ds_prodSerNumList.GetRowCount()-1 ; i >= 0 ; i-- ){

		if( sProdCd+sColorCd == (ds_prodSerNumList.GetColumn(i,"prod_cd")+ds_prodSerNumList.GetColumn(i,"color_cd"))){
			ds_prodSerNumList.DeleteRow(i);
		}
	}
	
	oGrdDs.DeleteRow(oGrdDs.row);	
	
	//그룹핑된 상품도 삭제한다.
	for(var i= ds_prodGrpList.GetRowCount()-1 ; i >= 0 ; i-- ){

		if( sProdCd+sColorCd == (ds_prodGrpList.GetColumn(i,"prod_cd")+ds_prodGrpList.GetColumn(i,"color_cd"))){
			ds_prodGrpList.DeleteRow(i);
		}
	}	
	
	// 인터페이스 데이터도 삭제한다.
	for(var i= ds_prodInoutIf.GetRowCount()-1 ; i >= 0 ; i-- ){

		if( sProdCd+sColorCd == (ds_prodInoutIf.GetColumn(i,"prod_cd")+ds_prodInoutIf.GetColumn(i,"color_cd"))){
			ds_prodInoutIf.DeleteRow(i);
		}
	}		
}

/*******************************************************************************
 * @description    : excelDown 클릭- 이벤트
*******************************************************************************/
function div_btn_btn_excelDown_OnClick(obj)
{
	cf_exportExcel(grd_inDtlList);
}

/*******************************************************************************
 * @description    : excelUp 클릭- 이벤트
*******************************************************************************/
function div_btn_btn_excelUp_OnClick(obj)
{
	// div validation 체크.
	if(!cf_checkObjValues(div_search)) return;	
	
	if(div_search.cmb_inCl.value == "101" || div_search.cmb_inCl.value == "102"){
		// 추후 .
    }else{
		//엑셀업로드는 입고구분이 구매입고 또는 교품입고 인 경우만 가능합니다.
		alert(MSG_00113);
		div_search.cmb_inCl.SetFocus();
		return;
	}
	
	if(div_search.cmb_inCl.value == "101" && uf_IsNull(div_search.msk_ordMgmtNo.value)){
		alert(cf_getMessage(MSG_00043, "발주번호는"));
		div_search.msk_ordMgmtNo.SetFocus();
		return;
	}	
	
	if(uf_IsNull(div_process.cal_inSchdDt.value)){
		alert(cf_getMessage(MSG_00043, "입고예정일은"));
		div_process.cal_inSchdDt.SetFocus();
		return;
	}		
	
	if(uf_IsNull(div_process.edt_prchsPlcId.value)){

		alert(cf_getMessage(MSG_00043, "매입처"));
		div_process.edt_prchsPlcNm.SetFocus();
		return;
	}		
	
	if(uf_IsNull(div_process.edt_posAgencyId.value)){

		alert(cf_getMessage(MSG_00043, "대리점"));
		div_process.edt_posAgencyNm.SetFocus();
		return;
	}
		
	if(uf_IsNull(div_process.edt_inPlcId.value)){

		alert(cf_getMessage(MSG_00043, "입고처"));
		div_process.edt_inPlcNm.SetFocus();
		return;
	}		
	var sArg = "sInOutCl="+quote(div_search.cmb_inCl.value);
	
	dialog("DIS::DISDCO00200.xml", sArg , 830, 535);
}

/*******************************************************************************
 * @description    : cell double 클릭- 이벤트
*******************************************************************************/
function grd_inDtlList_OnCellDblClick(obj,nRow,nCell,nX,nY,nPivotIndex)
{
	// 입고예정 클릭 시.
	if(nCell == 6){

		// 상품이 단말기/usim인 경우 물론 0 보다 클때...
		if( (ds_inDtlList.GetColumn(nRow,"prod_cl") == "1" || ds_inDtlList.GetColumn(nRow,"prod_cl") == "2")
			&& (ds_inDtlList.GetColumn(nRow,"in_qty") > 0 ) ){

			ds_prodSerNumList.Filter("prod_cd='"+ds_inDtlList.GetColumn(nRow,"prod_cd")+"'&&color_cd='"+ds_inDtlList.GetColumn(nRow,"color_cd")+"'");
			ds_prodSerNumGrpList.CopyF(ds_prodSerNumList);			
			ds_prodSerNumList.UnFilter();

			Dialog("DIS::DISDCO00300.xml", "FV_STR_DS_DCO300=ds_prodSerNumGrpList FV_STR_DS_ORG_DCO300=ds_prodSerNumList", "255", "313");
		}
	}
}

/*******************************************************************************
 * @description    : grid onChar- 이벤트
*******************************************************************************/
function grd_inDtlList_OnChar(obj,strPreText,nChar,strPostText,nLLParam,nHLParam,nRow,nCell,nPivotIndex)
{
	var iRow;
	
	if( nCell == 6 ){
		iRow = ds_prodSerNumList.FindRow("prod_cd",ds_inDtlList.GetColumn(nRow,"prod_cd"));
		ds_prodSerNumList.SetColumn(iRow,"in_qty",strPostText);
	}	
}

/*******************************************************************************
 * @description    : save button 클릭- 이벤트
*******************************************************************************/
function btn_save_OnClick(obj)
{
	// 변경 datacheck
	if(ds_prodSerNumList.GetUpdate() == 0 && ds_inMaster.GetUpdate() == 0){
		alert(cf_getMessage(MSG_00071,"")); // 처리할 대상이 없습니다
		return;
	}		
	
	// validation
	if(!cf_checkObjValues(div_search)) return;	
		
	if(!cf_checkObjValues(div_process)) return;
	
	// 최초 등록시에만 
	if(uf_IsNull(ds_inMaster.GetColumn(0,"in_mgmt_no"))){
	
		 var sInSchdDt = div_process.cal_inSchdDt.value;

		// 마감월 체크
		//cf_CheckCloseDay('01',div_process.cal_inSchdDt.value,"입고예정일"); // 01 : 재고
		//if(FV_BOOLEAN_CLOSE) {
		//	div_process.cal_inSchdDt.SetFocus();
		//	return; // 입력한 일자가 마감 되었을 경우 '1'(true) 리턴.        
		//}
	    
		if( sInSchdDt > AddDate(Mid(cf_getDate(),0,8),30) ){
			
			//입고예정일은 현재일자보다 + 30일 이상 일자는 선택 할 수 없습니다.
			alert(cf_getMessage(MSG_00099, "입고예정일")); 
			div_process.cal_inSchdDt.SetFocus();
			return;
		}	
	}	
	
	if( div_search.cmb_inCl.value == "101" &&
		div_process.cal_inSchdDt.value < div_search.edt_ordDt.value){
		
		alert("입고예정일은 발주일자["+div_search.edt_ordDt.value+"]보다 과거로 등록할 수 없습니다.");
		div_process.cal_inSchdDt.SetFocus();			
		return;
	}
	
	if(uf_IsNull(div_process.edt_prchsPlcId.value)){

		alert(cf_getMessage(MSG_00121, "매입처;저장"));
		div_process.edt_prchsPlcNm.SetFocus();
		return;
	}		
	
	if(uf_IsNull(div_process.edt_posAgencyId.value)){

		alert(cf_getMessage(MSG_00121, "대리점;저장"));
		div_process.edt_posAgencyNm.SetFocus();
		return;
	}
		
	if(uf_IsNull(div_process.edt_inPlcId.value)){

		alert(cf_getMessage(MSG_00121, "입고처;저장"));
		div_process.edt_inPlcNm.SetFocus();
		return;
	}		
	
	if(ds_inDtlList.GetRowCount() == 0){
		//상품은 반드시 한개이상 등록해야 합니다.
		alert(MSG_00114);
		return;
	}
	
	// 구매입고 시 발주수량과 입고예정수량은 반드시 같아야 한다.
	for( var i = 0 ; i < ds_inDtlList.GetRowCount() ; i++){
	
		if(uf_IsNull(ds_inDtlList.GetColumn(i,"in_qty")) || ds_inDtlList.GetColumn(i,"in_qty") == "0" ){
			
			//라인의 입고예정수량을 반드시 한개이상 등록해야 합니다.
			alert(cf_getMessage(MSG_00115, (i+1))); 
			uf_SelPos(grd_inDtlList,i,6);
			return;
		}
		
		if(ds_inMaster.GetColumn(0,"in_cl") == "101"){
			if(ds_inDtlList.GetColumn(i,"ord_qty") != ds_inDtlList.GetColumn(i,"in_qty")){

				//구매입고 등록 시 '+(i+1)+'번째 라인의 발주수량과 입고예정수량은 반드시 같아야 합니다.
				alert(cf_getMessage(MSG_00116, (i+1))); 
				uf_SelPos(grd_inDtlList,i,6);
				return;
			}
		}
	}	
	
	// 발주단가set
	var strProdCd  = "";
	var strColorCd = "";
	var strProdCl  = "";
	var strInAmt   = 0;
	
	for(var i = 0; i < ds_inDtlList.GetRowCount() ; i++ ){
	    strProdCd  = ds_inDtlList.GetColumn(i,"prod_cd");
	    strColorCd = ds_inDtlList.GetColumn(i,"color_cd");
	    strProdCl  = ds_inDtlList.GetColumn(i,"prod_cl");
	    strInAmt   = ds_inDtlList.GetColumn(i,"in_amt");
	    
	    for(var j = 0; j < ds_prodSerNumList.GetRowCount() ; j++){

	        if ( ds_prodSerNumList.GetColumn(j,"prod_cd")  == strProdCd  &&
	             ds_prodSerNumList.GetColumn(j,"color_cd") == strColorCd &&
	             ds_prodSerNumList.GetColumn(j,"prod_cl") == strProdCl &&
	             uf_IsNull(ds_prodSerNumList.GetColumn(j,"in_amt"))  )
	        {
	            ds_prodSerNumList.SetColumn(j,"in_amt",strInAmt);
	        }
	    }
	}

	// 트랜잭션 설정
	var sSvcID = "saveInnSchd";
	var sInDs  = "ds_prodSerNumList=ds_prodSerNumList:U ds_inMaster=ds_inMaster:A ds_prodInoutIf=ds_prodInoutIf:U";
	var sOutDs = "";
	//var sArg   = "sktst.dis.INN#saveInnSchd";
	var sArg   = "sktst.dis.INN#saveInn";
	
trace(ds_prodSerNumList.SaveXML());	
trace(ds_inMaster.SaveXML());	

	// 공통 트랜잭션 호출
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg, null, true, true);
}

/*******************************************************************************
 * @description    : delete button 클릭- 이벤트
*******************************************************************************/
function btn_delete_OnClick(obj)
{

	if(uf_IsNull(FV_IN_MGMT_NO)){
		// 등록되지 않은 데이터이므로 삭제 할 수 없습니다.
		alert(cf_getMessage(MSG_00022, "등록되지 않은 데이터이므로")); 
		return;
	}
	
	//삭제하시겠습니까?
	if(!confirm(cf_getMessage(MSG_00102, "전체"))){
		return;
	}	

	// 넘길 파라메터 설정
	cf_setParam(ds_condition, "in_mgmt_no", FV_IN_MGMT_NO);
	
	// 트랜잭션 설정
	var sSvcID = "deleteInSchd";
	var sInDs  = "ds_prodSerNumList=ds_prodSerNumList:A ds_inMaster=ds_inMaster:A";
	var sOutDs = "";
	var sArg   = "sktst.dis.INN#deleteInnSchd";
	
	// 공통 트랜잭션 호출	
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg, null, true, true);
}

/*******************************************************************************
 * @description    : 발주번호 검색 창 셋팅.
*******************************************************************************/
function f_setOrdMgmtNo(){

	// 구매입고일 경우.
	var strInCl = ds_inMaster.GetColumn(0,"in_cl");
	if(strInCl == "101" || strInCl == "114"){
		
		if (strInCl == "114")
		{
			div_search.stl_ordMgmtNo.Text = "매입출고";
			div_search.msk_ordMgmtNo.mask = "@@@@@@@@@@@@";
		}
		else
		{
			div_search.stl_ordMgmtNo.Text = "발주번호";
			div_search.msk_ordMgmtNo.mask = "@@-########-#######";
		}
    		
		div_search.stl_ordMgmtNo.Visible = true;
		div_search.img_ord.Visible = true;		
		div_search.msk_ordMgmtNo.Visible = true;
		div_search.btn_ordMgmt.Visible   = true;		

		div_process.edt_prchsPlcNm.Enable = false;
		div_process.btn_prchs.Enable      = false;
		div_process.edt_inPlcNm.Enable    = false;
		div_process.btn_in.Enable         = false;		
		div_process.edt_posAgencyNm.Enable= false;
		div_process.btn_agency.Enable     = false;		
		
		// 입고관리번호가 없을 경우.(신규등록)
		if( uf_IsNull(FV_IN_MGMT_NO)){		

			// 발주번호검색 아이콘
			div_search.btn_ordMgmt.Enable = true;
			
		}else{
		
			// 발주번호검색 아이콘
			div_search.btn_ordMgmt.Enable = false;
		}		
		
	}else{
	
		// 입고관리번호가 없을 경우.(신규등록)
		if( uf_IsNull(FV_IN_MGMT_NO)){
		
			div_process.edt_prchsPlcNm.Enable = true;
			div_process.btn_prchs.Enable      = true;
			div_process.edt_inPlcNm.Enable    = true;
			div_process.btn_in.Enable         = true;		
			
			// 소속대리점이 있으면
			if( !uf_IsNull(FV_POS_AGENCY_ID) ){
			
				div_process.edt_posAgencyId.value = FV_POS_AGENCY_ID;
				div_process.edt_posAgencyNm.value = FV_POS_AGENCY_NM;
				
				div_process.edt_posAgencyNm.Enable = false;
				div_process.btn_agency.Enable = false;		
				
				// 소속대리점이 있으면서 근무지와 다르면 입고처 셋팅.
				if( FV_POS_AGENCY_ID != FV_ORG_AREA_ID ){
										
					div_process.edt_inPlcId.value = FV_ORG_AREA_ID;
					div_process.edt_inPlcNm.value = FV_ORG_AREA_NM;
					
					div_process.edt_inPlcNm.Enable = false;
					div_process.btn_in.Enable = false;						
				}else{
				
					div_process.edt_inPlcNm.Enable = true;
					div_process.btn_in.Enable = true;					
				}
									
			}else{
			
				div_process.edt_posAgencyNm.Enable = true;
				div_process.btn_agency.Enable = true;							
			}			
			
		}else{
		
			div_process.edt_prchsPlcNm.Enable = false;
			div_process.btn_prchs.Enable      = false;
			div_process.edt_inPlcNm.Enable    = false;
			div_process.btn_in.Enable         = false;	
			div_process.edt_posAgencyNm.Enable = false;
			div_process.btn_agency.Enable = false;					
		}
	
		div_search.stl_ordMgmtNo.Visible = false;
		div_search.img_ord.Visible = false;
		div_search.msk_ordMgmtNo.Visible = false;
		div_search.btn_ordMgmt.Visible   = false;	


		div_search.msk_ordMgmtNo.Value    = "";	
		
	
	}

	// 입고확정이 다 되면 막음.
	if(ds_inMaster.GetColumn(0,"in_fix_qty_org") == ds_inDtlList.Sum("in_qty") ){

		div_btn.btn_delRow.Enable = false;
		div_btn.btn_excelUp.Enable = false;
		btn_prodAdd.Enable = false;
		btn_ukeyAdd.Enable = false;
		div_bottomEdit.txa_rmks.Readonly = true;
		btn_save.Enable = false;
		btn_delete.Enable = false;
		div_process.cal_inSchdDt.Enable = false;
	}
}

/*******************************************************************************
 * @description    : form을 리셋한다.
*******************************************************************************/
function f_setFormRest(){
	
	// 데이터셋 초기화.
	ds_inDtlList.ClearData();
	ds_prodSerNumList.ClearData();
	ds_prodGrpList.ClearData();
	ds_newRow.ClearData();
	
	ds_inMaster.SetColumn(0,"ord_mgmt_no",null);
	ds_inMaster.SetColumn(0,"prchs_plc_id",null);
	ds_inMaster.SetColumn(0,"prchs_plc_nm",null);
	ds_inMaster.SetColumn(0,"rmks",null);
	
	
	// 소속대리점이 있으면
	if( !uf_IsNull(FV_POS_AGENCY_ID) ){
		
		// 소속대리점이 있으면서 근무지와 다르면 입고처 셋팅.
		if( FV_POS_AGENCY_ID == FV_ORG_AREA_ID ){
								
			ds_inMaster.SetColumn(0,"in_plc_id",null);
			ds_inMaster.SetColumn(0,"in_plc_nm",null);							
		}			
							
	}else{
	
		ds_inMaster.SetColumn(0,"in_plc_id",null);
		ds_inMaster.SetColumn(0,"in_plc_nm",null);
		ds_inMaster.SetColumn(0,"pos_agency_id",null);
		ds_inMaster.SetColumn(0,"pos_agency_nm",null);							
	}		
}

/*******************************************************************************
 * @description    : 입고 마스터/상세 조회.
*******************************************************************************/
function f_getInList(){

	// 넘길 파라메터 setting.
	cf_setParam(ds_condition, "in_mgmt_no", FV_IN_MGMT_NO);
	cf_setParam(ds_condition, "ord_mgmt_no", FV_ORD_MGMT_NO);
	cf_setParam(ds_condition, "in_plc_id", FV_IN_PLC_ID);
	cf_setParam(ds_condition, "in_cl", FV_IN_CL);
	
	// 트랜잭션 설정
	var sSvcID = "getInList";
	var sInDs  = "nc_input_fieldDs=ds_condition";
	var sOutDs = "ds_inMaster=ds_inMaster ds_inDtlList=ds_inDtlList ds_prodSerNumList=ds_prodSerNumList";
	var sArg   = "sktst.dis.INN#getInnSchdDtlList";
	
	// 공통 트랜잭션 호출
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);

}

/*******************************************************************************
 * @description    : 발주번호조회 팝업
*******************************************************************************/
function div_search_btn_prchs_OnClick(obj)
{
	var sArg = "";
	
	if (div_search.cmb_inCl.Value == "101") {
	    dialog("DIS::DISINN00101.xml", sArg , 700, 362);
	} else if (div_search.cmb_inCl.Value == "114") {
	    dialog("DIS::DISINN00102.xml", sArg , 700, 362);
	} else {
	    dialog("DIS::DISINN00101.xml", sArg , 700, 362);
	}
}

/*******************************************************************************
 * @description    : 발주 데이터 조회.
*******************************************************************************/
function f_setOrdData(sOrdMgmtNo, sInPlcId){

	// 트랜잭션 설정
	var sArg   = "";

	if ( div_search.cmb_inCl.Value == "101") 
	{
	    // 구매입고
		if(uf_IsNull(sOrdMgmtNo)){
			alert(cf_getMessage(MSG_00083, "발주번호"));
			return;
		}
		
		// 넘길 파라메터 설정
		cf_setParam(ds_condition, "ord_mgmt_no", sOrdMgmtNo);
		cf_setParam(ds_condition, "in_plc_id"  , sInPlcId);
		
		sArg   = "sktst.dis.INN#getOrd";
	} 
	else if (div_search.cmb_inCl.Value == "114")
	{
	    // 매입입고
		if(uf_IsNull(sOrdMgmtNo)){
			alert(cf_getMessage(MSG_00083, "매입출고번호"));
			return;
		}
		
		// 넘길 파라메터 설정
		cf_setParam(ds_condition, "out_mgmt_no", sOrdMgmtNo);
		cf_setParam(ds_condition, "in_plc_id"  , sInPlcId);
		
		sArg   = "sktst.dis.INN#getPrchsOut";
	}
	
	var sSvcID = "searchOrdData";
	var sInDs  = "nc_input_fieldDs=ds_condition";
	var sOutDs = "ds_inDtlList=ds_inDtlList";
				
	// 공통 트랜잭션 호출
	cf_Transaction(sSvcID, sInDs, sOutDs, sArg);	
}

/*******************************************************************************
 * @description    : 입고예정 데이터를 셋팅한다.
*******************************************************************************/
function f_setInSchdData(){	

	var iAddRowNum = 0;
	
	//http.Sync = true;
	
	// 상품일련번호 리스트를 돌려 상품그룹데이터를 만든다.
	for(var i = 0 ; i < ds_prodSerNumList.GetRowCount() ; i++ ){
	
		ds_prodGrpList.Filter("prod_cl='"+ds_prodSerNumList.GetColumn(i,"prod_cl")+"'&&color_cd='"+ds_prodSerNumList.GetColumn(i,"color_cd")+"'&&prod_cd=='"+ds_prodSerNumList.GetColumn(i,"prod_cd")+"'");
		
		if(ds_prodGrpList.GetRowCount() == 0 ){		
	
			ds_prodGrpList.UnFilter();
			iAddRowNum = ds_prodGrpList.AddRow();
			ds_prodGrpList.SetColumn(iAddRowNum,"prod_cd",ds_prodSerNumList.GetColumn(i,"prod_cd"));
			ds_prodGrpList.SetColumn(iAddRowNum,"prod_nm",ds_prodSerNumList.GetColumn(i,"prod_nm"));
			ds_prodGrpList.SetColumn(iAddRowNum,"prod_cl",ds_prodSerNumList.GetColumn(i,"prod_cl"));
			ds_prodGrpList.SetColumn(iAddRowNum,"prod_cl_nm",ds_prodSerNumList.GetColumn(i,"prod_cl_nm"));
			ds_prodGrpList.SetColumn(iAddRowNum,"color_cd",ds_prodSerNumList.GetColumn(i,"color_cd"));
			ds_prodGrpList.SetColumn(iAddRowNum,"color_nm",ds_prodSerNumList.GetColumn(i,"color_nm"));
			ds_prodGrpList.SetColumn(iAddRowNum,"mfact_nm",ds_prodSerNumList.GetColumn(i,"mfact_nm"));
		}		
	}	

	iAddRowNum = 0;
	ds_prodGrpList.UnFilter();	
	
	// 상품그룹데이터를 돌려 상품 갯수를 구한다.
	for(var k = 0 ; k < ds_prodGrpList.GetRowCount() ; k++ ){

		// 카운트 셋팅.
		ds_prodSerNumList.Filter("prod_cl=='"+ds_prodGrpList.GetColumn(k,"prod_cl")
			+"'&&color_cd=='"+ds_prodGrpList.GetColumn(k,"color_cd")
			+"'&&prod_cd=='"+ds_prodGrpList.GetColumn(k,"prod_cd")+"'");

		ds_prodGrpList.SetColumn(k,"prod_cnt",ds_prodSerNumList.Sum("in_qty"));
			
	}

	ds_prodSerNumList.UnFilter();
		
	// ds_newRow 초기화
	ds_newRow.ClearData();	
	iAddRowNum = 0;
	
	// 입고예정데이터와 비교하여 없으면 템프 데이터셋에 추가 있으면 수량만 업데이트한다.
	for(var j = 0 ; j < ds_prodGrpList.GetRowCount() ; j++ ){
		
		ds_inDtlList.Filter("prod_cl='"+ds_prodGrpList.GetColumn(j,"prod_cl")+"'&&color_cd='"+ds_prodGrpList.GetColumn(j,"color_cd")+"'&&prod_cd=='"+ds_prodGrpList.GetColumn(j,"prod_cd")+"'");
		
		if(ds_inDtlList.GetRowCount() == 0 ){		
		
			iAddRowNum = ds_newRow.AddRow();
			
			ds_newRow.SetColumn(iAddRowNum,"prod_cl",ds_prodGrpList.GetColumn(j,"prod_cl"));
			ds_newRow.SetColumn(iAddRowNum,"prod_cl_nm",ds_prodGrpList.GetColumn(j,"prod_cl_nm"));
			ds_newRow.SetColumn(iAddRowNum,"prod_cd",ds_prodGrpList.GetColumn(j,"prod_cd"));
			ds_newRow.SetColumn(iAddRowNum,"prod_nm",ds_prodGrpList.GetColumn(j,"prod_nm"));
			ds_newRow.SetColumn(iAddRowNum,"color_cd",ds_prodGrpList.GetColumn(j,"color_cd"));
			ds_newRow.SetColumn(iAddRowNum,"color_nm",ds_prodGrpList.GetColumn(j,"color_nm"));
			ds_newRow.SetColumn(iAddRowNum,"ord_qty","0");
			ds_newRow.SetColumn(iAddRowNum,"in_qty",ds_prodGrpList.GetColumn(j,"prod_cnt"));	
			ds_newRow.SetColumn(iAddRowNum,"mfact_nm",ds_prodGrpList.GetColumn(j,"mfact_nm"));	
				
		}else{
			ds_inDtlList.SetColumn(0,"in_qty",ds_prodGrpList.GetColumn(j,"prod_cnt"));
		}		
	}	
	
    ds_inDtlList.UnFilter();	
	
	iAddRowNum = 0;	
	
	// 템프 데이터셋에 추가한 열을 입고예정데이터에 추가한다.
	for(var y = 0 ; y < ds_newRow.GetRowCount() ; y++){
	
		iAddRowNum = ds_inDtlList.AddRow();
		
		ds_inDtlList.SetColumn(iAddRowNum,"prod_cl",ds_newRow.GetColumn(y,"prod_cl"));
		ds_inDtlList.SetColumn(iAddRowNum,"prod_cl_nm",ds_newRow.GetColumn(y,"prod_cl_nm"));
		ds_inDtlList.SetColumn(iAddRowNum,"prod_cd",ds_newRow.GetColumn(y,"prod_cd"));
		ds_inDtlList.SetColumn(iAddRowNum,"prod_nm",ds_newRow.GetColumn(y,"prod_nm"));
		ds_inDtlList.SetColumn(iAddRowNum,"color_cd",ds_newRow.GetColumn(y,"color_cd"));
		ds_inDtlList.SetColumn(iAddRowNum,"color_nm",ds_newRow.GetColumn(y,"color_nm"));
		ds_inDtlList.SetColumn(iAddRowNum,"ord_qty",ds_newRow.GetColumn(y,"ord_qty"));
		ds_inDtlList.SetColumn(iAddRowNum,"in_qty",ds_newRow.GetColumn(y,"in_qty"));	
		ds_inDtlList.SetColumn(iAddRowNum,"mfact_nm",ds_newRow.GetColumn(y,"mfact_nm"));	
		ds_inDtlList.SetColumn(iAddRowNum,"in_fix_qty","0");
	}
	//http.Sync = false;
}

/*******************************************************************************
 * @description    : 일련번호 조회 창이 닫히기 전에 호출
                     ( 리스트의 입고예정수량 연산. )
*******************************************************************************/
function f_setDsGroup(idsDelCnt){

	ds_inDtlList.SetColumn(ds_inDtlList.currow,"in_qty",
			toNumber(ds_inDtlList.GetColumn(ds_inDtlList.currow,"in_qty")) - toNumber(idsDelCnt) );			
			
	var sProdCd  = ds_inDtlList.GetColumn(ds_inDtlList.currow,"prod_cd");
	var sColorCd = ds_inDtlList.GetColumn(ds_inDtlList.currow,"color_cd");				
			
    // 발주수량과 입고예정수량이 모두 0 이면 그룹핑한 라인을 삭제한다.
    if(ds_inDtlList.GetColumn(ds_inDtlList.currow,"ord_qty") == 0 
		&& ds_inDtlList.GetColumn(ds_inDtlList.currow,"in_qty") == 0 ){
		
		//그룹핑된 상품 삭제한다.
		for(var i= ds_prodGrpList.GetRowCount()-1 ; i >= 0 ; i-- ){
	
			if( sProdCd+sColorCd == (ds_prodGrpList.GetColumn(i,"prod_cd")+ds_prodGrpList.GetColumn(i,"color_cd"))){
				ds_prodGrpList.DeleteRow(i);
			}
		}			
	
		ds_inDtlList.DeleteRow(ds_inDtlList.currow);
	}	
}

/*******************************************************************************
 * @description    : 호출한 창의 함수 호출.
*******************************************************************************/
function f_callParentMethod()
{
	var sFrmNum = FV_PARENT_PAGE_NO;
	var sFunc = "div_search_btn_search_OnClick";
	gf_movenCall(sFrmNum, sFunc);	
}

/*******************************************************************************
 * @description    : 매입처 enter- 이벤트
*******************************************************************************/
function div_process_edt_prchsPlcNm_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
{
	if(nChar == "13"){	

		var sArg  = "deal_co_cl1="+quote("30"); // 매입처
			//sArg += " eff_dtm="+quote(div_process.cal_inSchdDt.value); // 옵션			
		
		if(ds_inDtlList.GetUpdate() > 0){
		
			div_process.edt_prchsPlcId.SetFocus(); // CanColumnChange event 발생 시키기 위해.
			
			if(ds_inMaster_CanColumnChange()){
				cf_callDealPop(sArg, div_process, "edt_prchsPlcNm,edt_prchsPlcId");
			}	
			
		}else{
			cf_callDealPop(sArg, div_process, "edt_prchsPlcNm,edt_prchsPlcId");	
		}		
	}	
}

/*******************************************************************************
 * @description    : 매입처 click- 이벤트
*******************************************************************************/
function div_process_btn_prchs_OnClick(obj)
{
	var sArg  = "deal_co_cl1="+quote("30"); // 매입처
		//sArg += " eff_dtm="+quote(div_process.cal_inSchdDt.value); // 옵션

	cf_callDealPop(sArg, div_process, "edt_prchsPlcNm,edt_prchsPlcId");
}

/*******************************************************************************
 * @description    : 대리점 OnKeyDown 이벤트
*******************************************************************************/
function div_process_edt_posAgencyNm_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
{
	if(nChar == "13"){
		// org_id 와 org_cl 의 파라메터는 필수 입니다.
		var sArg  = "org_id="+FV_ORG_ID; // 필수
		    //sArg += " eff_dtm="+quote(div_process.cal_inSchdDt.value); // 옵션

		if(ds_inDtlList.GetUpdate() > 0){
		
			div_process.edt_posAgencyId.SetFocus(); // CanColumnChange event 발생 시키기 위해.
			
			if(ds_inMaster_CanColumnChange()){
				cf_callAgencyPop(sArg, div_process, "edt_posAgencyNm,edt_posAgencyId");
			}	
			
		}else{
			cf_callAgencyPop(sArg, div_process, "edt_posAgencyNm,edt_posAgencyId");
		}
	} 		
}

/*******************************************************************************
 * @description    : 대리점 버튼 클릭 이벤트
*******************************************************************************/
function div_process_btn_agency_OnClick(obj)
{
	var sArg  = "org_id="+FV_ORG_ID; // 필수
		//sArg += " eff_dtm="+quote(div_process.cal_inSchdDt.value); // 옵션

	cf_callAgencyPop(sArg, div_process, "edt_posAgencyNm,edt_posAgencyId");	
}

/*******************************************************************************
 * @description    : 대리점 OnChanged 이벤트
*******************************************************************************/
function div_process_edt_posAgencyNm_OnChanged(obj,strText)
{
	div_process.edt_posAgencyId.value = "";	
	div_process.edt_inPlcId.value = "";
	div_process.edt_inPlcNm.value = "";
}

/*******************************************************************************
 * @description    : 입고처 key down - 이벤트
*******************************************************************************/
function div_process_edt_inPlcNm_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
{
	if(nChar == "13"){
	
		var sAgency = div_process.edt_posAgencyId.value;	
		var sArg    = "deal_co_cl1="+quote("Z1,A2,A3,C1"); // 물류창고, 직영점, 판매점
		
		if(uf_IsNull(sAgency)) {
			alert(cf_getMessage(MSG_00083, "대리점"));
			div_process.edt_posAgencyNm.SetFocus();
			return;		
		}
		
		sArg += " pos_agency="+quote(sAgency); // 대리점
		//sArg += " eff_dtm="+quote(div_process.cal_inSchdDt.value); // 옵션		
		
		if(ds_inDtlList.GetUpdate() > 0){
		
			div_process.edt_inPlcId.SetFocus(); // CanColumnChange event 발생 시키기 위해.
			
			if(ds_inMaster_CanColumnChange()){
				cf_callDealPop(sArg, div_process, "edt_inPlcNm,edt_inPlcId");		
			}	
			
		}else{
			cf_callDealPop(sArg, div_process, "edt_inPlcNm,edt_inPlcId");		
		}				
	}	
}		

/*******************************************************************************
 * @description    : 입고처 click- 이벤트
*******************************************************************************/
function div_process_btn_in_OnClick(obj)
{
	var sAgency = div_process.edt_posAgencyId.value;	
	var sArg    = "deal_co_cl1="+quote("Z1,A2,A3,C1"); // 물류창고, 직영점, 판매점
	
	if(uf_IsNull(sAgency)) {
		alert(cf_getMessage(MSG_00083, "대리점"));
		div_process.edt_posAgencyNm.SetFocus();
		return;		
	}
	
	sArg += " pos_agency="+quote(sAgency); // 대리점
	//sArg += " eff_dtm="+quote(div_process.cal_inSchdDt.value); // 옵션

	cf_callDealPop(sArg, div_process, "edt_inPlcNm,edt_inPlcId");
}

/*******************************************************************************
 * @description    : 입고처 OnChar Changed 이벤트
*******************************************************************************/
function div_process_edt_inPlcNm_OnChanged(obj,strText)
{
	div_process.edt_inPlcId.value = "";
}

/*******************************************************************************
 * @description    : 화면 재설정
*******************************************************************************/
function df_reSet(sArg)
{
	if(sArg == null)
	{

	}else{
	
		ds_inDtlList.ClearData();
		ds_inMaster.ClearData();
		ds_condition.ClearData();
		ds_prodSerNumList.ClearData();
		ds_prodGrpList.ClearData();
		ds_newRow.ClearData();
		ds_prodSerNumGrpList.ClearData();
		ds_prodInoutIf.ClearData();
	
		cf_setArg("ds_ref", sArg);				
		
		FV_IN_MGMT_NO     = ds_ref.GetColumn(0,"sInMgmtNo");
		FV_ORD_MGMT_NO    = ds_ref.GetColumn(0,"sOrdMgmtNo");
		FV_IN_PLC_ID      = ds_ref.GetColumn(0,"sInPlcId");
		FV_IN_CL          = ds_ref.GetColumn(0,"sInCl");
		FV_PARENT_PAGE_NO = ds_ref.GetColumn(0,"sParentPageNo");
		
		// 입고 마스터/상세 조회.		
		if(!uf_IsNull(FV_IN_MGMT_NO)){
			f_getInList();	
		}else{
			f_setInit();
		}
	}
}

/*******************************************************************************
 * @description    :  화면이 종료될때 체크 대상이 2개 이상일때 데이타셋의 변경 유무를 체크 
*******************************************************************************/
function form_OnUnloadCompleted(obj)
{
	var nResult1 = cf_checkDsChanging(ds_inDtlList);
	var nResult2 = cf_checkDsChanging(ds_inMaster);
	var nResult3 = cf_checkDsChanging(ds_prodSerNumList);
	
	return cf_callDsCheckMsg(nResult1, nResult2, nResult3);
}
	
/*******************************************************************************
 * @description    :  마스터 변경시 
*******************************************************************************/
function f_setMasterChg(){	

	if(ds_inMaster.GetColumn(0,"in_cl") == "101" ){

		for(var i = 0 ; i < ds_inDtlList.rowcount ; i++){
			ds_inDtlList.SetColumn(i,"in_qty",0);
		}
		
	}else{
	
		ds_inDtlList.ClearData();
	}
	
	// 데이터셋 초기화.
	ds_prodSerNumList.ClearData();
	ds_prodGrpList.ClearData();
	ds_newRow.ClearData();	
}	

/*******************************************************************************
 * @description    : 마스터 변경 시 이벤트
*******************************************************************************/
function ds_inMaster_CanColumnChange(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
{
	if( strColumnID == "in_schd_dt" || strColumnID == "prchs_plc_nm" 
		|| strColumnID == "pos_agency_nm" || strColumnID == "in_plc_nm"){		

		if(ds_inDtlList.GetUpdate() > 0){
			
			if(confirm(MSG_00163)){
			
				f_setMasterChg();
				
				if(strColumnID == "pos_agency_nm"){
				
					div_process.edt_posAgencyId.value = "";
					div_process.edt_inPlcId.value = "";
					div_process.edt_inPlcNm.value = "";						
					div_process.edt_posAgencyNm.SetFocus();
					
				}else if(strColumnID == "prchs_plc_nm"){
				
					div_process.edt_prchsPlcId.value = "";
					div_process.edt_prchsPlcNm.SetFocus();
					
				}else if(strColumnID == "in_plc_nm"){
				
					div_process.edt_inPlcId.value = "";
					div_process.edt_inPlcNm.SetFocus();
				}				
				
				return true;
			}else{

				return false;
			}
		}
	}
}

/*******************************************************************************
 * @description    : 매입처 OnCharChanged 이벤트
*******************************************************************************/
function div_process_edt_prchsPlcNm_OnCharChanged(obj,strPreText,strPostText)
{
	if(ds_inDtlList.GetUpdate() == 0){
		div_process.edt_prchsPlcId.value = "";
	}
}

/*******************************************************************************
 * @description    : 대리점 OnCharChanged 이벤트
*******************************************************************************/
function div_process_edt_posAgencyNm_OnCharChanged(obj,strPreText,strPostText)
{
	if(ds_inDtlList.GetUpdate() == 0){
		div_process.edt_posAgencyId.value = "";	
		div_process.edt_inPlcId.value = "";
		div_process.edt_inPlcNm.value = "";	
	}	
}

/*******************************************************************************
 * @description    : 입고처 OnCharChanged 이벤트
*******************************************************************************/
function div_process_edt_inPlcNm_OnCharChanged(obj,strPreText,strPostText)
{	
	if(ds_inDtlList.GetUpdate() == 0){
		div_process.edt_inPlcId.value = "";
	}	
}

/*******************************************************************************
 * @description    : 입고예정일 OnChanged 이벤트
*******************************************************************************/
function div_process_cal_inSchdDt_OnChanged(obj,strOldText,strNewText)
{
	// 최초 화면 입장 시 현재일자를 셋팅 할때는 제외.
	if( !uf_IsNull(div_process.cal_inSchdDt.value) && FV_EVENT_YN == "Y"){
		// 마감월 체크
		//cf_CheckCloseDay('01',div_process.cal_inSchdDt.value,"입고예정일"); // 01 : 재고 
		
		//if(FV_BOOLEAN_CLOSE) {
		//	div_process.cal_inSchdDt.value = "";
		//	div_process.cal_inSchdDt.SetFocus();
		//	return; // 입력한 일자가 마감 되었을 경우 '1'(true) 리턴.
		//}		
	}
}
]]></Script>
</Window>